<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Python range() ‚Äî Comprehensive + Pyodide</title>

<style>
:root{
  --bg:#fff7e6;
  --card:#ffffff;
  --ink:#1f2937;
  --muted:#6b7280;
  --brand:#d97706;
  --brand2:#f59e0b;
  --border:#eadcc5;
  --shadow:0 16px 34px rgba(0,0,0,.08);
  --codebg:#eefbf1;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto;
  background:var(--bg);
  color:var(--ink);
  padding:24px;
}
.container{max-width:1100px;margin:auto}
h1{color:#7c2d12}
.card{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:16px;
  box-shadow:var(--shadow);
  padding:16px;
  margin:16px 0;
}
button{
  background:linear-gradient(180deg,var(--brand2),var(--brand));
  color:#fff;
  border:0;
  padding:8px 14px;
  border-radius:12px;
  cursor:pointer;
  font-weight:700;
}
button:disabled{opacity:.6}
.btn-ghost{
  background:#fff;
  color:#7c2d12;
  border:1px solid var(--border);
}
.editor{
  display:grid;
  gap:12px;
}
@media(min-width:900px){
  .editor{grid-template-columns:1fr 1fr}
}
textarea{
  width:100%;
  min-height:280px;
  font-family:ui-monospace,Consolas,monospace;
  border-radius:12px;
  border:1px solid var(--border);
  padding:12px;
}
.output{
  background:#0b1220;
  color:#e5e7eb;
  border-radius:12px;
  border:1px solid var(--border);
  padding:12px;
  min-height:280px;
  white-space:pre-wrap;
  overflow:auto;
  font-family:ui-monospace,Consolas,monospace;
}
.row{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
.status{font-weight:700;color:var(--muted)}
</style>
</head>

<body>
<div class="container">

<h1>üîÅ Python <code>range()</code> ‚Äî Practice Editor</h1>

<div class="card">
<p>Terminal-accurate output.  
<strong>print()</strong> and <strong>\n</strong> work exactly like Python.</p>

<div class="editor">

<div>
<div class="row" style="justify-content:space-between;margin-bottom:8px">
<strong>Python Code</strong>
<div class="row">
<button id="runBtn" disabled>Run ‚ñ∂</button>
<button id="resetBtn" class="btn-ghost">Reset</button>
</div>
</div>

<textarea id="codeArea" spellcheck="false"></textarea>

<div class="row" style="margin-top:8px">
<span class="status" id="status">Loading Pyodide‚Ä¶</span>
<button id="clearBtn" class="btn-ghost">Clear</button>
</div>

<p style="color:var(--muted);font-size:.9rem">
Shortcut: <strong>Ctrl + Enter</strong>
</p>
</div>

<div>
<strong>Output</strong>
<div id="output" class="output"></div>
</div>

</div>
</div>

</div>

<script>
const output = document.getElementById("output");
const statusEl = document.getElementById("status");
const runBtn = document.getElementById("runBtn");
const resetBtn = document.getElementById("resetBtn");
const clearBtn = document.getElementById("clearBtn");
const codeArea = document.getElementById("codeArea");

const DEFAULT_CODE = `print("Hello")
print("World")

for i in range(1, 6):
    print(i)

print("A\\nB\\nC")
`;

codeArea.value = DEFAULT_CODE;

/* ---------- Output (NO batching, stream-safe) ---------- */
const decoder = new TextDecoder("utf-8");

function writeOut(chunk){
  if(chunk instanceof Uint8Array){
    chunk = decoder.decode(chunk);
  }
  output.textContent += chunk;
  output.scrollTop = output.scrollHeight;
}

/* ---------- Pyodide ---------- */
let pyResolve, pyReject;
const pyReady = new Promise((res, rej)=>{pyResolve=res; pyReject=rej});

(function loadPyodide(){
  const s=document.createElement("script");
  s.src="https://cdn.jsdelivr.net/pyodide/v0.26.2/full/pyodide.js";

  s.onload=async()=>{
    try{
      const py=await loadPyodide({
        indexURL:"https://cdn.jsdelivr.net/pyodide/v0.26.2/full/"
      });

      py.setStdout({ write: writeOut });
      py.setStderr({ write: writeOut });

      // input()
      py.globals.set("js_input", t=>prompt(t||"Input:")||"");
      await py.runPythonAsync(`
import builtins
builtins.input=lambda p="": js_input(p)
`);

      statusEl.textContent="Ready ‚úÖ";
      runBtn.disabled=false;
      pyResolve(py);
    }catch(e){
      statusEl.textContent="Pyodide failed ‚ùå";
      writeOut(e+"\n");
      pyReject(e);
    }
  };

  s.onerror=()=>{
    statusEl.textContent="Load error ‚ùå";
    pyReject(new Error("Network error"));
  };

  document.head.appendChild(s);
})();

/* ---------- Run ---------- */
async function runCode(){
  runBtn.disabled=true;
  statusEl.textContent="Running‚Ä¶";
  writeOut("‚ñ∂ Running...\n");

  try{
    const py=await pyReady;
    await py.runPythonAsync(codeArea.value);
    writeOut("‚úì Done\n");
    statusEl.textContent="Ready ‚úÖ";
  }catch(e){
    writeOut("‚úó Error\n"+e+"\n");
    statusEl.textContent="Error ‚ùå";
  }
  runBtn.disabled=false;
}

runBtn.onclick=runCode;

/* Ctrl + Enter */
codeArea.addEventListener("keydown",e=>{
  if(e.ctrlKey && e.key==="Enter"){
    e.preventDefault();
    runCode();
  }
});

resetBtn.onclick=()=>{
  codeArea.value=DEFAULT_CODE;
  output.textContent="";
};

clearBtn.onclick=()=>output.textContent="";
</script>

</body>
</html>