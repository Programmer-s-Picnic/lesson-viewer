<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Python range() ‚Äî Comprehensive + Pyodide</title>

<style>
:root{
  --bg:#fff7e6;
  --card:#ffffff;
  --ink:#1f2937;
  --muted:#6b7280;
  --brand:#d97706;
  --brand2:#f59e0b;
  --border:#eadcc5;
  --shadow:0 16px 34px rgba(0,0,0,.08);
  --codebg:#eefbf1;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto;
  background:var(--bg);
  color:var(--ink);
  padding:24px;
}
.container{max-width:1100px;margin:auto}
h1{color:#7c2d12}
.card{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:16px;
  box-shadow:var(--shadow);
  padding:16px;
  margin-bottom:16px;
}
button{
  background:linear-gradient(180deg,var(--brand2),var(--brand));
  color:#fff;
  border:0;
  padding:8px 14px;
  border-radius:12px;
  cursor:pointer;
  font-weight:700;
}
button:disabled{opacity:.6;cursor:not-allowed}
.btn-ghost{
  background:#fff;
  color:#7c2d12;
  border:1px solid var(--border);
}
textarea{
  width:100%;
  min-height:280px;
  font-family:ui-monospace,Consolas,monospace;
  border-radius:12px;
  border:1px solid var(--border);
  padding:12px;
}
.output{
  background:#0b1220;
  color:#e5e7eb;
  border-radius:12px;
  border:1px solid var(--border);
  padding:12px;
  min-height:280px;
  white-space:pre-wrap;
  overflow:auto;
  font-family:ui-monospace,Consolas,monospace;
}
.row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
.status{font-weight:700;color:var(--muted)}
.editor{display:grid;gap:12px}
@media(min-width:900px){.editor{grid-template-columns:1fr 1fr}}
</style>
</head>

<body>
<div class="container">

<h1>üîÅ Python <code>range()</code> ‚Äî Practice Editor</h1>

<div class="card">
<p>Run Python directly in your browser.  
<strong>print()</strong> and <strong>\n</strong> now behave exactly like a terminal.</p>

<div class="editor">

<div>
<div class="row" style="justify-content:space-between;margin-bottom:8px">
<span><strong>Python Code</strong></span>
<div class="row">
<button id="runBtn" disabled>Run ‚ñ∂</button>
<button id="resetBtn" class="btn-ghost">Reset</button>
</div>
</div>

<textarea id="codeArea" spellcheck="false"></textarea>

<div class="row" style="margin-top:8px">
<span class="status" id="pyStatus">Loading Pyodide‚Ä¶</span>
<button id="clearBtn" class="btn-ghost">Clear Output</button>
</div>

<p style="color:var(--muted);font-size:.9rem">
Tip: Press <strong>Ctrl + Enter</strong> to run
</p>
</div>

<div>
<strong>Output</strong>
<div id="output" class="output"></div>
</div>

</div>
</div>

</div>

<script>
const outputEl = document.getElementById("output");
const statusEl = document.getElementById("pyStatus");
const runBtn = document.getElementById("runBtn");
const resetBtn = document.getElementById("resetBtn");
const clearBtn = document.getElementById("clearBtn");
const codeArea = document.getElementById("codeArea");

const DEFAULT_CODE = `# print and \\n now work correctly
print("Hello")
print("World")

for i in range(1, 6):
    print(i)

print("Line A\\nLine B\\nLine C")
`;

codeArea.value = DEFAULT_CODE;

/* ---------- Output helpers (FIXED LINE BREAKS) ---------- */
function appendOut(text){
  if(!text.endsWith("\n")) text += "\n";
  outputEl.textContent += text;
  outputEl.scrollTop = outputEl.scrollHeight;
}
function setStatus(t){statusEl.textContent = t}

/* ---------- Pyodide Promise (FAIL-SAFE) ---------- */
let pyResolve, pyReject;
const pyodideReady = new Promise((res, rej)=>{
  pyResolve=res; pyReject=rej;
});

/* ---------- Load Pyodide ---------- */
(function loadPyodideSafe(){
  const script=document.createElement("script");
  script.src="https://cdn.jsdelivr.net/pyodide/v0.26.2/full/pyodide.js";

  script.onload=async()=>{
    try{
      const pyodide=await loadPyodide({
        indexURL:"https://cdn.jsdelivr.net/pyodide/v0.26.2/full/"
      });

      pyodide.setStdout({
        batched:s=>appendOut(s)
      });
      pyodide.setStderr({
        batched:s=>appendOut(s)
      });

      // input() shim
      pyodide.globals.set("js_input", t=>prompt(t||"Input:")||"");
      await pyodide.runPythonAsync(`
import builtins
builtins.input=lambda p="": js_input(p)
`);

      setStatus("Ready ‚úÖ");
      runBtn.disabled=false;
      appendOut("Pyodide loaded successfully");
      pyResolve(pyodide);
    }catch(e){
      setStatus("Pyodide failed ‚ùå");
      appendOut("Error loading Pyodide:\\n"+e);
      pyReject(e);
    }
  };

  script.onerror=()=>{
    const e=new Error("Network error loading Pyodide");
    setStatus("Pyodide failed ‚ùå");
    appendOut(e.message);
    pyReject(e);
  };

  document.head.appendChild(script);
})();

/* ---------- Run ---------- */
runBtn.onclick=async()=>{
  runBtn.disabled=true;
  setStatus("Running‚Ä¶");
  appendOut("‚ñ∂ Running‚Ä¶");

  try{
    const py=await pyodideReady;
    await py.runPythonAsync(codeArea.value);
    appendOut("‚úì Done");
    setStatus("Ready ‚úÖ");
  }catch(e){
    appendOut("‚úó Error:\\n"+e);
    setStatus("Error ‚ùå");
  }finally{
    runBtn.disabled=false;
  }
};

/* ---------- Reset ---------- */
resetBtn.onclick=()=>{
  codeArea.value=DEFAULT_CODE;
  outputEl.textContent="";
  setStatus(runBtn.disabled?"Loading Pyodide‚Ä¶":"Ready ‚úÖ");
};

/* ---------- Clear ---------- */
clearBtn.onclick=()=>outputEl.textContent="";

/* ---------- Ctrl + Enter ---------- */
codeArea.addEventListener("keydown",e=>{
  if(e.ctrlKey && e.key==="Enter"){
    runBtn.click();
  }
});
</script>

</body>
</html>