<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />

    <meta
      property="og:title"
      content="Series Printing & Summation in Python (Interactive)"
    />
    <meta
      property="og:description"
      content="Interactive series printing and summation in Python. AP/GP/Harmonic/Squares/Fibonacci/Alternating and more. Pyodide powered. Champak Roy."
    />
    <meta
      property="og:image"
      content="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjyoQWoe62o54odkLj67MDHu-SbqOPQyEjep0AC4oruXdr15y9uQsx8nRu6P6pWgJQGMEvgI4l_7S4q-mvyO57ln5modPmoL18iKF4y5wRCQZkvS7ISoKmTz5hl1bIaS-IFGIy-5jbZ8vBEE2z1fJNb6wi-MMjG_zzCu8E0nh6QY8eKqXfTOh0_IfDccsM/s16000/1000030701.jpg"
    />

    <title>Series Printing & Summation in Python</title>

    <!-- Keep if you use it in Blogger -->
    <link
      href="https://varanasi-software-junction.github.io/blogger/blogger-assets/crx_styles_v1.css"
      rel="stylesheet"
    />

    <style>
      :root {
        --bg: #fff7e6;
        --card: #ffffff;
        --ink: #1f2937;
        --muted: #6b7280;

        --brand: #d97706;
        --brand2: #f59e0b;
        --border: #eadcc5;

        --soft: #fff1d6;
        --soft2: #fffaf2;

        --codebg: #fffbf2;
        --codeborder: #f1e2c6;

        --shadow: 0 14px 32px rgba(31, 41, 55, 0.08);
        --shadow2: 0 10px 22px rgba(31, 41, 55, 0.06);

        --success: #16a34a;
        --danger: #ef4444;
        --focus: rgba(217, 119, 6, 0.22);
      }

      html,
      body {
        background: var(--bg);
        color: var(--ink);
      }
      body {
        margin: 0;
        font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial,
          "Noto Sans", "Helvetica Neue", sans-serif;
        line-height: 1.65;
      }

      .post-body {
        max-width: 1080px;
        margin: 0 auto;
        padding: 18px 14px 46px;
      }

      h2,
      h3 {
        color: #1f2937;
        letter-spacing: 0.2px;
      }
      h2 {
        margin: 18px 0 10px;
      }
      h3 {
        margin: 10px 0 8px;
      }

      a {
        color: #b45309;
        text-decoration: none;
      }
      a:hover {
        text-decoration: underline;
      }

      .hero {
        background: linear-gradient(180deg, var(--card), var(--soft2));
        border: 1px solid var(--border);
        border-radius: 18px;
        padding: 16px 18px;
        box-shadow: var(--shadow2);
      }

      .hero .kicker {
        display: inline-flex;
        gap: 8px;
        align-items: center;
        background: linear-gradient(180deg, #fff3d7, #ffe7bf);
        border: 1px solid var(--codeborder);
        color: #7c2d12;
        padding: 6px 10px;
        border-radius: 999px;
        font-weight: 900;
        font-size: 12px;
      }

      .hero p {
        color: #374151;
        margin: 10px 0 0;
      }

      .top-note {
        margin-top: 14px;
        padding: 12px 14px;
        background: linear-gradient(180deg, var(--soft), var(--soft2));
        border-radius: 12px;
        border: 1px solid var(--border);
        color: #7c2d12;
        box-shadow: var(--shadow2);
      }

      /* Toolbar */
      .toolbar {
        margin-top: 16px;
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        align-items: center;
        justify-content: space-between;
      }
      .toolbar .left,
      .toolbar .right {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
        align-items: center;
      }
      .input {
        border: 1px solid var(--codeborder);
        background: #fffaf2;
        border-radius: 12px;
        padding: 10px 12px;
        font-weight: 800;
        outline: none;
        min-width: 220px;
      }
      .input:focus {
        box-shadow: 0 0 0 6px var(--focus);
        border-color: #f1c26d;
      }

      .chip {
        border: 1px solid var(--border);
        background: linear-gradient(180deg, var(--card), var(--soft2));
        padding: 8px 10px;
        border-radius: 999px;
        font-weight: 800;
        color: #7c2d12;
        font-size: 12px;
      }

      /* Cards */
      .grid {
        margin-top: 14px;
        display: grid;
        grid-template-columns: repeat(2, minmax(0, 1fr));
        gap: 14px;
      }
      @media (max-width: 860px) {
        .grid {
          grid-template-columns: 1fr;
        }
      }

      .series-card {
        border: 1px solid var(--border);
        background: linear-gradient(180deg, var(--card), var(--soft2));
        padding: 14px;
        border-radius: 16px;
        box-shadow: var(--shadow2);
      }

      .series-head {
        display: flex;
        align-items: flex-start;
        justify-content: space-between;
        gap: 12px;
      }

      .series-title {
        margin: 0;
        font-size: 18px;
        color: #7c2d12;
      }

      .small {
        font-size: 13px;
        color: var(--muted);
        font-weight: 700;
      }

      .meta-row {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        margin-top: 8px;
      }

      .formula {
        margin-top: 10px;
        border: 1px solid var(--codeborder);
        background: var(--codebg);
        border-radius: 14px;
        padding: 10px 12px;
        color: #111827;
        font-weight: 800;
      }

      .preview {
        margin-top: 10px;
        font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
          "Liberation Mono", "Courier New", monospace;
        white-space: pre;
        background: #fff3d7;
        border: 1px solid var(--codeborder);
        color: #7c2d12;
        padding: 10px 12px;
        border-radius: 14px;
        overflow: auto;
      }

      pre.series-code {
        margin-top: 10px;
        background: var(--codebg);
        padding: 12px;
        border-radius: 14px;
        overflow: auto;
        border: 1px solid var(--codeborder);
        position: relative;
      }
      pre.series-code code {
        font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
          "Liberation Mono", "Courier New", monospace;
        display: block;
        white-space: pre;
        color: #111827;
      }
      .copy-btn {
        position: absolute;
        top: 10px;
        right: 10px;
        background: linear-gradient(180deg, #fff3d7, #ffe7bf);
        color: #7c2d12;
        border: 1px solid var(--codeborder);
        padding: 7px 10px;
        cursor: pointer;
        font-size: 12px;
        font-weight: 900;
        border-radius: 12px;
      }

      .actions {
        margin-top: 10px;
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
        align-items: center;
      }
      .btn {
        border: 1px solid transparent;
        border-radius: 12px;
        padding: 10px 14px;
        cursor: pointer;
        font-weight: 900;
        transition: transform 0.06s ease, filter 0.15s ease,
          box-shadow 0.15s ease;
      }
      .btn:active {
        transform: translateY(1px);
      }
      .btn.primary {
        background: linear-gradient(180deg, var(--brand2), var(--brand));
        color: white;
        box-shadow: 0 10px 18px rgba(217, 119, 6, 0.18);
      }
      .btn.secondary {
        background: linear-gradient(180deg, #f3f4f6, #e5e7eb);
        color: #111827;
        border: 1px solid #e5e7eb;
        box-shadow: none;
        font-weight: 800;
      }

      /* Editor */
      #editor-area {
        border: 1px solid var(--border);
        border-radius: 18px;
        padding: 14px;
        background: linear-gradient(180deg, var(--card), var(--soft2));
        margin-top: 20px;
        box-shadow: var(--shadow);
      }

      #active-series {
        display: flex;
        justify-content: space-between;
        gap: 12px;
        flex-wrap: wrap;
        align-items: center;
        margin-bottom: 10px;
      }
      #active-series .title {
        font-weight: 1000;
        color: #7c2d12;
      }

      #param-panel {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
        margin: 10px 0 12px;
        align-items: flex-end;
      }

      .param {
        display: grid;
        gap: 6px;
        min-width: 180px;
      }
      .param label {
        font-size: 12px;
        color: var(--muted);
        font-weight: 900;
      }
      .param input {
        border: 1px solid var(--codeborder);
        background: #fffaf2;
        border-radius: 12px;
        padding: 10px 10px;
        font-weight: 900;
        color: #111827;
        outline: none;
      }
      .param input:focus {
        box-shadow: 0 0 0 6px var(--focus);
        border-color: #f1c26d;
      }

      #python-code {
        width: 100%;
        min-height: 260px;
        border: 1px solid var(--codeborder);
        background: var(--codebg);
        font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
          "Liberation Mono", "Courier New", monospace;
        padding: 12px;
        border-radius: 14px;
        resize: vertical;
        box-sizing: border-box;
        color: #111827;
        outline: none;
      }
      #python-code:focus {
        box-shadow: 0 0 0 6px var(--focus);
        border-color: #f1c26d;
      }

      #controls {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
        align-items: center;
        margin-top: 10px;
      }
      #run-btn {
        background: linear-gradient(180deg, #22c55e, var(--success));
        color: white;
        border: 0;
        box-shadow: 0 10px 18px rgba(22, 163, 74, 0.16);
      }
      #stop-btn {
        background: linear-gradient(180deg, #f87171, var(--danger));
        color: #fff;
        border: 0;
        border-radius: 12px;
        padding: 10px 14px;
        cursor: not-allowed;
        opacity: 0.65;
      }
      #copy-out {
        background: linear-gradient(180deg, var(--brand2), var(--brand));
        color: #fff;
        border: 0;
        box-shadow: 0 10px 18px rgba(217, 119, 6, 0.18);
      }

      #output {
        background: #1f1b16;
        color: #b7ffcf;
        padding: 12px;
        border-radius: 14px;
        height: 260px;
        overflow: auto;
        font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
          "Liberation Mono", "Courier New", monospace;
        margin-top: 10px;
        white-space: pre-wrap;
        line-height: 1.5;
        border: 1px solid rgba(241, 226, 198, 0.55);
        box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.03);
      }

      #loader {
        margin-top: 14px;
        padding: 12px 14px;
        border-radius: 12px;
        background: linear-gradient(180deg, var(--soft), var(--soft2));
        border: 1px solid var(--border);
        color: #7c2d12;
        box-shadow: var(--shadow2);
      }
    </style>
  </head>

  <body>
    <div class="post-body">
      <div class="hero">
        <span class="kicker">üêç Python ‚Ä¢ Series ‚Ä¢ Summation ‚Ä¢ Pyodide</span>
        <h2 style="margin: 10px 0 6px">
          Series Printing & Summation in Python
        </h2>
        <p>
          Learn series the fun way: pick a series, set parameters, print terms,
          and compute the sum instantly in your browser using a live Python
          runtime.
          <b>Powered by JSON</b> + <b>Pyodide</b>.
        </p>

        <div class="top-note">
          Tip: Use the search box to filter series. Click
          <b>Load to Editor</b> to bring code and parameters into the live
          editor.
        </div>

        <div class="toolbar">
          <div class="left">
            <input
              id="search"
              class="input"
              placeholder="Search series (AP, GP, Fibonacci, squares‚Ä¶)"
            />
            <span class="chip" id="countChip">0 series</span>
          </div>
          <div class="right">
            <span class="small"
              >Series gallery ‚Ä¢ Learn With Champak ‚Ä¢ Champak Roy</span
            >
          </div>
        </div>
      </div>

      <!-- Series Gallery -->
      <div id="loader">‚è≥ Loading series‚Ä¶</div>
      <div id="seriesGrid" class="grid" hidden></div>

      <!-- Live Editor -->
      <div id="editor-area" aria-live="polite">
        <div id="active-series">
          <div class="title" id="activeTitle">
            üíª Live Python Editor (Pyodide)
          </div>
          <div class="small" id="activeHint">
            Load a series to auto-fill parameters + code.
          </div>
        </div>

        <div id="param-panel"></div>

        <textarea id="python-code" aria-label="Python code">
print("Hello from Champak Roy!")</textarea
        >

        <div id="controls">
          <button id="run-btn" class="btn" type="button">‚ñ∂ Run Code</button>
          <button id="stop-btn" class="btn" type="button" disabled>
            ‚èπ Running‚Ä¶
          </button>
          <button id="copy-out" class="btn" type="button" title="Copy output">
            Copy output
          </button>
          <span class="small" id="status"></span>
        </div>

        <div id="output" aria-label="Program output">
          Loading Python runtime‚Ä¶
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/pyodide/v0.25.1/full/pyodide.js"></script>
    <script>
      // ====== CONFIG ======
      // Replace this with your hosted URL if needed:
      // const JSON_URL = "https://your-site.github.io/path/series.json";
      const JSON_URL =
        "https://programmer-s-picnic.github.io/json-images/series.json";

      // ====== ELEMENTS ======
      const loader = document.getElementById("loader");
      const grid = document.getElementById("seriesGrid");
      const searchEl = document.getElementById("search");
      const countChip = document.getElementById("countChip");

      const paramPanel = document.getElementById("param-panel");
      const codeArea = document.getElementById("python-code");
      const activeTitle = document.getElementById("activeTitle");
      const activeHint = document.getElementById("activeHint");

      const outputDiv = document.getElementById("output");
      const runBtn = document.getElementById("run-btn");
      const stopBtn = document.getElementById("stop-btn");
      const statusEl = document.getElementById("status");
      const copyOutBtn = document.getElementById("copy-out");

      let SERIES = [];
      let ACTIVE = null;

      // ====== SAFE HELPERS ======
      function safeId(x) {
        return String(x ?? "")
          .trim()
          .replace(/[^a-zA-Z0-9_-]/g, "_");
      }
      function setStatus(msg, err = false) {
        statusEl.textContent = msg;
        statusEl.style.color = err ? "#b91c1c" : "var(--muted)";
      }

      // ====== LOAD SERIES JSON ======
      async function loadSeries() {
        try {
          const res = await fetch(JSON_URL, { cache: "no-store" });
          if (!res.ok) throw new Error("HTTP " + res.status);
          const data = await res.json();
          SERIES = Array.isArray(data) ? data : [];
          renderSeries(SERIES);
          loader.hidden = true;
          grid.hidden = false;
          countChip.textContent = `${SERIES.length} series`;
        } catch (e) {
          loader.textContent =
            "‚ùå Failed to load series.json. Check URL/CORS or file path.";
        }
      }

      function renderSeries(list) {
        grid.innerHTML = "";
        list.forEach((s, idx) => {
          const card = document.createElement("div");
          card.className = "series-card";

          const head = document.createElement("div");
          head.className = "series-head";

          const titleWrap = document.createElement("div");

          const h3 = document.createElement("h3");
          h3.className = "series-title";
          h3.textContent = `${String(idx + 1).padStart(2, "0")} ‚Äî ${
            s.title || "Untitled Series"
          }`;

          const desc = document.createElement("div");
          desc.className = "small";
          desc.textContent = s.description || "";

          titleWrap.appendChild(h3);
          titleWrap.appendChild(desc);

          const cat = document.createElement("span");
          cat.className = "chip";
          cat.textContent = s.category || "Series";

          head.appendChild(titleWrap);
          head.appendChild(cat);

          card.appendChild(head);

          // formula
          if (s.formula) {
            const f = document.createElement("div");
            f.className = "formula";
            f.textContent = s.formula;
            card.appendChild(f);
          }

          // preview
          if (s.preview_terms) {
            const p = document.createElement("div");
            p.className = "preview";
            p.textContent = `Preview: ${s.preview_terms}`;
            card.appendChild(p);
          }

          // code block
          const pre = document.createElement("pre");
          pre.className = "series-code";

          const copyBtn = document.createElement("button");
          copyBtn.className = "copy-btn";
          copyBtn.type = "button";
          copyBtn.textContent = "Copy";
          copyBtn.addEventListener("click", async () => {
            try {
              await navigator.clipboard.writeText(String(s.code || "").trim());
              const old = copyBtn.textContent;
              copyBtn.textContent = "Copied!";
              setTimeout(() => (copyBtn.textContent = old), 900);
            } catch {
              alert("Copy failed.");
            }
          });

          const code = document.createElement("code");
          const cid = `series-code-${safeId(s.id || idx)}`;
          code.id = cid;
          code.textContent = s.code || "";

          pre.appendChild(copyBtn);
          pre.appendChild(code);
          card.appendChild(pre);

          // actions
          const actions = document.createElement("div");
          actions.className = "actions";

          const loadBtn = document.createElement("button");
          loadBtn.className = "btn primary";
          loadBtn.type = "button";
          loadBtn.textContent = "‚¨á Load to Editor";
          loadBtn.addEventListener("click", () => loadToEditor(s));

          const runNow = document.createElement("button");
          runNow.className = "btn secondary";
          runNow.type = "button";
          runNow.textContent = "‚ñ∂ Load + Run";
          runNow.addEventListener("click", async () => {
            loadToEditor(s);
            await runCode();
          });

          const info = document.createElement("span");
          info.className = "small";
          info.textContent = "Edit parameters above the editor, then run.";

          actions.appendChild(loadBtn);
          actions.appendChild(runNow);
          actions.appendChild(info);

          card.appendChild(actions);

          grid.appendChild(card);
        });
      }

      // ====== SEARCH ======
      searchEl.addEventListener("input", () => {
        const q = searchEl.value.trim().toLowerCase();
        const filtered = SERIES.filter((s) => {
          const blob = `${s.title || ""} ${s.category || ""} ${
            s.description || ""
          } ${s.formula || ""}`.toLowerCase();
          return blob.includes(q);
        });
        renderSeries(filtered);
        countChip.textContent = `${filtered.length} series`;
      });

      // ====== PARAM PANEL BUILDER ======
      function buildParamPanel(series) {
        paramPanel.innerHTML = "";
        const params = Array.isArray(series.params) ? series.params : [];

        if (params.length === 0) {
          const note = document.createElement("div");
          note.className = "small";
          note.textContent = "No parameters for this series.";
          paramPanel.appendChild(note);
          return;
        }

        params.forEach((p) => {
          const wrap = document.createElement("div");
          wrap.className = "param";

          const label = document.createElement("label");
          label.textContent = p.label || p.name;

          const input = document.createElement("input");
          input.type = p.type === "float" ? "number" : "number";
          input.step = p.step ?? (p.type === "float" ? "0.1" : "1");
          if (typeof p.min === "number") input.min = String(p.min);
          if (typeof p.max === "number") input.max = String(p.max);

          // default value
          const dv =
            series.defaults && series.defaults[p.name] != null
              ? series.defaults[p.name]
              : p.default != null
              ? p.default
              : "";
          input.value = String(dv);

          input.id = `param-${safeId(p.name)}`;
          input.dataset.paramName = p.name;
          input.dataset.paramType = p.type || "int";

          wrap.appendChild(label);
          wrap.appendChild(input);
          paramPanel.appendChild(wrap);
        });
      }

      function getParamValues() {
        const inputs = Array.from(
          paramPanel.querySelectorAll("input[data-param-name]")
        );
        const out = {};
        inputs.forEach((inp) => {
          const name = inp.dataset.paramName;
          const type = inp.dataset.paramType || "int";
          const raw = inp.value;

          let val;
          if (type === "float") val = Number(raw);
          else val = parseInt(raw || "0", 10);

          if (Number.isNaN(val)) val = 0;
          out[name] = val;
        });
        return out;
      }

      // ====== LOAD SERIES INTO EDITOR ======
      function loadToEditor(series) {
        ACTIVE = series;
        activeTitle.textContent = `üíª Live Python Editor ‚Äî ${
          series.title || "Series"
        }`;
        activeHint.textContent = series.formula
          ? series.formula
          : "Edit parameters and code, then run.";

        buildParamPanel(series);
        codeArea.value = (series.code || "").trim() || 'print("No code found")';

        document
          .getElementById("editor-area")
          .scrollIntoView({ behavior: "smooth" });
      }

      // ====== PYODIDE ======
      let pyodide = null;
      let running = false;

      async function initPyodide() {
        setStatus("‚è≥ Loading Python (Pyodide)‚Ä¶");
        outputDiv.innerText = "‚è≥ Loading Python (Pyodide)‚Ä¶";
        runBtn.disabled = true;
        try {
          pyodide = await loadPyodide({
            indexURL: "https://cdn.jsdelivr.net/pyodide/v0.25.1/full/",
          });

          // attach stdout/stderr once
         pyodide.setStdout({
  batched: (t) => {
    // Normalize Windows / mixed newlines
    t = t.replace(/\r\n/g, "\n");

    // If the chunk does not end with newline, add one
    if (!t.endsWith("\n")) {
      t += "\n";
    }

    outputDiv.textContent += t;
    outputDiv.scrollTop = outputDiv.scrollHeight;
  },
});

       pyodide.setStderr({
  batched: (t) => {
    t = t.replace(/\r\n/g, "\n");
    if (!t.endsWith("\n")) {
      t += "\n";
    }
    outputDiv.textContent += "‚ùå " + t;
    outputDiv.scrollTop = outputDiv.scrollHeight;
  },
});


          outputDiv.innerText =
            "‚úÖ IDE ready! Load a series or write your own code, then Run.";
          setStatus("Ready.");
          runBtn.disabled = false;
        } catch {
          setStatus("Failed to load Pyodide.", true);
          outputDiv.innerText =
            "‚ùå Failed to load Pyodide. Check your connection.";
        }
      }
      initPyodide();

      async function runCode() {
        if (!pyodide) {
          outputDiv.innerText = "Please wait‚Ä¶ Pyodide still loading.";
          return;
        }
        if (running) return;

        running = true;
        runBtn.disabled = true;
        stopBtn.disabled = false;
        outputDiv.innerText = "";
        setStatus("Running‚Ä¶");

        const userCode = codeArea.value || "";
        const params = getParamValues();

        // inject params as python variables at top
        const injectLines = Object.entries(params)
          .map(([k, v]) => `${k} = ${Number.isFinite(v) ? v : 0}`)
          .join("\n");

        const injected = `${injectLines}\n\n${userCode}\n`;

        try {
          await pyodide.runPythonAsync(injected);
          setStatus("Done.");
        } catch (e) {
          outputDiv.innerText += "‚ùå " + e + "\n";
          setStatus("Error", true);
        } finally {
          running = false;
          runBtn.disabled = false;
          stopBtn.disabled = true;
        }
      }

      runBtn.addEventListener("click", runCode);
      stopBtn.addEventListener("click", () =>
        setStatus("Cannot stop mid-run in this version.", true)
      );

      copyOutBtn.addEventListener("click", async () => {
        try {
          await navigator.clipboard.writeText(outputDiv.innerText);
          copyOutBtn.textContent = "Copied!";
          setTimeout(() => (copyOutBtn.textContent = "Copy output"), 900);
        } catch {
          alert("Copy failed.");
        }
      });

      // ====== START ======
      loadSeries();
    </script>

    <!-- Keep your extra scripts if needed -->
    <script src="https://programmer-s-picnic.github.io/json-images/find-on-page.js"></script>
    <script src="https://programmer-s-picnic.github.io/json-images/imgshow.js"></script>
    <script src="https://programmer-s-picnic.github.io/json-images/hometag.js"></script>
  </body>
</html>
