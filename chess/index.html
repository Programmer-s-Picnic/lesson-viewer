function handleClick(r,c){

  // CASE 1: No piece selected yet → select white piece
  if(selected === null){
    const p = boardState[r][c];
    if(p >= "A" && p <= "Z"){   // white piece only
      selected = { r, c };
      validMoves = getValidMoves(p, r, c);
      lessonEl.textContent = "Green squares pe move kar sakte ho.";
    }
    drawBoard();
    return;
  }

  // CASE 2: Piece selected → try to move
  if(validMoves.some(m => m.r === r && m.c === c)){
    boardState[r][c] = boardState[selected.r][selected.c];
    boardState[selected.r][selected.c] = ".";
    selected = null;
    validMoves = [];
    lessonEl.textContent = "Good move! Computer soch raha hai…";
    drawBoard();
    setTimeout(computerMove, 500);
    return;
  }

  // CASE 3: Click elsewhere → cancel selection
  selected = null;
  validMoves = [];
  lessonEl.textContent = "Selection cancel ho gaya.";
  drawBoard();
}