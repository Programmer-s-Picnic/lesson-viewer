<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Learn JavaScript — Master Index (with Embedded Editor)</title>
    <meta
      name="description"
      content="A comprehensive JavaScript learning index page with roadmap, practice sets, quizzes, mini-projects, progress tracking, and an embedded Programmer’s Picnic JavaScript editor."
    />

    <style>
      :root {
        --bg: #fff7e6; /* light saffron */
        --card: #ffffff;
        --ink: #1f2937;
        --muted: #6b7280;
        --brand: #d97706;
        --brand2: #f59e0b;
        --border: #eadcc5;
        --shadow: 0 18px 40px rgba(31, 41, 55, 0.14);
        --codebg: #0b1220;
        --codeink: #e5e7eb;
        --ok: #0f766e;
        --warn: #b45309;
        --bad: #b91c1c;
        --r: 18px;
        --mono:
          ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
          "Liberation Mono", "Courier New", monospace;
        --sans:
          ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica,
          Arial, "Apple Color Emoji", "Segoe UI Emoji";
      }
      * {
        box-sizing: border-box;
      }
      html,
      body {
        height: 100%;
      }
      body {
        margin: 0;
        font-family: var(--sans);
        color: var(--ink);
        background:
          radial-gradient(
            900px 500px at 12% 6%,
            rgba(245, 158, 11, 0.22),
            transparent 55%
          ),
          radial-gradient(
            700px 480px at 92% 10%,
            rgba(217, 119, 6, 0.16),
            transparent 55%
          ),
          radial-gradient(
            900px 520px at 50% 110%,
            rgba(245, 158, 11, 0.18),
            transparent 60%
          ),
          var(--bg);
      }
      a {
        color: inherit;
      }
      .topbar {
        position: sticky;
        top: 0;
        z-index: 20;
        background: rgba(255, 247, 230, 0.85);
        backdrop-filter: blur(10px);
        border-bottom: 1px solid var(--border);
      }
      .topbar-inner {
        max-width: 1200px;
        margin: 0 auto;
        padding: 12px 16px;
        display: flex;
        gap: 12px;
        align-items: center;
        justify-content: space-between;
      }
      .brand {
        display: flex;
        gap: 10px;
        align-items: center;
        min-width: 240px;
      }
      .logo {
        width: 38px;
        height: 38px;
        border-radius: 12px;
        background: linear-gradient(135deg, var(--brand), var(--brand2));
        box-shadow: 0 12px 30px rgba(217, 119, 6, 0.25);
        position: relative;
      }
      .logo:after {
        content: "JS";
        position: absolute;
        inset: 0;
        display: grid;
        place-items: center;
        color: #fff;
        font-weight: 900;
        letter-spacing: 0.6px;
      }
      .brand h1 {
        margin: 0;
        font-size: 15px;
        line-height: 1.15;
      }
      .brand .sub {
        font-size: 12px;
        color: var(--muted);
        margin-top: 2px;
      }
      .top-actions {
        display: flex;
        gap: 10px;
        align-items: center;
        flex-wrap: wrap;
        justify-content: flex-end;
      }
      .pill {
        display: inline-flex;
        gap: 8px;
        align-items: center;
        padding: 9px 12px;
        border-radius: 999px;
        border: 1px solid var(--border);
        background: #fff;
        box-shadow: 0 10px 22px rgba(31, 41, 55, 0.06);
        font-size: 13px;
        color: var(--muted);
      }
      .btn {
        appearance: none;
        border: 1px solid var(--border);
        background: #fff;
        padding: 10px 12px;
        border-radius: 12px;
        cursor: pointer;
        box-shadow: 0 12px 26px rgba(31, 41, 55, 0.08);
        font-weight: 700;
        transition:
          transform 0.08s ease,
          box-shadow 0.2s ease,
          border-color 0.2s ease;
      }
      .btn:hover {
        transform: translateY(-1px);
        border-color: #e7cfae;
      }
      .btn:active {
        transform: translateY(0);
      }
      .btn.primary {
        border-color: rgba(217, 119, 6, 0.35);
        background: linear-gradient(
          135deg,
          rgba(217, 119, 6, 0.12),
          rgba(245, 158, 11, 0.12)
        );
      }

      .wrap {
        max-width: 1200px;
        margin: 0 auto;
        padding: 16px;
        display: grid;
        grid-template-columns: 340px 1fr;
        gap: 16px;
      }
      @media (max-width: 980px) {
        .wrap {
          grid-template-columns: 1fr;
        }
        .brand {
          min-width: auto;
        }
      }

      .card {
        background: var(--card);
        border: 1px solid var(--border);
        border-radius: var(--r);
        box-shadow: var(--shadow);
        overflow: hidden;
      }
      .card .hd {
        padding: 14px 14px 10px;
        border-bottom: 1px solid var(--border);
        background: linear-gradient(
          180deg,
          rgba(245, 158, 11, 0.1),
          transparent
        );
      }
      .card .hd h2 {
        margin: 0;
        font-size: 14px;
        letter-spacing: 0.2px;
      }
      .card .hd p {
        margin: 6px 0 0;
        font-size: 12.5px;
        color: var(--muted);
        line-height: 1.45;
      }
      .card .bd {
        padding: 14px;
      }

      .kpis {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 10px;
      }
      .kpi {
        border: 1px solid var(--border);
        border-radius: 14px;
        padding: 10px;
        background: linear-gradient(
          180deg,
          rgba(255, 255, 255, 0.9),
          rgba(255, 255, 255, 0.7)
        );
      }
      .kpi .n {
        font-weight: 900;
        font-size: 16px;
      }
      .kpi .t {
        margin-top: 4px;
        font-size: 12px;
        color: var(--muted);
      }

      .search {
        display: flex;
        gap: 10px;
        align-items: center;
      }
      .search input,
      .search select {
        width: 100%;
        padding: 10px 12px;
        border: 1px solid var(--border);
        border-radius: 12px;
        outline: none;
        background: #fff;
        box-shadow: 0 10px 22px rgba(31, 41, 55, 0.05);
        font-size: 13px;
      }

      .chips {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        margin-top: 10px;
      }
      .chip {
        padding: 7px 10px;
        border-radius: 999px;
        border: 1px solid var(--border);
        background: #fff;
        font-size: 12px;
        color: var(--muted);
        cursor: pointer;
        user-select: none;
      }
      .chip.on {
        border-color: rgba(217, 119, 6, 0.45);
        background: linear-gradient(
          135deg,
          rgba(217, 119, 6, 0.12),
          rgba(245, 158, 11, 0.12)
        );
        color: var(--ink);
        font-weight: 800;
      }

      .list {
        display: grid;
        gap: 10px;
      }
      .lesson {
        border: 1px solid var(--border);
        border-radius: 16px;
        overflow: hidden;
        background: #fff;
      }
      .lesson .row {
        display: flex;
        gap: 12px;
        align-items: flex-start;
        padding: 12px;
      }
      .badge {
        font-size: 11px;
        border: 1px solid var(--border);
        border-radius: 999px;
        padding: 5px 8px;
        background: rgba(255, 247, 230, 0.6);
        color: var(--muted);
        white-space: nowrap;
      }
      .badge.l1 {
        background: rgba(16, 185, 129, 0.1);
        color: #065f46;
        border-color: rgba(16, 185, 129, 0.25);
      }
      .badge.l2 {
        background: rgba(245, 158, 11, 0.14);
        color: #7c2d12;
        border-color: rgba(245, 158, 11, 0.35);
      }
      .badge.l3 {
        background: rgba(239, 68, 68, 0.1);
        color: #7f1d1d;
        border-color: rgba(239, 68, 68, 0.25);
      }
      .lesson h3 {
        margin: 0;
        font-size: 13.5px;
      }
      .lesson p {
        margin: 6px 0 0;
        font-size: 12.5px;
        color: var(--muted);
        line-height: 1.45;
      }
      .lesson .meta {
        margin-top: 8px;
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
        align-items: center;
      }
      .tag {
        font-size: 11px;
        color: var(--muted);
        border: 1px dashed rgba(234, 220, 197, 0.9);
        padding: 4px 8px;
        border-radius: 999px;
        background: rgba(255, 247, 230, 0.35);
      }
      .lesson .actions {
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
        padding: 0 12px 12px;
      }
      .mini {
        font-size: 12px;
        padding: 8px 10px;
        border-radius: 12px;
        border: 1px solid var(--border);
        background: #fff;
        cursor: pointer;
        font-weight: 800;
      }
      .mini.good {
        border-color: rgba(15, 118, 110, 0.35);
        background: rgba(15, 118, 110, 0.08);
        color: #064e3b;
      }
      .mini.warn {
        border-color: rgba(180, 83, 9, 0.35);
        background: rgba(180, 83, 9, 0.08);
        color: #7c2d12;
      }
      .mini.ghost {
        background: rgba(255, 247, 230, 0.45);
      }

      .code {
        background: var(--codebg);
        color: var(--codeink);
        border-radius: 14px;
        padding: 12px;
        font-family: var(--mono);
        font-size: 12.2px;
        line-height: 1.5;
        border: 1px solid rgba(234, 220, 197, 0.22);
        overflow: auto;
        position: relative;
      }
      .copy {
        position: absolute;
        top: 10px;
        right: 10px;
        padding: 7px 9px;
        border-radius: 10px;
        border: 1px solid rgba(255, 255, 255, 0.22);
        background: rgba(255, 255, 255, 0.08);
        color: #fff;
        cursor: pointer;
        font-size: 12px;
        font-weight: 800;
      }

      .iframeWrap {
        height: 62vh;
        min-height: 520px;
        border: 1px solid var(--border);
        border-radius: 18px;
        overflow: hidden;
        box-shadow: 0 16px 34px rgba(31, 41, 55, 0.1);
        background: #fff;
      }
      iframe {
        width: 100%;
        height: 100%;
        border: 0;
        background: #fff;
      }

      details {
        border: 1px solid var(--border);
        border-radius: 16px;
        padding: 10px 12px;
        background: rgba(255, 255, 255, 0.7);
        margin-top: 10px;
      }
      details > summary {
        cursor: pointer;
        font-weight: 900;
        font-size: 13px;
        list-style: none;
      }
      details > summary::-webkit-details-marker {
        display: none;
      }
      .muted {
        color: var(--muted);
        font-size: 12.5px;
        line-height: 1.5;
      }
      .hr {
        height: 1px;
        background: var(--border);
        margin: 12px 0;
      }
      .grid2 {
        display: grid;
        gap: 10px;
        grid-template-columns: 1fr 1fr;
      }
      @media (max-width: 980px) {
        .grid2 {
          grid-template-columns: 1fr;
        }
        .iframeWrap {
          height: 60vh;
          min-height: 520px;
        }
      }

      .toast {
        position: fixed;
        right: 14px;
        bottom: 14px;
        background: #111827;
        color: #fff;
        padding: 10px 12px;
        border-radius: 12px;
        font-weight: 800;
        box-shadow: 0 20px 45px rgba(0, 0, 0, 0.25);
        opacity: 0;
        transform: translateY(10px);
        pointer-events: none;
        transition:
          opacity 0.18s ease,
          transform 0.18s ease;
        z-index: 99;
        font-size: 13px;
      }
      .toast.on {
        opacity: 1;
        transform: translateY(0);
      }
    </style>
  </head>

  <body>
    <div class="topbar">
      <div class="topbar-inner">
        <div class="brand">
          <div class="logo" aria-hidden="true"></div>
          <div>
            <h1>Learn JavaScript — Master Index</h1>
            <div class="sub">
              Roadmap • Practice • Quizzes • Mini-projects • Embedded Editor
            </div>
          </div>
        </div>

        <div class="top-actions">
          <div class="pill" id="progressPill">
            Progress: <b id="doneCount">0</b>/<span id="totalCount">0</span>
          </div>
          <button
            class="btn primary"
            id="openEditorBtn"
            title="Open editor in a new tab"
          >
            Open Editor ↗
          </button>
          <button
            class="btn"
            id="resetProgressBtn"
            title="Clear your progress (local only)"
          >
            Reset Progress
          </button>
        </div>
      </div>
    </div>

    <div class="wrap">
      <!-- LEFT: Roadmap / Practice -->
      <aside class="col-left">
        <section class="card">
          <div class="hd">
            <h2>How to use this page</h2>
            <p>
              Pick a topic → copy a starter snippet → paste into the embedded
              editor → run → mark done.
            </p>
          </div>
          <div class="bd">
            <div class="kpis">
              <div class="kpi">
                <div class="n" id="kpiTopics">—</div>
                <div class="t">topics in roadmap</div>
              </div>
              <div class="kpi">
                <div class="n" id="kpiBeginner">—</div>
                <div class="t">beginner lessons</div>
              </div>
              <div class="kpi">
                <div class="n" id="kpiProjects">—</div>
                <div class="t">mini projects</div>
              </div>
            </div>

            <div class="hr"></div>

            <div class="search">
              <input
                id="q"
                placeholder="Search topics (e.g., arrays, DOM, async, fetch)..."
              />
            </div>

            <div class="search" style="margin-top: 10px">
              <select id="level">
                <option value="all">All levels</option>
                <option value="L1">Beginner (L1)</option>
                <option value="L2">Intermediate (L2)</option>
                <option value="L3">Advanced (L3)</option>
                <option value="Project">Projects</option>
              </select>
            </div>

            <div class="chips" id="chips"></div>

            <details open>
              <summary>Editor quick guide (very important)</summary>
              <div class="muted" style="margin-top: 8px">
                <ul style="margin: 8px 0 0; padding-left: 18px">
                  <li>
                    <b>Run:</b> use the editor’s Run button or
                    <b>Ctrl + Enter</b> (as shown inside the editor).
                  </li>
                  <li>
                    <b>Stop:</b> stops long-running code (infinite loops etc.).
                  </li>
                  <li>
                    <b>Problem Mode tip:</b> many platforms expect
                    <code>function solve(input){...}</code> and you return the
                    final value.
                  </li>
                  <li>
                    <b>Console:</b> use <code>console.log()</code> to debug.
                  </li>
                </ul>
              </div>
            </details>

            <details>
              <summary>Core “must-know” JS checklist</summary>
              <div class="muted" style="margin-top: 8px">
                <ul style="margin: 8px 0 0; padding-left: 18px">
                  <li>
                    Variables: <b>let</b>, <b>const</b> (avoid <b>var</b> unless
                    you know why)
                  </li>
                  <li>Types + coercion, truthy/falsy</li>
                  <li>Functions + scope + closures</li>
                  <li>Arrays/Objects + destructuring</li>
                  <li>DOM + events</li>
                  <li>Async JS: promises, <code>async/await</code>, fetch</li>
                  <li>Error handling: <code>try/catch</code></li>
                  <li>Modules: <code>import/export</code> (basics)</li>
                </ul>
              </div>
            </details>

            <details>
              <summary>Daily plan (14 days)</summary>
              <div class="muted" style="margin-top: 8px">
                <div class="grid2">
                  <div>
                    <b>Days 1–4:</b>
                    <ul style="margin: 6px 0 0; padding-left: 18px">
                      <li>Variables + operators</li>
                      <li>Conditions + loops</li>
                      <li>Functions + scope</li>
                      <li>Arrays + objects</li>
                    </ul>
                  </div>
                  <div>
                    <b>Days 5–8:</b>
                    <ul style="margin: 6px 0 0; padding-left: 18px">
                      <li>Strings + math + dates</li>
                      <li>DOM basics</li>
                      <li>Events</li>
                      <li>Mini-project 1</li>
                    </ul>
                  </div>
                  <div>
                    <b>Days 9–12:</b>
                    <ul style="margin: 6px 0 0; padding-left: 18px">
                      <li>Async + promises</li>
                      <li>Fetch + APIs</li>
                      <li>LocalStorage</li>
                      <li>Mini-project 2</li>
                    </ul>
                  </div>
                  <div>
                    <b>Days 13–14:</b>
                    <ul style="margin: 6px 0 0; padding-left: 18px">
                      <li>Testing mindset</li>
                      <li>Capstone: build + share</li>
                    </ul>
                  </div>
                </div>
              </div>
            </details>
          </div>
        </section>

        <section class="card" style="margin-top: 16px">
          <div class="hd">
            <h2>Practice Library</h2>
            <p>Copy snippets → paste into the editor → run → mark done.</p>
          </div>
          <div class="bd">
            <div class="list" id="lessonList"></div>
          </div>
        </section>
      </aside>

      <!-- RIGHT: Embedded editor + Quizzes -->
      <main class="col-right">
        <section class="card">
          <div class="hd">
            <h2>Embedded JavaScript Editor</h2>
            <p>
              Paste code here and run. If the iframe ever blocks, use “Open
              Editor ↗”.
            </p>
          </div>
          <div class="bd">
            <div
              class="iframeWrap"
              role="region"
              aria-label="Embedded JavaScript editor"
            >
              <iframe
                id="editorFrame"
                src="https://programmer-s-picnic.github.io/lesson-viewer/java-script/editor/"
                loading="lazy"
                referrerpolicy="no-referrer"
                allow="clipboard-read; clipboard-write"
              ></iframe>
            </div>

            <div class="hr"></div>

            <div class="grid2">
              <div>
                <div class="code">
                  <button class="copy" data-copy="#starterSolve">Copy</button>
                  <div id="starterSolve">
                    // Competitive-style starter function solve(input){ input =
                    input.trim(); // TODO: parse input and compute return input;
                    // replace } // Example runner (optional) const fs = (typeof
                    require !== "undefined") ? require("fs") : null; const input
                    = fs ? fs.readFileSync(0, "utf8") : ""; if (input)
                    console.log(String(solve(input)));
                  </div>
                </div>
                <div class="muted" style="margin-top: 8px">
                  Use this template when you’re solving input/output style
                  problems (Problem Mode).
                </div>
              </div>

              <div>
                <div class="code">
                  <button class="copy" data-copy="#starterDom">Copy</button>
                  <div id="starterDom">
                    // DOM starter (use this in a normal web page) // Example:
                    button click counter document.body.innerHTML = `
                    <div style="font-family: system-ui; padding: 16px">
                      <h2>Click Counter</h2>
                      <button id="btn">Click me</button>
                      <p id="out">0</p>
                    </div>
                    `; let c = 0;
                    document.querySelector("#btn").addEventListener("click", ()
                    => { c++; document.querySelector("#out").textContent = c;
                    });
                  </div>
                </div>
                <div class="muted" style="margin-top: 8px">
                  Use this to practice events and DOM manipulation quickly.
                </div>
              </div>
            </div>

            <details style="margin-top: 12px" open>
              <summary>Mini Quizzes (self-check)</summary>
              <div class="muted" style="margin-top: 8px">
                <div id="quizBox"></div>
              </div>
            </details>

            <details>
              <summary>Mini Projects (build + show)</summary>
              <div class="muted" style="margin-top: 8px">
                <ul style="margin: 8px 0 0; padding-left: 18px">
                  <li>
                    <b>Project 1:</b> To-do app (add/delete/complete, store in
                    localStorage)
                  </li>
                  <li>
                    <b>Project 2:</b> Weather dashboard (fetch API, render
                    cards, loading/error states)
                  </li>
                  <li>
                    <b>Project 3:</b> Quiz app (MCQ + timer + score + review
                    answers)
                  </li>
                  <li>
                    <b>Project 4:</b> Expense tracker (income/expense, totals,
                    charts later)
                  </li>
                  <li>
                    <b>Project 5:</b> DOM game (Whack-a-mole / memory game /
                    typing speed test)
                  </li>
                </ul>
                <div class="hr"></div>
                <b>Rule:</b> Every project must have:
                <ul style="margin: 6px 0 0; padding-left: 18px">
                  <li>Clean UI + responsive layout</li>
                  <li>Data saved (localStorage) OR fetched from API</li>
                  <li>Shareable output (screenshot + hosted link)</li>
                </ul>
              </div>
            </details>

            <details>
              <summary>Best practice habits</summary>
              <div class="muted" style="margin-top: 8px">
                <ul style="margin: 8px 0 0; padding-left: 18px">
                  <li>Always write small tests: “input → expected output”.</li>
                  <li>
                    Prefer <code>const</code>, use <code>let</code> when
                    reassignment is needed.
                  </li>
                  <li>
                    Use <code>===</code> instead of <code>==</code> (avoid
                    coercion surprises).
                  </li>
                  <li>
                    Learn array methods: <code>map</code>, <code>filter</code>,
                    <code>reduce</code>.
                  </li>
                  <li>
                    For async: always handle errors (<code>try/catch</code> or
                    <code>.catch</code>).
                  </li>
                </ul>
              </div>
            </details>
          </div>
        </section>
      </main>
    </div>

    <div class="toast" id="toast">Copied!</div>

    <script>
      // -------- Data (edit freely) --------
      const LESSONS = [
        {
          id: "l1-vars",
          level: "L1",
          title: "Variables: let / const + basic types",
          tags: ["basics", "types"],
          desc: "Numbers, strings, booleans, null/undefined, typeof, template strings.",
          code: `// Variables + types
const name = "Champak";
let age = 56;

console.log("Name:", name);
console.log("Age:", age);

const price = 99.5;
const ok = true;
const nothing = null;
let notSet;

console.log(typeof price, typeof ok, typeof nothing, typeof notSet);
console.log(\`Hello \${name}, next year you will be \${age + 1}\`);`,
        },
        {
          id: "l1-ops",
          level: "L1",
          title: "Operators + truthy/falsy",
          tags: ["basics", "logic"],
          desc: "Arithmetic, comparison, logical operators, truthy/falsy behavior.",
          code: `// Operators + truthy/falsy
console.log(10 + 3, 10 - 3, 10 * 3, 10 / 3, 10 % 3);
console.log(5 === "5", 5 == "5"); // compare carefully

const values = [0, 1, "", "x", null, undefined, [], {}, NaN];
for(const v of values){
  console.log(v, "=>", v ? "truthy" : "falsy");
}`,
        },
        {
          id: "l1-cond",
          level: "L1",
          title: "Conditions: if/else + ternary",
          tags: ["basics"],
          desc: "Bcityng, guarding, readable conditions.",
          code: `// Conditions
function grade(marks){
  if(marks >= 90) return "A";
  else if(marks >= 75) return "B";
  else if(marks >= 60) return "C";
  return "D";
}

console.log(grade(95), grade(77), grade(61), grade(12));

const n = 7;
console.log(n % 2 === 0 ? "even" : "odd");`,
        },
        {
          id: "l1-loops",
          level: "L1",
          title: "Loops: for, while + break/continue",
          tags: ["basics", "loops"],
          desc: "Iteration patterns you’ll use everywhere.",
          code: `// Loops
for(let i=1;i<=5;i++){
  if(i===3) continue;
  console.log("i:", i);
}

let x = 1;
while(x <= 3){
  console.log("x:", x);
  x++;
}

for(const ch of "VARANASI"){
  if(ch==="N") break;
  console.log(ch);
}`,
        },
        {
          id: "l1-fn",
          level: "L1",
          title: "Functions: declarations, expressions, arrow",
          tags: ["functions", "basics"],
          desc: "Parameters, return, default values.",
          code: `// Functions
function add(a,b=0){ return a+b; }
const mul = function(a,b){ return a*b; }
const pow2 = x => x*x;

console.log(add(2,3), add(5));
console.log(mul(3,4));
console.log(pow2(9));`,
        },
        {
          id: "l2-scope",
          level: "L2",
          title: "Scope + closures (the real JS power)",
          tags: ["functions", "scope"],
          desc: "Inner functions remember outer variables (closures).",
          code: `// Closures
function makeCounter(){
  let c = 0;
  return function(){
    c++;
    return c;
  };
}
const counterA = makeCounter();
console.log(counterA(), counterA(), counterA());

const counterB = makeCounter();
console.log(counterB(), counterB());`,
        },
        {
          id: "l1-arr",
          level: "L1",
          title: "Arrays: push/pop + basics",
          tags: ["arrays", "basics"],
          desc: "Indexing, length, loops.",
          code: `// Arrays basics
const a = [10, 20, 30];
a.push(40);
console.log(a, "len:", a.length);

for(let i=0;i<a.length;i++){
  console.log(i, a[i]);
}

const last = a.pop();
console.log("popped:", last, a);`,
        },
        {
          id: "l2-arrmethods",
          level: "L2",
          title: "Array methods: map/filter/reduce",
          tags: ["arrays", "functional"],
          desc: "Modern and clean array processing.",
          code: `// map/filter/reduce
const nums = [1,2,3,4,5,6];
const squares = nums.map(n => n*n);
const evens = nums.filter(n => n%2===0);
const sum = nums.reduce((acc,n) => acc+n, 0);

console.log({nums, squares, evens, sum});`,
        },
        {
          id: "l1-obj",
          level: "L1",
          title: "Objects: properties + destructuring",
          tags: ["objects", "basics"],
          desc: "Create, read, update, destructure.",
          code: `// Objects + destructuring
const student = { name:"Riya", city:"Varanasi", score:88 };
student.score += 5;

const { name, score } = student;
console.log(name, score, student);

const key = "city";
console.log("dynamic key:", student[key]);`,
        },
        {
          id: "l2-json",
          level: "L2",
          title: "JSON: stringify + parse",
          tags: ["objects", "web"],
          desc: "Useful for storage and APIs.",
          code: `// JSON
const obj = { app:"Programmer's Picnic", topic:"JavaScript", done:true };
const s = JSON.stringify(obj);
console.log("string:", s);

const back = JSON.parse(s);
console.log("object:", back);`,
        },
        {
          id: "l2-dom",
          level: "L2",
          title: "DOM: create UI + update",
          tags: ["dom", "events"],
          desc: "Build elements, query, update text/html.",
          code: `// DOM demo (works in a browser page)
document.body.innerHTML = "";
const wrap = document.createElement("div");
wrap.style.cssText = "font-family:system-ui;padding:16px";
wrap.innerHTML = "<h2>DOM Demo</h2><p id='p'>Hello</p><button id='b'>Change</button>";
document.body.appendChild(wrap);

document.querySelector("#b").addEventListener("click", () => {
  document.querySelector("#p").textContent = "Text changed at " + new Date().toLocaleTimeString();
});`,
        },
        {
          id: "l2-events",
          level: "L2",
          title: "Events: delegation pattern",
          tags: ["dom", "events"],
          desc: "Handle many buttons with one listener.",
          code: `// Event delegation (browser)
document.body.innerHTML = \`
  <div style="font-family:system-ui;padding:16px">
    <h2>Delegation</h2>
    <div id="list">
      <button data-id="A">A</button>
      <button data-id="B">B</button>
      <button data-id="C">C</button>
    </div>
    <p id="out">Click a button</p>
  </div>
\`;

document.querySelector("#list").addEventListener("click", (e) => {
  const btn = e.target.closest("button");
  if(!btn) return;
  document.querySelector("#out").textContent = "You clicked: " + btn.dataset.id;
});`,
        },
        {
          id: "l2-async",
          level: "L2",
          title: "Async: promises + async/await",
          tags: ["async", "promises"],
          desc: "Understand how JS waits (or doesn’t).",
          code: `// Async/await basics
function wait(ms){
  return new Promise(resolve => setTimeout(resolve, ms));
}

(async function main(){
  console.log("Start");
  await wait(800);
  console.log("After 800ms");
})();`,
        },
        {
          id: "l2-fetch",
          level: "L2",
          title: "Fetch + error handling",
          tags: ["async", "fetch", "web"],
          desc: "Call APIs, handle errors safely.",
          code: `// Fetch example (browser / environment that supports fetch)
async function getJSON(url){
  try{
    const res = await fetch(url);
    if(!res.ok) throw new Error("HTTP " + res.status);
    return await res.json();
  }catch(err){
    console.log("Fetch failed:", err.message);
    return null;
  }
}

// Try a public API:
getJSON("https://api.github.com/repos/programmer-s-picnic/lesson-viewer")
  .then(data => console.log(data ? ("Repo: " + data.full_name) : "No data"));`,
        },
        {
          id: "l2-store",
          level: "L2",
          title: "LocalStorage: save + load",
          tags: ["web", "storage"],
          desc: "Persist data in the browser.",
          code: `// localStorage (browser)
const key = "pp_js_notes";
const notes = { topic:"arrays", text:"map/filter/reduce are awesome", ts:Date.now() };

localStorage.setItem(key, JSON.stringify(notes));
const back = JSON.parse(localStorage.getItem(key) || "null");
console.log(back);`,
        },

        {
          id: "p1-todo",
          level: "Project",
          title: "Project: To-do app + localStorage",
          tags: ["project", "dom", "storage"],
          desc: "Add / complete / delete tasks; save tasks.",
          code: `// To-do app skeleton (browser)
document.body.innerHTML = \`
  <div style="font-family:system-ui;padding:16px;max-width:540px;margin:auto">
    <h2>To-do App</h2>
    <div style="display:flex;gap:8px">
      <input id="t" placeholder="New task..." style="flex:1;padding:10px;border:1px solid #ddd;border-radius:10px" />
      <button id="add">Add</button>
    </div>
    <ul id="list"></ul>
  </div>
\`;

const KEY="pp_todos";
let todos = JSON.parse(localStorage.getItem(KEY) || "[]");

function save(){ localStorage.setItem(KEY, JSON.stringify(todos)); }
function render(){
  const ul = document.querySelector("#list");
  ul.innerHTML="";
  todos.forEach((it, idx) => {
    const li=document.createElement("li");
    li.style.cssText="padding:8px 0;display:flex;align-items:center;gap:8px";
    li.innerHTML = \`
      <input type="checkbox" \${it.done ? "checked" : ""} data-i="\${idx}">
      <span style="flex:1;\${it.done ? "text-decoration:line-through;opacity:.7" : ""}">\${it.text}</span>
      <button data-del="\${idx}">Delete</button>
    \`;
    ul.appendChild(li);
  });
}
render();

document.querySelector("#add").onclick=()=>{
  const v=document.querySelector("#t").value.trim();
  if(!v) return;
  todos.unshift({text:v, done:false});
  document.querySelector("#t").value="";
  save(); render();
};

document.querySelector("#list").addEventListener("click",(e)=>{
  const del = e.target.closest("button[data-del]");
  if(del){
    todos.splice(Number(del.dataset.del), 1);
    save(); render(); return;
  }
});

document.querySelector("#list").addEventListener("change",(e)=>{
  const cb = e.target.closest("input[type=checkbox][data-i]");
  if(!cb) return;
  const i=Number(cb.dataset.i);
  todos[i].done = cb.checked;
  save(); render();
});`,
        },
        {
          id: "p2-fetchui",
          level: "Project",
          title: "Project: API dashboard (fetch + cards)",
          tags: ["project", "fetch", "dom"],
          desc: "Loading states, errors, rendering cards.",
          code: `// API dashboard skeleton (browser)
document.body.innerHTML = \`
  <div style="font-family:system-ui;padding:16px;max-width:720px;margin:auto">
    <h2>API Dashboard</h2>
    <button id="load">Load Data</button>
    <p id="st">Idle</p>
    <div id="grid" style="display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:10px"></div>
  </div>
\`;

async function load(){
  const st=document.querySelector("#st");
  const grid=document.querySelector("#grid");
  st.textContent="Loading...";
  grid.innerHTML="";
  try{
    const res = await fetch("https://api.github.com/repositories?since=100");
    if(!res.ok) throw new Error("HTTP "+res.status);
    const data = await res.json();
    st.textContent="Loaded: "+data.length;
    data.slice(0,12).forEach(repo=>{
      const card=document.createElement("div");
      card.style.cssText="border:1px solid #ddd;border-radius:12px;padding:10px;background:#fff";
      card.innerHTML=\`
        <b>\${repo.full_name || repo.name}</b>
        <div style="opacity:.75;font-size:12px;margin-top:4px">\${repo.html_url}</div>
      \`;
      grid.appendChild(card);
    });
  }catch(err){
    st.textContent="Error: "+err.message;
  }
}

document.querySelector("#load").onclick=load;`,
        },
      ];

      const QUIZ = [
        {
          q: "Which keyword should you prefer for variables you don’t reassign?",
          a: ["var", "let", "const"],
          correct: 2,
          why: "Use const by default; switch to let only when you need reassignment.",
        },
        {
          q: "What does Array.map() return?",
          a: ["A new array", "The same array mutated", "A number"],
          correct: 0,
          why: "map returns a new array with transformed elements.",
        },
        {
          q: "Which is safer for equality comparison?",
          a: ["==", "===", "="],
          correct: 1,
          why: "=== avoids coercion surprises.",
        },
        {
          q: "How do you handle async code in a clean style?",
          a: ["try/catch + async/await", "only callbacks", "only setTimeout"],
          correct: 0,
          why: "async/await with try/catch is clean and readable.",
        },
      ];

      // -------- State --------
      const STORE_KEY = "pp_js_index_progress_v1";
      const state = {
        done: new Set(JSON.parse(localStorage.getItem(STORE_KEY) || "[]")),
        tag: "all",
        q: "",
        level: "all",
      };

      // -------- Helpers --------
      const $ = (sel) => document.querySelector(sel);
      const toastEl = $("#toast");
      function toast(msg) {
        toastEl.textContent = msg;
        toastEl.classList.add("on");
        clearTimeout(toastEl._t);
        toastEl._t = setTimeout(() => toastEl.classList.remove("on"), 1100);
      }
      function saveProgress() {
        localStorage.setItem(STORE_KEY, JSON.stringify([...state.done]));
        renderKPIs();
        renderProgressPill();
      }
      function levelBadge(level) {
        if (level === "L1")
          return `<span class="badge l1">L1 • Beginner</span>`;
        if (level === "L2")
          return `<span class="badge l2">L2 • Intermediate</span>`;
        if (level === "L3")
          return `<span class="badge l3">L3 • Advanced</span>`;
        return `<span class="badge">Project</span>`;
      }
      function esc(s) {
        return String(s)
          .replaceAll("&", "&amp;")
          .replaceAll("<", "&lt;")
          .replaceAll(">", "&gt;");
      }

      // -------- Render chips (tags) --------
      function renderChips() {
        const allTags = new Map();
        for (const l of LESSONS) {
          for (const t of l.tags) allTags.set(t, (allTags.get(t) || 0) + 1);
        }
        const chips = $("#chips");
        const items = [
          ["all", `All`],
          ...[...allTags.entries()]
            .sort((a, b) => b[1] - a[1])
            .map(([t, c]) => [t, `${t} (${c})`]),
        ];

        chips.innerHTML = items
          .map(([t, label]) => {
            const on = state.tag === t ? "on" : "";
            return `<span class="chip ${on}" data-tag="${esc(t)}">${esc(label)}</span>`;
          })
          .join("");

        chips.querySelectorAll(".chip").forEach((ch) => {
          ch.addEventListener("click", () => {
            state.tag = ch.dataset.tag;
            chips
              .querySelectorAll(".chip")
              .forEach((x) =>
                x.classList.toggle("on", x.dataset.tag === state.tag),
              );
            renderLessons();
          });
        });
      }

      // -------- Render lessons list --------
      function matches(lesson) {
        const q = state.q.trim().toLowerCase();
        if (state.level !== "all" && lesson.level !== state.level) return false;
        if (state.tag !== "all" && !lesson.tags.includes(state.tag))
          return false;
        if (!q) return true;
        const blob = (
          lesson.title +
          " " +
          lesson.desc +
          " " +
          lesson.tags.join(" ")
        ).toLowerCase();
        return blob.includes(q);
      }

      function renderLessons() {
        const list = $("#lessonList");
        const filtered = LESSONS.filter(matches);
        list.innerHTML = filtered
          .map((l) => {
            const isDone = state.done.has(l.id);
            const doneTxt = isDone ? "Done ✓" : "Mark done";
            const doneClass = isDone ? "good" : "ghost";

            return `
          <div class="lesson" data-id="${esc(l.id)}">
            <div class="row">
              ${levelBadge(l.level)}
              <div style="flex:1">
                <h3>${esc(l.title)}</h3>
                <p>${esc(l.desc)}</p>
                <div class="meta">
                  ${l.tags.map((t) => `<span class="tag">${esc(t)}</span>`).join("")}
                </div>
              </div>
            </div>
            <div class="actions">
              <button class="mini warn" data-copy="${esc(l.id)}">Copy starter</button>
              <button class="mini ${doneClass}" data-done="${esc(l.id)}">${esc(doneTxt)}</button>
              <button class="mini" data-preview="${esc(l.id)}" title="Preview snippet here">Preview</button>
            </div>
            <div class="bd" style="display:none; padding-top:0" data-panel="${esc(l.id)}">
              <div class="code">
                <button class="copy" data-copy-panel="${esc(l.id)}">Copy</button>
                <pre style="margin:0; white-space:pre-wrap">${esc(l.code)}</pre>
              </div>
              <div class="muted" style="margin-top:8px">
                Paste into the editor on the right and run. If it’s DOM code, it works best in a browser context.
              </div>
            </div>
          </div>
        `;
          })
          .join("");

        // wire actions
        list.querySelectorAll("[data-copy]").forEach((btn) => {
          btn.addEventListener("click", async () => {
            const id = btn.dataset.copy;
            const lesson = LESSONS.find((x) => x.id === id);
            if (!lesson) return;
            try {
              await navigator.clipboard.writeText(lesson.code);
              toast("Snippet copied!");
            } catch (e) {
              toast("Copy blocked. Select text manually.");
            }
          });
        });

        list.querySelectorAll("[data-done]").forEach((btn) => {
          btn.addEventListener("click", () => {
            const id = btn.dataset.done;
            if (state.done.has(id)) state.done.delete(id);
            else state.done.add(id);
            saveProgress();
            renderLessons();
          });
        });

        list.querySelectorAll("[data-preview]").forEach((btn) => {
          btn.addEventListener("click", () => {
            const id = btn.dataset.preview;
            const panel = list.querySelector(
              `[data-panel="${CSS.escape(id)}"]`,
            );
            const open = panel.style.display !== "none";
            panel.style.display = open ? "none" : "block";
            btn.textContent = open ? "Preview" : "Hide";
          });
        });

        // panel copy
        list.querySelectorAll("[data-copy-panel]").forEach((btn) => {
          btn.addEventListener("click", async () => {
            const id = btn.dataset.copyPanel;
            const lesson = LESSONS.find((x) => x.id === id);
            if (!lesson) return;
            try {
              await navigator.clipboard.writeText(lesson.code);
              toast("Copied!");
            } catch (e) {
              toast("Copy blocked. Select text manually.");
            }
          });
        });

        renderProgressPill();
      }

      // -------- KPIs / progress --------
      function renderKPIs() {
        $("#kpiTopics").textContent = String(LESSONS.length);
        $("#kpiBeginner").textContent = String(
          LESSONS.filter((x) => x.level === "L1").length,
        );
        $("#kpiProjects").textContent = String(
          LESSONS.filter((x) => x.level === "Project").length,
        );
        $("#totalCount").textContent = String(LESSONS.length);
        $("#doneCount").textContent = String(state.done.size);
      }
      function renderProgressPill() {
        $("#doneCount").textContent = String(state.done.size);
        $("#totalCount").textContent = String(LESSONS.length);
      }

      // -------- Quizzes --------
      function renderQuiz() {
        const box = $("#quizBox");
        box.innerHTML =
          QUIZ.map((it, idx) => {
            return `
          <div style="border:1px solid var(--border);border-radius:16px;padding:10px 12px;background:#fff;margin-top:10px">
            <b>Q${idx + 1}. ${esc(it.q)}</b>
            <div style="margin-top:8px;display:grid;gap:8px">
              ${it.a
                .map(
                  (opt, i) => `
                <label style="display:flex;gap:8px;align-items:flex-start;cursor:pointer">
                  <input type="radio" name="q${idx}" value="${i}">
                  <span>${esc(opt)}</span>
                </label>
              `,
                )
                .join("")}
            </div>
            <div class="muted" style="margin-top:8px" id="why${idx}"></div>
          </div>
        `;
          }).join("") +
          `
        <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:10px">
          <button class="btn primary" id="checkQuiz">Check Answers</button>
          <button class="btn" id="resetQuiz">Reset Quiz</button>
          <div class="pill" id="quizScore">Score: —</div>
        </div>
      `;

        $("#checkQuiz").onclick = () => {
          let score = 0;
          QUIZ.forEach((it, idx) => {
            const sel = document.querySelector(`input[name="q${idx}"]:checked`);
            const why = document.querySelector(`#why${idx}`);
            if (!sel) {
              why.textContent = "Pick an option.";
              why.style.color = "var(--warn)";
              return;
            }
            const ok = Number(sel.value) === it.correct;
            if (ok) score++;
            why.textContent = (ok ? "✅ Correct. " : "❌ Not quite. ") + it.why;
            why.style.color = ok ? "var(--ok)" : "var(--bad)";
          });
          $("#quizScore").innerHTML = `Score: <b>${score}/${QUIZ.length}</b>`;
          toast("Quiz checked");
        };

        $("#resetQuiz").onclick = () => {
          QUIZ.forEach((_, idx) => {
            document
              .querySelectorAll(`input[name="q${idx}"]`)
              .forEach((x) => (x.checked = false));
            const why = document.querySelector(`#why${idx}`);
            why.textContent = "";
          });
          $("#quizScore").textContent = "Score: —";
          toast("Quiz reset");
        };
      }

      // -------- Copy buttons for top code blocks --------
      document.querySelectorAll("[data-copy]").forEach((btn) => {
        btn.addEventListener("click", async () => {
          const sel = btn.getAttribute("data-copy");
          const el = document.querySelector(sel);
          if (!el) return;
          try {
            await navigator.clipboard.writeText(el.textContent.trim());
            toast("Copied!");
          } catch (e) {
            toast("Copy blocked. Select manually.");
          }
        });
      });

      // -------- Wire top controls --------
      $("#q").addEventListener("input", (e) => {
        state.q = e.target.value;
        renderLessons();
      });
      $("#level").addEventListener("change", (e) => {
        state.level = e.target.value;
        renderLessons();
      });

      $("#openEditorBtn").addEventListener("click", () => {
        window.open(
          "https://programmer-s-picnic.github.io/lesson-viewer/java-script/editor/",
          "_blank",
          "noopener,noreferrer",
        );
      });

      $("#resetProgressBtn").addEventListener("click", () => {
        state.done.clear();
        saveProgress();
        renderLessons();
        toast("Progress cleared");
      });

      // -------- Init --------
      renderChips();
      renderKPIs();
      renderLessons();
      renderQuiz();
    </script>
  </body>
</html>
