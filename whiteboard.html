<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Programmer's Picnic Whiteboard v4</title>

<style>
    body {
        margin: 0;
        height: 100vh;
        display: flex;
        background: #f5f5f5;
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    #toolbar {
        width: 90px;
        background: #ffffff;
        border-right: 2px solid #e0e0e0;
        padding: 10px 8px;
        display: flex;
        flex-direction: column;
        gap: 10px;
        align-items: center;
        box-shadow: 2px 0 6px rgba(0,0,0,0.06);
        box-sizing: border-box;
    }

    .tool-btn {
        width: 60px;
        height: 60px;
        border-radius: 14px;
        border: 1px solid #b0bec5;
        background: #ffffff;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        font-size: 24px;
        transition: 0.2s;
        box-sizing: border-box;
    }

    .tool-btn:hover {
        background: #eceff1;
    }

    .tool-btn.active {
        background: #e3f2fd;
        border-color: #1976d2;
        box-shadow: 0 0 0 2px rgba(25, 118, 210, 0.25);
    }

    #colorPicker,
    #sizePicker {
        width: 60px;
    }

    #sizePicker {
        writing-mode: bt-lr;
    }

    .label {
        font-size: 11px;
        color: #546e7a;
        text-align: center;
    }

    #board-wrapper {
        flex: 1;
        position: relative;
        display: flex;
    }

    canvas {
        flex: 1;
        background: #ffffff;
        cursor: crosshair;
        touch-action: none;
        display: block;
    }

    .text-input-overlay {
        position: absolute;
        min-width: 80px;
        min-height: 24px;
        padding: 4px 6px;
        border: 1px solid #1976d2;
        border-radius: 4px;
        font-family: inherit;
        font-size: 14px;
        resize: both;
        overflow: hidden;
        background: #ffffff;
        box-shadow: 0 0 0 2px rgba(25,118,210,0.25);
        outline: none;
        box-sizing: border-box;
        white-space: pre-wrap;
    }
</style>
</head>
<body>

<div id="toolbar">
    <div class="label">Draw</div>
    <button class="tool-btn active" id="penBtn" title="Pen">‚úèÔ∏è</button>
    <button class="tool-btn" id="eraserBtn" title="Eraser">üßΩ</button>

    <div class="label">Highlight</div>
    <button class="tool-btn" id="highlighterBtn" title="Highlighter">‚ú®</button>

    <div class="label">Shapes</div>
    <button class="tool-btn" id="lineBtn" title="Line">üìè</button>
    <button class="tool-btn" id="rectBtn" title="Rectangle">‚óªÔ∏è</button>
    <button class="tool-btn" id="circleBtn" title="Circle">‚ö™</button>

    <div class="label">Text</div>
    <button class="tool-btn" id="textBtn" title="Text Tool">üÖ£</button>

    <div class="label">Select</div>
    <button class="tool-btn" id="selectBtn" title="Select & Move">üîò</button>

    <div class="label">Fill</div>
    <button class="tool-btn" id="fillToggleBtn" title="Toggle Fill">üî≤</button>

    <div class="label">Color</div>
    <input type="color" id="colorPicker" value="#000000">

    <div class="label">Size</div>
    <input type="range" id="sizePicker" min="1" max="40" value="4">

    <div class="label">History</div>
    <button class="tool-btn" id="undoBtn" title="Undo (Ctrl+Z)">‚Ü©Ô∏è</button>
    <button class