<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      pre,
      code {
        color: teal;
        font-size: 24px;
      }
      #ls-matplotlib-line-post {
        font-family:
          Inter,
          system-ui,
          -apple-system,
          "Segoe UI",
          Roboto,
          Arial;
        color: #073149;
        line-height: 1.6;
      }
      #ls-matplotlib-line-post :root {
        --accent: #1f7fc1;
        --muted: #5b768a;
      }
      #ls-matplotlib-line-post .panel {
        background: #fff;
        border-radius: 12px;
        padding: 16px;
        margin-bottom: 14px;
        box-shadow: 0 8px 22px rgba(10, 30, 50, 0.05);
      }
      #ls-matplotlib-line-post h1 {
        color: var(--accent);
        margin: 0 0 8px;
      }
      #ls-matplotlib-line-post h2,
      #ls-matplotlib-line-post h3 {
        color: #0b3c61;
      }
      #ls-matplotlib-line-post pre {
        background: #f5fbff;
        padding: 12px;
        border-radius: 8px;
        overflow: auto;
        font-family: monospace;
        font-size: 13px;
      }
      #ls-matplotlib-line-post code {
        font-family: monospace;
        font-size: 13px;
      }
      #ls-matplotlib-line-post .kbd {
        background: #eef7ff;
        padding: 4px 8px;
        border-radius: 6px;
        border: 1px solid #e6f3fb;
      }
      #ls-matplotlib-line-post .note {
        color: #547286;
        font-size: 0.95rem;
        margin-top: 8px;
      }
      #ls-matplotlib-line-post .meta {
        color: var(--muted);
        margin-bottom: 12px;
      }
      #ls-matplotlib-line-post img.sample {
        max-width: 100%;
        border-radius: 8px;
        display: block;
        margin-top: 10px;
        border: 1px solid #eef6fc;
      }
      #ls-matplotlib-line-post footer {
        text-align: center;
        color: var(--muted);
        font-size: 13px;
        margin-top: 20px;
      }

      /* Practice area */
      #ls-matplotlib-line-post .practice-grid {
        display: flex;
        flex-direction: column;
        gap: 12px;
      }
      @media (min-width: 860px) {
        #ls-matplotlib-line-post .practice-grid {
          flex-direction: row;
        }
      }
      #ls-matplotlib-line-post .code-area {
        flex: 1;
        min-width: 260px;
      }
      #ls-matplotlib-line-post .output-area {
        flex: 1;
        min-width: 260px;
      }
      #ls-matplotlib-line-post .editor {
        background-color: white;
        color: teal;
        font-size: 14px;
        width: 100%;
        min-height: 220px;
        border-radius: 8px;
        border: 1px solid #eef7fb;
        padding: 10px;
        font-family: monospace;
        resize: vertical;
        white-space: pre;
      }
      #ls-matplotlib-line-post .controls {
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
        align-items: center;
        margin-top: 8px;
      }
      #ls-matplotlib-line-post .btn {
        background: var(--accent);
        color: #fff;
        border: 0;
        padding: 8px 12px;
        border-radius: 8px;
        cursor: pointer;
        font-weight: 700;
      }
      #ls-matplotlib-line-post .btn.ghost {
        background: transparent;
        color: var(--accent);
        border: 1px solid rgba(31, 127, 193, 0.12);
      }
      #ls-matplotlib-line-post .output {
        background: #fbfeff;
        border-radius: 8px;
        padding: 10px;
        min-height: 160px;
        font-family: monospace;
        color: #08263f;
        overflow: auto;
      }
      #ls-matplotlib-line-post .img-preview {
        max-width: 100%;
        border-radius: 8px;
        border: 1px solid #eef6fc;
        display: block;
      }
      #ls-matplotlib-line-post .small {
        font-size: 13px;
        color: var(--muted);
      }
    </style>
    <link
      rel="stylesheet"
      href="https://varanasi-software-junction.github.io/blogger/blogger-assets/crx_styles_v1.css"
    />
  </head>
  <body>
    <img
      src="https://blogger.googleusercontent.com/img/a/AVvXsEhlfwIqq3YYxj6LMFr4E7IKN2bYIor-bFpbUXBT3Jthp8PKmRdWozV3hEk2xcj3kPrJ9WBIkXCr4lw5MTAz0AE5b0lPhQ2ReNbCmMOumP4zLTEOb7GY6s4YWcgcCfzltJVmQcgCObeQNRvn_SWPa_2c6cROZUOBHhRJB20PaV-peuA3GTSafM8JxgaYu5M=s257"
    />
    <!-- âœ… Learning Sutras â€” Line Graphs & Trends in Matplotlib (Baby Steps) -->
    <div id="ls-matplotlib-line-post">
      <div class="panel">
        <h1>Line Graphs & Trends in Matplotlib â€” Baby Steps</h1>
        <div class="meta">
          Keyword: <strong>matplotlib line plot</strong> â€¢ Difficulty:
          <strong>Beginner</strong> â€¢ Author: <strong>Champak Roy</strong>
        </div>
        <p>
          Line graphs are the go-to chart for showing change over time and
          trends. In this lesson you'll learn simple line plots, multiple
          series, markers & styles, smoothing / moving averages (trend lines),
          and how to annotate important points. Try examples live below using
          Python (Pyodide)!
        </p>
      </div>

      <div class="panel">
        <h2>ðŸ’¡ Step-by-Step Tutorial</h2>

        <h3>1) Import Matplotlib</h3>
        <pre><code>import matplotlib.pyplot as plt</code></pre>

        <h3>2) Prepare your data</h3>
        <pre><code>months = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug']
sales = [120, 130, 115, 150, 170, 165, 180, 190]</code></pre>

        <h3>3) Draw your first line chart</h3>
        <pre><code>plt.plot(months, sales)
plt.title('Monthly Sales')
plt.xlabel('Month')
plt.ylabel('Sales')
plt.show()</code></pre>

        <h3>4) Multiple series & styles</h3>
        <pre><code>plt.plot(months, sales, marker='o', linestyle='-', label='This Year')
plt.plot(months, [100,110,120,130,140,150,160,170], marker='s', linestyle='--', label='Last Year')
plt.legend()</code></pre>

        <h3>5) Markers, colors and grids</h3>
        <pre><code>plt.plot(months, sales, color='#2b9bd3', marker='o', linewidth=2)
plt.grid(alpha=0.3)</code></pre>

        <h3>6) Trend line â€” moving average (simple)</h3>
        <pre><code>import numpy as np
window = 3
movavg = np.convolve(sales, np.ones(window)/window, mode='valid')
# plot movavg aligned to the middle of the window
plt.plot(months[window-1:], movavg, color='orange', label='3-month MA')</code></pre>

        <h3>7) Annotate points</h3>
        <pre><code>plt.annotate('Peak', xy=('Aug', 190), xytext=('Jun',200),
             arrowprops=dict(arrowstyle='->'))</code></pre>

        <p class="note">
          ðŸ’¬ Tip: In the Pyodide practice section below, use
          <code>matplotlib.use('Agg')</code> and save your figure with
          <code>plt.savefig()</code> to display it in-browser.
        </p>
      </div>

      <div class="panel">
        <strong>ðŸ“Š Sample static output:</strong>
        <!-- simple SVG with two lines -->
        <img
          class="sample"
          alt="sample line chart"
          src="data:image/svg+xml;utf8,
  <svg xmlns='http://www.w3.org/2000/svg' width='720' height='360'>
    <rect width='100%' height='100%' fill='%23ffffff'/>
    <g transform='translate(60,40)'>
      <text x='160' y='-10' font-family='Arial' font-size='18' fill='%23083349'>Monthly Sales & Trend</text>
      <!-- grid lines -->
      <g stroke='%23e6f2fa' stroke-width='1'>
        <line x1='0' y1='0' x2='520' y2='0'/>
        <line x1='0' y1='40' x2='520' y2='40'/>
        <line x1='0' y1='80' x2='520' y2='80'/>
        <line x1='0' y1='120' x2='520' y2='120'/>
        <line x1='0' y1='160' x2='520' y2='160'/>
      </g>
      <!-- months x axis -->
      <g font-family='Arial' font-size='12' fill='%23083349'>
        <text x='0' y='190'>Jan</text><text x='70' y='190'>Feb</text><text x='140' y='190'>Mar</text><text x='210' y='190'>Apr</text>
        <text x='280' y='190'>May</text><text x='350' y='190'>Jun</text><text x='420' y='190'>Jul</text><text x='490' y='190'>Aug</text>
      </g>
      <!-- sales line -->
      <polyline fill='none' stroke='%232b9bd3' stroke-width='3' points='0,160 70,150 140,165 210,120 280,80 350,90 420,60 490,40'/>
      <!-- last year line -->
      <polyline fill='none' stroke='%23a0cde6' stroke-width='2' stroke-dasharray='6,4' points='0,200 70,190 140,165 210,150 280,130 350,120 420,100 490,80'/>
      <!-- trend (mov avg) -->
      <polyline fill='none' stroke='%23f39c12' stroke-width='2' points='140,150 210,135 280,110 350,100 420,80 490,60'/>
      <!-- markers -->
      <circle cx='0' cy='160' r='4' fill='%232b9bd3'/><circle cx='70' cy='150' r='4' fill='%232b9bd3'/>
      <circle cx='490' cy='40' r='5' fill='%23f39c12'/>
      <!-- annotation -->
      <text x='460' y='20' font-family='Arial' font-size='12' fill='%23083349'>Peak: Aug 190</text>
    </g>
  </svg>"
        />
      </div>

      <!-- ðŸ§ª Pyodide Practice Runner -->
      <div class="panel" id="py-runner-line">
        <h2>ðŸ§ª Practice: Run Matplotlib with Pyodide</h2>
        <p class="small">
          Click <strong>Preload Pyodide</strong> once to install
          <code>matplotlib</code> and <code>numpy</code>. Then press
          <strong>Run & Render</strong> to display your chart as an image!
        </p>

        <div class="practice-grid">
          <div class="code-area">
            <textarea id="mplEditorLine" class="editor">
# Example: Line plot with two series and a 3-month moving average
import matplotlib
matplotlib.use('Agg')
import matplotlib.pyplot as plt
import numpy as np
import io, base64

months = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug']
sales = np.array([120,130,115,150,170,165,180,190])
last_year = np.array([100,110,120,130,140,150,160,170])

plt.figure(figsize=(7,3.5))
plt.plot(months, sales, marker='o', linestyle='-', linewidth=2, color='#2b9bd3', label='This Year')
plt.plot(months, last_year, marker='s', linestyle='--', linewidth=1.6, color='#7fbbe0', label='Last Year')

# moving average (3-month simple)
window = 3
movavg = np.convolve(sales, np.ones(window)/window, mode='valid')
# align x positions for movavg (place it starting at month index window-1)
x_mov = months[window-1:]
plt.plot(x_mov, movavg, color='#f39c12', linewidth=2, label='3-month MA')

# annotate peak
max_idx = int(np.argmax(sales))
plt.annotate('Peak', xy=(months[max_idx], sales[max_idx]), xytext=(months[max_idx-2], sales[max_idx]+15),
             arrowprops=dict(arrowstyle='->', color='gray'))

plt.title('Monthly Sales & Trend')
plt.xlabel('Month'); plt.ylabel('Sales')
plt.legend()
plt.grid(alpha=0.25)

buf = io.BytesIO()
plt.tight_layout()
plt.savefig(buf, format='png')
buf.seek(0)
base64.b64encode(buf.read()).decode('ascii')</textarea
            >

            <div class="controls">
              <button id="preloadPyBtnLine" class="btn">Preload Pyodide</button>
              <button id="runMplBtnLine" class="btn">Run & Render</button>
              <button id="clearMplOutLine" class="btn ghost">
                Clear Output
              </button>
              <div id="mplStatusLine" class="small" style="margin-left: auto">
                Idle
              </div>
            </div>
            <div style="margin-top: 8px">
              <div class="small">Console output:</div>
              <div id="mplConsoleLine" class="output"></div>
            </div>
          </div>

          <div class="output-area">
            <label style="font-weight: 700; display: block; margin-bottom: 6px"
              >Rendered Chart</label
            >
            <div
              style="
                background: #fff;
                border: 1px solid #eef6fc;
                border-radius: 8px;
                padding: 10px;
                min-height: 240px;
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
              "
            >
              <img
                id="mplImageLine"
                class="img-preview"
                style="display: none"
              />
              <div id="mplEmptyLine" class="small">
                No chart yet â€” run code to render a PNG here.
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="panel">
        <h3>ðŸ§  Tips & Notes</h3>
        <ul>
          <li>
            Use <code>plt.plot()</code> for continuous data â€” ideal for time
            series and trends.
          </li>
          <li>
            Plot multiple series to compare (this year vs last year) â€” use
            <code>label</code> and <code>plt.legend()</code>.
          </li>
          <li>
            Use moving averages or smoothing to emphasise trend over noise.
          </li>
          <li>
            Annotate important points with <code>plt.annotate()</code> to call
            out peaks or events.
          </li>
          <li>
            If Pyodide fails to load: refresh, try Incognito, or follow the site
            instructions to preload Pyodide in the theme.
          </li>
        </ul>
      </div>

      <footer>
        Â© Learning Sutras â€” Champak Roy | Made with ðŸ’™ in Varanasi
      </footer>

      <script>
        (function () {
          const preloadBtn = document.getElementById("preloadPyBtnLine"),
            runBtn = document.getElementById("runMplBtnLine"),
            clearBtn = document.getElementById("clearMplOutLine"),
            editor = document.getElementById("mplEditorLine"),
            status = document.getElementById("mplStatusLine"),
            consoleEl = document.getElementById("mplConsoleLine"),
            imgEl = document.getElementById("mplImageLine"),
            emptyEl = document.getElementById("mplEmptyLine");
          let pyodide = null;
          const baseURL = "https://cdn.jsdelivr.net/pyodide/v0.23.4/full/";

          function log(msg, err = false) {
            const d = document.createElement("div");
            d.textContent = msg;
            if (err) d.style.color = "#a33";
            consoleEl.appendChild(d);
            consoleEl.scrollTop = consoleEl.scrollHeight;
          }
          async function loadPyodideBase() {
            if (pyodide) return pyodide;
            status.textContent = "Loading Pyodide...";
            if (!window.loadPyodide) {
              await new Promise((res, rej) => {
                const s = document.createElement("script");
                s.src = baseURL + "pyodide.js";
                s.onload = res;
                s.onerror = rej;
                document.head.appendChild(s);
              });
            }
            // eslint-disable-next-line no-undef
            pyodide = await loadPyodide({ indexURL: baseURL });
            status.textContent = "Installing matplotlib...";
            await pyodide.loadPackage(["matplotlib", "numpy"]);
            status.textContent = "Ready";
            return pyodide;
          }

          async function runCode() {
            consoleEl.innerHTML = "";
            imgEl.style.display = "none";
            emptyEl.style.display = "block";
            try {
              await loadPyodideBase();
            } catch (e) {
              log("Pyodide failed:" + e, true);
              return;
            }
            status.textContent = "Running...";
            try {
              pyodide.setStdout({ batched: (s) => log(s) });
              pyodide.setStderr({ batched: (s) => log(s, true) });
              const b64 = String(await pyodide.runPythonAsync(editor.value));
              if (b64 && b64.length > 100) {
                imgEl.src = "data:image/png;base64," + b64;
                imgEl.style.display = "block";
                emptyEl.style.display = "none";
                log("Rendered successfully.");
              } else {
                log("No image returned.");
              }
              status.textContent = "Done";
            } catch (e) {
              log("Error:" + e, true);
              status.textContent = "Error";
            }
          }

          preloadBtn.onclick = () => loadPyodideBase();
          runBtn.onclick = () => runCode();
          clearBtn.onclick = () => {
            consoleEl.innerHTML = "";
            imgEl.style.display = "none";
            emptyEl.style.display = "block";
            status.textContent = "Idle";
          };
        })();
      </script>
    </div>
  </body>
</html>
