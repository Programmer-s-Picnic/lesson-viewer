<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Programming Whiteboard PRO â€” Drag â€¢ Resize â€¢ Rotate â€¢ Draw â€¢ Connect â€¢ Save/Export</title>

<style>
:root{
  --bg:#fff7e6;--card:#fff;--ink:#1f2937;--muted:#6b7280;
  --brand:#d97706;--brand2:#f59e0b;
  --border:#eadcc5;--shadow:0 18px 40px rgba(31,41,55,.14);
  --grid:rgba(255,255,255,.08);
  --snap:rgba(245,158,11,.95);
  --safe:rgba(255,255,255,.18);
  --codebg:#0b1220;--codeink:#e5e7eb;
  --note:#fff6cc;
}
*{box-sizing:border-box}
body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;background:var(--bg);color:var(--ink)}
.wrap{max-width:1500px;margin:18px auto;padding:14px}
h1{text-align:center;color:var(--brand)}
.grid{display:grid;grid-template-columns:400px 1fr;gap:14px}
.card{background:#fff;border:1px solid var(--border);border-radius:18px;box-shadow:var(--shadow);padding:14px}
button,input,select,textarea{font-family:inherit}

/* BOARD */
.boardWrap{position:relative}
#board{
  width:100%;
  aspect-ratio:16/9;
  background:#0a0a0a;
  border-radius:18px;
  position:relative;
  overflow:hidden;
}
#board.gridOn{
  background-image:
    linear-gradient(to right,var(--grid) 1px,transparent 1px),
    linear-gradient(to bottom,var(--grid) 1px,transparent 1px);
  background-size:30px 30px;
}

/* FULLSCREEN */
:fullscreen #board,
:-webkit-full-screen #board{
  width:100vw!important;
  height:100vh!important;
  aspect-ratio:auto!important;
  border-radius:0!important;
}

/* Guides */
.guide{position:absolute;display:none;background:var(--snap);z-index:9999}
#vGuide{width:2px;top:0;bottom:0}
#hGuide{height:2px;left:0;right:0}

/* SVG Links */
#linksSvg{position:absolute;inset:0;pointer-events:none}
.link{stroke:rgba(245,158,11,.95);stroke-width:3;fill:none}

/* Canvas */
#drawCanvas{position:absolute;inset:0;pointer-events:none}

/* Elements */
.el{position:absolute;touch-action:none}
.el.selected{outline:2px solid var(--brand)}
.box{width:100%;height:100%;border-radius:14px;background:rgba(0,0,0,.15)}
.hdr{padding:6px;color:#fff;font-size:12px}
.content{padding:10px}

/* Simple buttons */
.iconBtn{
  padding:6px 8px;
  border-radius:8px;
  border:1px solid rgba(255,255,255,.25);
  background:rgba(0,0,0,.35);
  color:#fff;
  cursor:pointer;
  font-weight:800;
}
.btn{padding:10px;border-radius:12px;border:0;cursor:pointer;font-weight:900}
.btn.primary{background:linear-gradient(135deg,var(--brand),var(--brand2));color:#fff}
.btn.secondary{background:#fff;border:1px solid var(--brand);color:var(--brand)}

@media(max-width:1050px){.grid{grid-template-columns:1fr}}
</style>
</head>

<body>
<div class="wrap">
<h1>ðŸ§  Programming Whiteboard PRO</h1>

<div class="grid">
  <!-- LEFT -->
  <div class="card">
    <div style="display:flex;gap:8px;align-items:center;flex-wrap:wrap">
      <button class="iconBtn" id="fsToggle" title="Fullscreen">â›¶</button>
      <label><input type="checkbox" id="gridToggle"> Grid</label>
      <label><input type="checkbox" id="snapToggle" checked> Snap</label>
    </div>
    <hr>
    <button class="btn primary" id="addNoteBtn">âž• Note</button>
    <button class="btn secondary" id="addCodeBtn">âž• Code</button>
  </div>

  <!-- RIGHT -->
  <div class="card boardWrap">
    <div id="board">
      <svg id="linksSvg"></svg>
      <canvas id="drawCanvas"></canvas>
      <div id="vGuide" class="guide"></div>
      <div id="hGuide" class="guide"></div>
    </div>
  </div>
</div>
</div>

<script>
/* ========== Helpers ========== */
const $ = q => document.querySelector(q);
const board = $("#board");
const drawCanvas = $("#drawCanvas");
const ctx = drawCanvas.getContext("2d");
const vGuide = $("#vGuide"), hGuide=$("#hGuide");

let zTop=10;
const state={els:{}};
const selected=new Set();

/* ========== Fullscreen ========== */
const fsBtn=$("#fsToggle");
function isFS(){return document.fullscreenElement;}
function toggleFS(){
  if(!isFS()) board.requestFullscreen();
  else document.exitFullscreen();
}
fsBtn.onclick=toggleFS;
document.addEventListener("fullscreenchange",()=>{
  fsBtn.textContent=isFS()?"â¤¢":"â›¶";
  resizeCanvas();
});

/* ========== Canvas ========== */
function resizeCanvas(){
  const r=board.getBoundingClientRect();
  drawCanvas.width=r.width;
  drawCanvas.height=r.height;
}
window.onresize=resizeCanvas;
resizeCanvas();

/* ========== Elements ========== */
function addNote(){
  const id="el_"+Math.random().toString(16).slice(2);
  const el=document.createElement("div");
  el.className="el";
  el.style.cssText="left:40px;top:40px;width:300px;height:200px;z-index:"+(++zTop);
  el.innerHTML=`
    <div class="box">
      <div class="hdr">Note</div>
      <div class="content">
        <textarea style="width:100%;height:120px">Write here...</textarea>
      </div>
    </div>`;
  el.onpointerdown=e=>{
    selected.clear();selected.add(id);
    document.querySelectorAll(".el").forEach(x=>x.classList.remove("selected"));
    el.classList.add("selected");
  };
  board.appendChild(el);
  state.els[id]=el;
}

function addCode(){
  const id="el_"+Math.random().toString(16).slice(2);
  const el=document.createElement("div");
  el.className="el";
  el.style.cssText="left:380px;top:60px;width:360px;height:240px;z-index:"+(++zTop);
  el.innerHTML=`
    <div class="box">
      <div class="hdr">Code</div>
      <div class="content">
        <textarea style="width:100%;height:160px">// JS code</textarea>
      </div>
    </div>`;
  el.onpointerdown=e=>{
    selected.clear();selected.add(id);
    document.querySelectorAll(".el").forEach(x=>x.classList.remove("selected"));
    el.classList.add("selected");
  };
  board.appendChild(el);
  state.els[id]=el;
}

/* ========== UI ========== */
$("#addNoteBtn").onclick=addNote;
$("#addCodeBtn").onclick=addCode;
$("#gridToggle").onchange=e=>board.classList.toggle("gridOn",e.target.checked);

/* ========== Init ========== */
addNote();
addCode();
</script>
</body>
</html>