<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Speech to Text ‚Äì Programmer‚Äôs Picnic</title>

  <style>
    /* Blogger-safe sandbox root */
    #pp-root {
      min-height: 80vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 26px 12px;
      background:
        radial-gradient(900px 520px at 20% 10%, #fffaf0, transparent),
        linear-gradient(180deg, #fff7ed, #ffedd5);
    }

    #pp-root * {
      box-sizing: border-box;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    }

    .pp-card {
      width: min(760px, 100%);
      background: rgba(255, 255, 255, .88);
      backdrop-filter: blur(10px);
      border-radius: 22px;
      box-shadow: 0 18px 48px rgba(0, 0, 0, .18);
      padding: 22px;
      color: #1f2937;
    }

    .pp-top {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      flex-wrap: wrap;
      margin-bottom: 12px;
    }

    .pp-brand {
      font-weight: 800;
      color: #92400e;
      letter-spacing: .2px;
    }

    .pp-title {
      font-size: 20px;
      font-weight: 800;
      margin: 6px 0 2px;
    }

    .pp-sub {
      color: #6b7280;
      font-size: 13px;
      margin: 0 0 14px;
    }

    .pp-row {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      align-items: center;
      margin: 10px 0 14px;
    }

    .pp-btn {
      border: none;
      padding: 11px 14px;
      border-radius: 14px;
      cursor: pointer;
      font-weight: 700;
      font-size: 14px;
    }

    .pp-btn.primary {
      background: #f59e0b;
      color: #111827;
    }

    .pp-btn.danger {
      background: #ef4444;
      color: #fff;
    }

    .pp-btn.ok {
      background: #10b981;
      color: #fff;
    }

    .pp-btn.ghost {
      background: #fff;
      border: 1px solid #fde68a;
      color: #92400e;
    }

    .pp-pill {
      padding: 8px 12px;
      border-radius: 999px;
      border: 1px solid #fde68a;
      background: #fffbeb;
      color: #92400e;
      font-weight: 700;
      font-size: 13px;
    }

    .pp-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 12px;
    }

    @media (min-width: 720px) {
      .pp-grid {
        grid-template-columns: 1fr 1fr;
      }
    }

    .pp-box {
      border: 1px solid #fde68a;
      border-radius: 16px;
      background: #fff;
      padding: 12px;
    }

    .pp-box h3 {
      margin: 0 0 8px;
      font-size: 14px;
      color: #92400e;
    }

    textarea {
      width: 100%;
      min-height: 210px;
      resize: vertical;
      border: 1px solid #e5e7eb;
      border-radius: 14px;
      padding: 12px;
      font-size: 14px;
      line-height: 1.5;
      outline: none;
    }

    textarea:focus {
      border-color: #f59e0b;
      box-shadow: 0 0 0 4px rgba(245, 158, 11, .18);
    }

    .pp-status {
      margin-top: 8px;
      font-size: 13px;
      color: #6b7280;
    }

    .pp-footer {
      margin-top: 12px;
      color: #9ca3af;
      font-size: 12px;
    }

    .pp-warn {
      background: #fff7ed;
      border: 1px solid #fed7aa;
      color: #92400e;
      padding: 10px 12px;
      border-radius: 14px;
      font-size: 13px;
    }

    kbd {
      border: 1px solid #e5e7eb;
      border-bottom-width: 2px;
      border-radius: 6px;
      padding: 1px 6px;
      background: #fff;
      font-size: 12px;
    }
  </style>
</head>

<body>
  <div id="pp-root">
    <div class="pp-card">
      <div class="pp-top">
        <div>
          <div class="pp-brand">Programmer‚Äôs Picnic</div>
          <div class="pp-title">üé§ Speech to Text (Voice ‚Üí Script)</div>
          <p class="pp-sub">Chrome/Edge recommended ‚Ä¢ No upload ‚Ä¢ Works in browser</p>
        </div>

        <div class="pp-pill" id="supportPill">Checking support‚Ä¶</div>
      </div>

      <div class="pp-warn" id="supportWarn" style="display:none">
        Your browser may not support Speech Recognition. Try <b>Chrome</b> or <b>Edge</b>.
      </div>

      <div class="pp-row">
        <button class="pp-btn primary" id="startBtn">‚ñ∂ Start Listening</button>
        <button class="pp-btn danger" id="stopBtn" style="display:none">‚èπ Stop</button>
        <button class="pp-btn ghost" id="clearBtn">Clear</button>
        <button class="pp-btn ghost" id="copyBtn">Copy</button>
        <button class="pp-btn ok" id="downloadBtn">Download .txt</button>
      </div>

      <div class="pp-grid">
        <div class="pp-box">
          <h3>Live Transcript</h3>
          <textarea id="finalText" placeholder="Your final transcript will appear here‚Ä¶"></textarea>
          <div class="pp-status" id="status">Status: Idle</div>
        </div>

        <div class="pp-box">
          <h3>Interim (What it‚Äôs hearing right now)</h3>
          <textarea id="interimText" placeholder="Interim text (changes as you speak)..." readonly></textarea>
          <div class="pp-footer">
            Tip: Speak in short sentences. Pause after each line.
            Shortcut: Press <kbd>Ctrl</kbd>+<kbd>A</kbd> then <kbd>Ctrl</kbd>+<kbd>C</kbd>.
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    (() => {
      // --- Cross-browser SpeechRecognition ---
      const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;

      const supportPill = document.getElementById("supportPill");
      const supportWarn = document.getElementById("supportWarn");

      const startBtn = document.getElementById("startBtn");
      const stopBtn = document.getElementById("stopBtn");
      const clearBtn = document.getElementById("clearBtn");
      const copyBtn = document.getElementById("copyBtn");
      const downloadBtn = document.getElementById("downloadBtn");

      const finalText = document.getElementById("finalText");
      const interimText = document.getElementById("interimText");
      const status = document.getElementById("status");

      if (!SpeechRecognition) {
        supportPill.textContent = "Not supported";
        supportPill.style.background = "#fee2e2";
        supportPill.style.borderColor = "#fecaca";
        supportPill.style.color = "#991b1b";
        supportWarn.style.display = "block";
        startBtn.disabled = true;
        return;
      }

      supportPill.textContent = "Supported ‚úÖ";
      supportPill.style.background = "#ecfdf5";
      supportPill.style.borderColor = "#bbf7d0";
      supportPill.style.color = "#065f46";

      const rec = new SpeechRecognition();
      rec.lang = "en-IN";            // India English
      rec.continuous = true;
      rec.interimResults = true;

      let listening = false;

      function setListening(on) {
        listening = on;
        startBtn.style.display = on ? "none" : "inline-block";
        stopBtn.style.display = on ? "inline-block" : "none";
        status.textContent = on ? "Status: Listening‚Ä¶" : "Status: Idle";
      }

      rec.onresult = (event) => {
        let interim = "";
        for (let i = event.resultIndex; i < event.results.length; i++) {
          const res = event.results[i];
          const text = res[0].transcript;
          if (res.isFinal) {
            finalText.value += (finalText.value ? " " : "") + text.trim();
          } else {
            interim += text;
          }
        }
        interimText.value = interim.trim();
      };

      rec.onerror = (e) => {
        setListening(false);
        status.textContent = "Status: Error ‚Äî " + e.error;
      };

      rec.onend = () => {
        // Some browsers stop automatically; keep UI sane
        setListening(false);
        interimText.value = "";
      };

      startBtn.onclick = () => {
        try {
          rec.start();
          setListening(true);
        } catch (err) {
          status.textContent = "Status: Could not start (try again)";
        }
      };

      stopBtn.onclick = () => {
        try {
          rec.stop();
        } catch (err) { }
        setListening(false);
        interimText.value = "";
      };

      clearBtn.onclick = () => {
        finalText.value = "";
        interimText.value = "";
        status.textContent = "Status: Cleared";
      };

      copyBtn.onclick = async () => {
        try {
          await navigator.clipboard.writeText(finalText.value.trim());
          status.textContent = "Status: Copied ‚úÖ";
        } catch (err) {
          status.textContent = "Status: Copy failed (select text + Ctrl+C)";
        }
      };

      downloadBtn.onclick = () => {
        const content = finalText.value.trim();
        const blob = new Blob([content], { type: "text/plain;charset=utf-8" });
        const url = URL.createObjectURL(blob);
        const a = document.createElement("a");
        a.href = url;
        a.download = "speech_to_text_script.txt";
        a.click();
        URL.revokeObjectURL(url);
        status.textContent = "Status: Downloaded .txt";
      };
    })();
  </script>
   <script src='https://programmer-s-picnic.github.io/json-images/find-on-page.js'></script>
</body>

</html>