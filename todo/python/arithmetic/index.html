<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>
      Python MCQ Test ‚Äî Arithmetic Operators (25 + Assignments + Pyodide)
    </title>
    <meta name="author" content="Champak Roy" />

    <style>
      :root {
        --bg: #fffaf2;
        --card: #fff;
        --ink: #1f2937;
        --muted: #6b7280;
        --brand: #d97706;
        --brand2: #f59e0b;
        --border: #e5e7eb;
        --ok: #059669;
        --bad: #dc2626;
        --shadow: 0 10px 28px rgba(0, 0, 0, 0.1);
      }
      * {
        box-sizing: border-box;
      }
      body {
        margin: 0;
        font-family: system-ui, Segoe UI, Roboto, Arial, sans-serif;
        background: var(--bg);
        color: var(--ink);
      }
      .container {
        max-width: 1150px;
        margin: auto;
        padding: 18px;
      }
      .hero {
        background: linear-gradient(135deg, #fff4dc, #ffe8b5);
        border: 1px solid #fde68a;
        border-radius: 18px;
        box-shadow: var(--shadow);
        padding: 18px;
      }
      h1 {
        margin: 0;
        color: #92400e;
      }
      .sub {
        color: var(--muted);
        font-size: 14px;
        margin-top: 6px;
      }
      .card {
        background: var(--card);
        border: 1px solid var(--border);
        border-radius: 16px;
        box-shadow: 0 6px 18px rgba(0, 0, 0, 0.06);
        padding: 16px;
        margin-top: 16px;
      }
      .q {
        border: 1px solid var(--border);
        border-radius: 14px;
        padding: 14px;
        margin: 16px 0;
      }
      .options {
        display: grid;
        gap: 8px;
        margin-top: 8px;
      }
      .opt {
        display: flex;
        gap: 10px;
        align-items: flex-start;
        padding: 10px 12px;
        border-radius: 12px;
        border: 1px solid var(--border);
        transition: 0.15s;
      }
      .opt:hover {
        border-color: #f59e0b;
      }
      .opt input {
        margin-top: 4px;
      }
      .correct {
        background: #f0fdf4;
        border-color: #86efac;
      }
      .wrong {
        background: #fff1f2;
        border-color: #fecaca;
      }
      .dim {
        opacity: 0.9;
      }
      .badge {
        font-size: 12px;
        font-weight: 900;
        padding: 3px 8px;
        border-radius: 999px;
        border: 1px solid var(--border);
        margin-left: 6px;
        white-space: nowrap;
      }
      .badge.ok {
        color: var(--ok);
        background: #f0fdf4;
        border-color: #86efac;
      }
      .badge.bad {
        color: var(--bad);
        background: #fff1f2;
        border-color: #fecaca;
      }
      .badge.me {
        color: #92400e;
        background: #fffbeb;
        border-color: #fde68a;
      }
      pre {
        background: #0b1220;
        color: #f9fafb;
        padding: 10px;
        border-radius: 10px;
        overflow: auto;
        margin: 6px 0 0;
        font-size: 14px;
        line-height: 1.35;
      }
      .answerBox {
        margin-top: 12px;
        padding: 12px;
        border-radius: 12px;
        border: 1px dashed var(--border);
        background: #fffbeb;
        font-size: 14px;
        line-height: 1.5;
      }
      .assignment {
        background: #fff7ed;
        border-left: 6px solid var(--brand2);
        padding: 14px;
        border-radius: 12px;
        margin-top: 12px;
      }
      svg {
        max-width: 100%;
      }
      .btnRow {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
        margin-top: 12px;
      }
      .btn {
        padding: 12px 18px;
        border-radius: 12px;
        border: none;
        font-weight: 900;
        cursor: pointer;
        background: linear-gradient(145deg, var(--brand), var(--brand2));
        color: #fff;
      }
      .btn.secondary {
        background: #fff;
        color: #92400e;
        border: 1px solid var(--border);
      }
      .btn:disabled {
        opacity: 0.6;
        cursor: not-allowed;
      }
      .score {
        font-size: 22px;
        font-weight: 900;
        color: #92400e;
      }
      .note {
        font-size: 13px;
        color: var(--muted);
        margin-top: 6px;
      }
      hr {
        border: none;
        border-top: 1px solid var(--border);
        margin: 14px 0;
      }

      /* ---------- Pyodide editor styles ---------- */
      .editorWrap {
        display: grid;
        gap: 12px;
        margin-top: 12px;
      }
      @media (min-width: 980px) {
        .editorWrap {
          grid-template-columns: 1.1fr 0.9fr;
          align-items: start;
        }
      }
      .editorCard {
        background: #fff;
        border: 1px solid var(--border);
        border-radius: 14px;
        padding: 12px;
        box-shadow: 0 6px 18px rgba(0, 0, 0, 0.05);
      }
      .editorTop {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
        align-items: center;
        justify-content: space-between;
      }
      .selectRow {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
        align-items: center;
      }
      select,
      textarea {
        width: 100%;
        font: 14px ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
          "Liberation Mono", "Courier New", monospace;
      }
      select {
        border: 1px solid var(--border);
        border-radius: 10px;
        padding: 10px;
        background: #fff;
      }
      textarea {
        min-height: 280px;
        border: 1px solid var(--border);
        border-radius: 12px;
        padding: 12px;
        background: #fffbeb;
        outline: none;
        resize: vertical;
      }
      .outBox {
        min-height: 280px;
        background: #0b1220;
        color: #f9fafb;
        border-radius: 12px;
        padding: 12px;
        overflow: auto;
        border: 1px solid #111827;
        font: 14px ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
          "Liberation Mono", "Courier New", monospace;
        white-space: pre-wrap;
      }
      .kbdHint {
        font-size: 12px;
        color: var(--muted);
      }
      .statusPill {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 6px 10px;
        border-radius: 999px;
        border: 1px solid var(--border);
        background: #fffbeb;
        color: #92400e;
        font-weight: 800;
        font-size: 12px;
      }
      .dot {
        width: 8px;
        height: 8px;
        border-radius: 50%;
        background: #f59e0b;
        display: inline-block;
      }
      .dot.ok {
        background: var(--ok);
      }
      .dot.bad {
        background: var(--bad);
      }
    </style>
  </head>

  <body>
    <div class="container">
      <div class="hero">
        <h1>Python Arithmetic Operators ‚Äî 25 MCQs + Assignments</h1>
        <div class="sub">
          +, -, *, /, //, %, ** ‚Ä¢ precedence ‚Ä¢ type behavior ‚Ä¢ run assignments
          with Pyodide
        </div>
        <div class="btnRow">
          <button class="btn secondary" onclick="buildQuiz()">
            üîÄ New Test
          </button>
          <button class="btn" id="submitBtn" onclick="submitQuiz()">
            ‚úÖ Submit Test
          </button>
        </div>
        <div class="note">
          Tip: Click ‚ÄúNew Test‚Äù to reshuffle questions and options.
        </div>
      </div>

      <div class="card" id="quiz"></div>

      <div class="card">
        <div class="score" id="score">Not submitted</div>
        <div class="note" id="meta"></div>
      </div>
    </div>

    <!-- Pyodide CDN -->
    <script src="https://cdn.jsdelivr.net/pyodide/v0.25.1/full/pyodide.js"></script>

    <script>
      /* ---------------- Utilities ---------------- */
      function shuffle(arr) {
        const a = arr.slice();
        for (let i = a.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [a[i], a[j]] = [a[j], a[i]];
        }
        return a;
      }
      function esc(s) {
        return String(s)
          .replace(/&/g, "&amp;")
          .replace(/</g, "&lt;")
          .replace(/>/g, "&gt;");
      }
      function isCodeLike(t) {
        const s = String(t);
        if (s.includes("\n")) return true;
        const x = s.trim();
        return (
          /^(if|elif|else|for|while|print|def|return|import)\b/.test(x) ||
          x.includes("==") ||
          x.includes("%") ||
          x.includes("**") ||
          x.includes("//") ||
          x.includes("+") ||
          x.includes("-") ||
          x.includes("*") ||
          x.includes("/") ||
          x.includes("float") ||
          x.includes("int") ||
          x.includes("round(") ||
          (x.includes(":") && x.includes("print"))
        );
      }
      function renderMaybePre(text) {
        const safe = esc(text);
        return isCodeLike(text) ? `<pre>${safe}</pre>` : safe;
      }

      /* ---------------- Simple SVG: Operator Precedence Flow ---------------- */
      const FLOW_PRECEDENCE = `
<svg viewBox="0 0 740 250" role="img" aria-label="Flowchart: Operator precedence">
  <rect x="10" y="10" width="720" height="230" rx="16" fill="#fff" stroke="#f59e0b"/>
  <text x="370" y="42" text-anchor="middle" font-weight="900" font-size="18">Arithmetic Precedence (Simplified)</text>

  <rect x="30" y="70" width="210" height="52" rx="12" fill="#fffbeb" stroke="#fde68a"/>
  <text x="135" y="100" text-anchor="middle" font-size="14">1) Parentheses ( )</text>

  <rect x="265" y="70" width="210" height="52" rx="12" fill="#fffbeb" stroke="#fde68a"/>
  <text x="370" y="100" text-anchor="middle" font-size="14">2) Exponent **</text>

  <rect x="500" y="70" width="210" height="52" rx="12" fill="#fffbeb" stroke="#fde68a"/>
  <text x="605" y="100" text-anchor="middle" font-size="14">3) *, /, //, %</text>

  <rect x="265" y="145" width="210" height="52" rx="12" fill="#fffbeb" stroke="#fde68a"/>
  <text x="370" y="175" text-anchor="middle" font-size="14">4) +, -</text>

  <path d="M240 96 L265 96" stroke="#d97706" stroke-width="2" fill="none"/>
  <path d="M475 96 L500 96" stroke="#d97706" stroke-width="2" fill="none"/>
  <path d="M605 122 L605 171 L475 171" stroke="#d97706" stroke-width="2" fill="none"/>
  <text x="370" y="222" text-anchor="middle" font-size="12" fill="#92400e">
    Note: ** is right-associative (2**3**2 = 2**(3**2)).
  </text>
</svg>`;

      /* ---------------- Question Bank (25) ---------------- */
      const BANK = [
        // ====== Program -> Output (5)
        {
          q: "What is the output?",
          code: `print(10 + 3 * 2)`,
          opts: ["26", "16", "13", "Error"],
          ans: 1,
          exp: "Multiplication has higher precedence than addition: 3*2=6, then 10+6=16.",
        },
        {
          q: "What is the output?",
          code: `print(7 / 2)`,
          opts: ["3", "3.5", "4", "Error"],
          ans: 1,
          exp: "/ always produces a float in Python 3, so 7/2 = 3.5.",
        },
        {
          q: "What is the output?",
          code: `print(7 // 2)`,
          opts: ["3.5", "3", "4", "Error"],
          ans: 1,
          exp: "// is floor division: it returns the floor of the quotient. 7//2 = 3.",
        },
        {
          q: "What is the output?",
          code: `print(7 % 2)`,
          opts: ["0", "1", "2", "3"],
          ans: 1,
          exp: "% gives the remainder. 7 divided by 2 leaves remainder 1.",
        },
        {
          q: "What is the output?",
          code: `print(2 ** 3 ** 2)`,
          opts: ["64", "512", "256", "16"],
          ans: 1,
          exp: "** is right-associative: 2**(3**2) = 2**9 = 512.",
        },

        // ====== Output -> Program (5) (valid Python snippets)
        {
          q: "Which code prints 4 as the result?",
          opts: [
            `print(10 // 2 + 1)`,
            `print(10 / 2 + 1)`,
            `print(10 % 2 + 1)`,
            `print(10 - 2 * 3)`,
          ],
          ans: 0,
          exp: "10//2 = 5, then 5+1=6 (Wait!) Actually this prints 6, so let's check options carefully.",
        },
        // We'll fix that question to be correct:
        {
          q: "Which code prints 4 as the result?",
          opts: [
            `print(9 // 2)`,
            `print(9 / 2)`,
            `print(9 % 2)`,
            `print(2 ** 2 + 1)`,
          ],
          ans: 0,
          exp: "9//2 = 4 (floor division). 9/2=4.5, 9%2=1, 2**2+1=5.",
        },
        {
          q: "Which code prints 0 as the result?",
          opts: [
            `print(8 % 2)`,
            `print(8 // 2)`,
            `print(8 / 2)`,
            `print(8 ** 2)`,
          ],
          ans: 0,
          exp: "8%2 is remainder of 8 divided by 2, which is 0.",
        },
        {
          q: "Which code prints 2.5 as the result?",
          opts: [
            `print(5 / 2)`,
            `print(5 // 2)`,
            `print(5 % 2)`,
            `print(2 ** 5)`,
          ],
          ans: 0,
          exp: "5/2 = 2.5 because / returns float.",
        },
        {
          q: "Which code prints 1 as the result?",
          opts: [
            `print(10 % 3)`,
            `print(10 // 3)`,
            `print(10 / 3)`,
            `print(3 ** 2)`,
          ],
          ans: 0,
          exp: "10%3 gives remainder 1.",
        },
        {
          q: "Which code prints 9 as the result?",
          opts: [
            `print((2 + 1) ** 2)`,
            `print(2 + 1 ** 2)`,
            `print(2 ** 1 + 2)`,
            `print(2 ** (1 + 1))`,
          ],
          ans: 0,
          exp: "(2+1)**2 = 3**2 = 9. In option B, 1**2=1 so 2+1=3.",
        },

        // ====== SVG / Flowchart (5)
        {
          q: "According to the precedence flowchart, which group is evaluated first?",
          svg: FLOW_PRECEDENCE,
          opts: ["+, -", "*, /, //, %", "**", "( )"],
          ans: 3,
          exp: "Parentheses ( ) are evaluated first.",
        },
        {
          q: "According to the flowchart, which is evaluated before + and - ?",
          svg: FLOW_PRECEDENCE,
          opts: ["( ) only", "**, then *, /, //, %", "Only **", "None"],
          ans: 1,
          exp: "After parentheses, exponent **, then multiplication/division group, then + and -.",
        },
        {
          q: "Using precedence, what is the value of: 6 + 4 * 2 ?",
          svg: FLOW_PRECEDENCE,
          opts: ["20", "14", "10", "16"],
          ans: 1,
          exp: "4*2=8 first, then 6+8=14.",
        },
        {
          q: "Which expression equals 512?",
          svg: FLOW_PRECEDENCE,
          opts: ["(2**3)**2", "2**(3**2)", "(2**2)**3", "2**3*2"],
          ans: 1,
          exp: "2**(3**2)=2**9=512. (2**3)**2=8**2=64.",
        },
        {
          q: "Which operator is right-associative in Python arithmetic?",
          svg: FLOW_PRECEDENCE,
          opts: ["*", "/", "**", "%"],
          ans: 2,
          exp: "Exponentiation ** is right-associative: a**b**c means a**(b**c).",
        },

        // ====== Theory (5)
        {
          q: "Which operator gives the remainder?",
          opts: ["//", "%", "/", "**"],
          ans: 1,
          exp: "% returns the remainder of division.",
        },
        {
          q: "What does // do in Python?",
          opts: ["Power", "Remainder", "Floor division", "Normal division"],
          ans: 2,
          exp: "// performs floor division (quotient rounded down).",
        },
        {
          q: "In Python 3, what is the type of 5/2?",
          opts: ["int", "float", "str", "bool"],
          ans: 1,
          exp: "/ always produces a float in Python 3.",
        },
        {
          q: "Which statement is true about operator precedence?",
          opts: [
            "Addition happens before multiplication",
            "Multiplication happens before addition",
            "All operators have same precedence",
            "Remainder happens last always",
          ],
          ans: 1,
          exp: "* has higher precedence than +, so multiplication happens first.",
        },
        {
          q: "Which of these is exponentiation?",
          opts: ["^", "**", "//", "%%"],
          ans: 1,
          exp: "Python uses ** for exponentiation (not ^).",
        },

        // ====== Programming Logic (5)
        {
          q: "What is the output?",
          code: `print(-7 // 2)`,
          opts: ["-3", "-4", "3", "4"],
          ans: 1,
          exp: "Floor division rounds down toward -infinity. -7/2=-3.5, floor is -4.",
        },
        {
          q: "What is the output?",
          code: `print(-7 % 2)`,
          opts: ["-1", "1", "0", "-3"],
          ans: 1,
          exp: "In Python, a%b has the sign of b (the divisor). -7 % 2 = 1 because (-4)*2 + 1 = -7.",
        },
        {
          q: "Which prints True?",
          opts: [
            `print((a+b) == a + b)`,
            `print((a+b) == a - b)`,
            `print((a*b) == a + b)`,
            `print((a//b) == a / b)`,
          ],
          ans: 0,
          exp: "(a+b) equals a+b always. Other relations are not generally true.",
        },
        {
          q: "What is the result of: 3 * (2 + 4) // 3 ?",
          opts: ["6", "5", "4", "3"],
          ans: 0,
          exp: "(2+4)=6, 3*6=18, 18//3=6.",
        },
        {
          q: "What is the output?",
          code: `x = 5
x += 3
x *= 2
print(x)`,
          opts: ["11", "16", "13", "Error"],
          ans: 1,
          exp: "Start x=5. x+=3 -> 8. x*=2 -> 16.",
        },
      ];

      // Remove accidental duplicate incorrect question (we inserted a fixed one).
      // We'll filter it out safely by removing the one with the known wrong explanation marker.
      const BANK_FIXED = BANK.filter(
        (q) => !(q.exp && q.exp.includes("Wait!"))
      );

      const ASSIGNMENTS = [
        "Build a calculator that takes two numbers and prints sum, difference, product, quotient (/), floor quotient (//), remainder (%), and power (**).",
        "Given total seconds, convert into hours, minutes, seconds using // and %.",
        "Ask user for marks out of 500 and print percentage (use /) and grade using if/elif/else.",
        "Compute compound interest: A = P * (1 + r/100) ** t. Take P,r,t from input.",
        "Given an integer n, print whether it is even or odd using %.",
      ];

      let quiz = [];
      let submitted = false;

      /* ---------------- Build Quiz ---------------- */
      function buildQuiz() {
        submitted = false;

        const scoreEl = document.getElementById("score");
        const metaEl = document.getElementById("meta");
        const submitBtn = document.getElementById("submitBtn");

        scoreEl.textContent = "Not submitted";
        metaEl.textContent = "";
        submitBtn.disabled = false;

        quiz = shuffle(BANK_FIXED).map((q) => {
          const correctText = q.opts[q.ans];
          const shuffledOpts = shuffle(q.opts);
          return {
            ...q,
            opts: shuffledOpts,
            ans: shuffledOpts.indexOf(correctText),
          };
        });

        const box = document.getElementById("quiz");
        let out = "";

        quiz.forEach((q, i) => {
          out += `<div class="q">
      <b>Q${i + 1}. ${esc(q.q)}</b>`;

          if (q.code) out += `<pre>${esc(q.code)}</pre>`;
          if (q.svg) out += q.svg;

          out += `<div class="options">`;
          q.opts.forEach((o, j) => {
            const L = String.fromCharCode(65 + j);
            out += `<label class="opt" id="o${i}_${j}">
        <input type="radio" name="q${i}" value="${j}" />
        <div><b>${L}.</b> ${renderMaybePre(o)}</div>
      </label>`;
          });

          out += `</div>
      <div class="answerBox" id="a${i}" style="display:none"></div>
    </div>`;
        });

        out += `<hr>
    <div class="assignment">
      <b>üìù Programming Assignments (Not Graded)</b>
      <ol>${ASSIGNMENTS.map((a) => `<li>${esc(a)}</li>`).join("")}</ol>

      <div class="editorWrap">
        <div class="editorCard">
          <div class="editorTop">
            <div class="selectRow" style="min-width:280px;flex:1">
              <label style="font-weight:900;color:#92400e;">Choose assignment template:</label>
              <select id="asSelect" aria-label="Choose assignment template"></select>
            </div>
            <div style="display:flex;gap:10px;flex-wrap:wrap;align-items:center">
              <span class="statusPill" id="pyStatus"><span class="dot"></span> Pyodide loading‚Ä¶</span>
              <button class="btn secondary" id="clearBtn" type="button">üßπ Clear</button>
              <button class="btn" id="runBtn" type="button" disabled>‚ñ∂ Run Python</button>
            </div>
          </div>
          <div class="note">Write Python and click <b>Run</b>. (Shortcut: <b>Ctrl+Enter</b>)</div>
          <textarea id="codeEditor" spellcheck="false"></textarea>
          <div class="kbdHint"></div>
        </div>

        <div class="editorCard">
          <div style="font-weight:900;color:#92400e;margin-bottom:8px">Output</div>
          <div class="outBox" id="pyOut">(Output will appear here)</div>
        </div>
      </div>
    </div>`;

        box.innerHTML = out;

        document
          .querySelectorAll("input[type=radio]")
          .forEach((r) => (r.disabled = false));
        setupPyEditor();
        window.scrollTo({ top: 0, behavior: "smooth" });
      }

      /* ---------------- Submit Quiz ---------------- */
      function submitQuiz() {
        if (submitted) return;
        submitted = true;

        let score = 0;
        let attempted = 0;

        quiz.forEach((q, i) => {
          const sel = document.querySelector(`input[name="q${i}"]:checked`);
          const chosen = sel ? Number(sel.value) : null;
          if (chosen !== null) attempted++;

          q.opts.forEach((_, j) => {
            const lab = document.getElementById(`o${i}_${j}`);
            lab.classList.add("dim");
            lab.querySelectorAll(".badge").forEach((b) => b.remove());

            if (j === q.ans) {
              lab.classList.add("correct");
              lab.insertAdjacentHTML(
                "beforeend",
                ` <span class="badge ok">Correct</span>`
              );
            }
            if (chosen !== null && chosen === j) {
              lab.insertAdjacentHTML(
                "beforeend",
                ` <span class="badge me">Your choice</span>`
              );
              if (chosen !== q.ans) {
                lab.classList.add("wrong");
                lab.insertAdjacentHTML(
                  "beforeend",
                  ` <span class="badge bad">Wrong</span>`
                );
              }
            }
          });

          if (chosen !== null && chosen === q.ans) score++;

          const ab = document.getElementById(`a${i}`);
          ab.style.display = "block";

          const your = chosen === null ? "Not attempted" : quiz[i].opts[chosen];
          const correct = quiz[i].opts[quiz[i].ans];

          ab.innerHTML = `<b>Your Answer:</b> ${renderMaybePre(your)}<br>
       <b>Correct Answer:</b> ${renderMaybePre(correct)}<br>
       <b>Explanation:</b> ${esc(quiz[i].exp)}`;
        });

        document.getElementById(
          "score"
        ).textContent = `Score: ${score} / ${quiz.length}`;
        document.getElementById(
          "meta"
        ).textContent = `Attempted: ${attempted} / ${
          quiz.length
        } ‚Ä¢ Unattempted: ${quiz.length - attempted}`;
        document.getElementById("submitBtn").disabled = true;

        document
          .querySelectorAll("input[type=radio]")
          .forEach((r) => (r.disabled = true));
        document
          .getElementById("score")
          .scrollIntoView({ behavior: "smooth", block: "start" });
      }

      /* ==================== Pyodide Editor ==================== */
      let pyodideReady = null;
      let _pyodide = null;

      function setPyStatus(text, kind) {
        const el = document.getElementById("pyStatus");
        if (!el) return;
        el.innerHTML = `<span class="dot ${kind || ""}"></span> ${esc(text)}`;
      }

      function getAssignmentTemplates() {
        return [
          {
            title: "Assignment 1: Full Calculator",
            code: `# Assignment 1: Calculator using arithmetic operators
a = float(input("Enter first number: "))
b = float(input("Enter second number: "))

print("a + b =", a + b)
print("a - b =", a - b)
print("a * b =", a * b)
print("a / b =", a / b)
print("a // b =", a // b)
print("a % b =", a % b)
print("a ** b =", a ** b)
`,
          },
          {
            title: "Assignment 2: Convert Seconds -> H:M:S",
            code: `# Assignment 2: Convert total seconds into hours, minutes, seconds
total = int(input("Enter total seconds: "))

hours = total // 3600
rem = total % 3600
minutes = rem // 60
seconds = rem % 60

print("Hours:", hours)
print("Minutes:", minutes)
print("Seconds:", seconds)
`,
          },
          {
            title: "Assignment 3: Percentage + Grade",
            code: `# Assignment 3: Percentage and grade
total = int(input("Enter marks out of 500: "))
percent = (total / 500) * 100
print("Percentage:", percent)

# Grade example:
# >= 90 A, >= 60 B else Fail
if percent >= 90:
    print("Grade A")
elif percent >= 60:
    print("Grade B")
else:
    print("Fail")
`,
          },
          {
            title: "Assignment 4: Compound Interest",
            code: `# Assignment 4: Compound interest A = P*(1 + r/100)**t
P = float(input("Enter principal P: "))
r = float(input("Enter rate r (%): "))
t = float(input("Enter time t (years): "))

A = P * (1 + r/100) ** t
print("Amount A =", A)
`,
          },
          {
            title: "Assignment 5: Even/Odd using %",
            code: `# Assignment 5: Even or odd
n = int(input("Enter integer: "))
if n % 2 == 0:
    print("Even")
else:
    print("Odd")
`,
          },
        ];
      }

      function setupPyEditor() {
        const select = document.getElementById("asSelect");
        const editor = document.getElementById("codeEditor");
        const runBtn = document.getElementById("runBtn");
        const clearBtn = document.getElementById("clearBtn");
        const outBox = document.getElementById("pyOut");

        if (!select || !editor || !runBtn || !outBox) return;

        const templates = getAssignmentTemplates();
        select.innerHTML = templates
          .map((t, i) => `<option value="${i}">${esc(t.title)}</option>`)
          .join("");
        editor.value = templates[0].code;

        select.addEventListener("change", () => {
          const idx = Number(select.value);
          editor.value = templates[idx].code;
          outBox.textContent = "(Output will appear here)";
        });

        clearBtn.addEventListener("click", () => {
          editor.value = "";
          outBox.textContent = "";
        });

        editor.addEventListener("keydown", (e) => {
          if ((e.ctrlKey || e.metaKey) && e.key === "Enter") {
            e.preventDefault();
            runBtn.click();
          }
        });

        if (!pyodideReady) {
          pyodideReady = (async () => {
            try {
              setPyStatus("Pyodide loading‚Ä¶", "");
              _pyodide = await loadPyodide({
                indexURL: "https://cdn.jsdelivr.net/pyodide/v0.25.1/full/",
              });

              await _pyodide.runPythonAsync(`
import sys, io, builtins, traceback

class _JSWriter(io.StringIO):
    pass

def _run_user(code, input_data=""):
    out = _JSWriter()
    err = _JSWriter()
    old_out, old_err = sys.stdout, sys.stderr
    sys.stdout, sys.stderr = out, err

    old_input = builtins.input
    it = iter(input_data.splitlines())
    def _input(prompt=""):
        try:
            return next(it)
        except StopIteration:
            raise EOFError("No more input provided.")
    builtins.input = _input

    try:
        exec(code, {})
    except Exception:
        traceback.print_exc()
    finally:
        builtins.input = old_input
        sys.stdout, sys.stderr = old_out, old_err

    combined = out.getvalue()
    if err.getvalue():
        combined += ("\\n" if combined and not combined.endswith("\\n") else "") + err.getvalue()
    return combined
        `);

              setPyStatus("Pyodide ready", "ok");
              runBtn.disabled = false;
            } catch (e) {
              console.error(e);
              setPyStatus("Pyodide failed to load", "bad");
              runBtn.disabled = true;
            }
          })();
        }

        runBtn.onclick = async () => {
          outBox.textContent = "Running‚Ä¶";
          runBtn.disabled = true;
          try {
            await pyodideReady;
            if (!_pyodide) throw new Error("Pyodide not available.");

            const code = editor.value || "";
            const wantsInput = /input\s*\(/.test(code);
            let inputData = "";
            if (wantsInput) {
              inputData =
                prompt(
                  "This code uses input().\nEnter input lines (use \\n for new lines):",
                  ""
                ) || "";
              inputData = inputData.replace(/\\n/g, "\n");
            }

            _pyodide.globals.set("__USER_CODE__", code);
            _pyodide.globals.set("__USER_INPUT__", inputData);

            const result = await _pyodide.runPythonAsync(
              `_run_user(__USER_CODE__, __USER_INPUT__)`
            );
            outBox.textContent = result ? String(result) : "(No output)";
          } catch (err) {
            outBox.textContent =
              "Error: " + (err && err.message ? err.message : String(err));
          } finally {
            runBtn.disabled = false;
          }
        };
      }

      /* ---------------- Init ---------------- */
      buildQuiz();
    </script>
  </body>
</html>
