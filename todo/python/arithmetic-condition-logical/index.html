<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Python Mega Test ‚Äî Arithmetic + Comparison + Logical Operators</title>
<meta name="author" content="Champak Roy" />
<style>
:root{
  --bg:#fffaf2;--card:#fff;--ink:#1f2937;--muted:#6b7280;
  --brand:#d97706;--brand2:#f59e0b;--border:#e5e7eb;
  --ok:#059669;--bad:#dc2626;--shadow:0 10px 28px rgba(0,0,0,.10)
}
*{box-sizing:border-box}
body{margin:0;font-family:system-ui,Segoe UI,Roboto,Arial,sans-serif;background:var(--bg);color:var(--ink)}
.container{max-width:1150px;margin:auto;padding:18px}
.hero{background:linear-gradient(135deg,#fff4dc,#ffe8b5);border:1px solid #fde68a;border-radius:18px;box-shadow:var(--shadow);padding:18px}
h1{margin:0;color:#92400e}
.sub{color:var(--muted);font-size:14px;margin-top:6px}
.card{background:var(--card);border:1px solid var(--border);border-radius:16px;box-shadow:0 6px 18px rgba(0,0,0,.06);padding:16px;margin-top:16px}
.q{border:1px solid var(--border);border-radius:14px;padding:14px;margin:16px 0}
.options{display:grid;gap:8px;margin-top:8px}
.opt{display:flex;gap:10px;align-items:flex-start;padding:10px 12px;border-radius:12px;border:1px solid var(--border);transition:.15s}
.opt:hover{border-color:#f59e0b}
.opt input{margin-top:4px}
.correct{background:#f0fdf4;border-color:#86efac}
.wrong{background:#fff1f2;border-color:#fecaca}
.dim{opacity:.9}
.badge{font-size:12px;font-weight:900;padding:3px 8px;border-radius:999px;border:1px solid var(--border);margin-left:6px;white-space:nowrap}
.badge.ok{color:var(--ok);background:#f0fdf4;border-color:#86efac}
.badge.bad{color:var(--bad);background:#fff1f2;border-color:#fecaca}
.badge.me{color:#92400e;background:#fffbeb;border-color:#fde68a}
pre{background:#0b1220;color:#f9fafb;padding:10px;border-radius:10px;overflow:auto;margin:6px 0 0;font-size:14px;line-height:1.35}
.answerBox{margin-top:12px;padding:12px;border-radius:12px;border:1px dashed var(--border);background:#fffbeb;font-size:14px;line-height:1.5}
.assignment{background:#fff7ed;border-left:6px solid var(--brand2);padding:14px;border-radius:12px;margin-top:12px}
.btnRow{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
.btn{padding:12px 18px;border-radius:12px;border:none;font-weight:900;cursor:pointer;background:linear-gradient(145deg,var(--brand),var(--brand2));color:#fff}
.btn.secondary{background:#fff;color:#92400e;border:1px solid var(--border)}
.btn:disabled{opacity:.6;cursor:not-allowed}
.score{font-size:22px;font-weight:900;color:#92400e}
.note{font-size:13px;color:var(--muted);margin-top:6px}
hr{border:none;border-top:1px solid var(--border);margin:14px 0}

/* Pyodide editor */
.editorWrap{display:grid;gap:12px;margin-top:12px}
@media (min-width: 980px){ .editorWrap{grid-template-columns:1.1fr .9fr;align-items:start} }
.editorCard{background:#fff;border:1px solid var(--border);border-radius:14px;padding:12px;box-shadow:0 6px 18px rgba(0,0,0,.05)}
.editorTop{display:flex;gap:10px;flex-wrap:wrap;align-items:center;justify-content:space-between}
.selectRow{display:flex;gap:10px;flex-wrap:wrap;align-items:center;min-width:280px;flex:1}
select, textarea{width:100%;font:14px ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}
select{border:1px solid var(--border);border-radius:10px;padding:10px;background:#fff}
textarea{min-height:280px;border:1px solid var(--border);border-radius:12px;padding:12px;background:#fffbeb;outline:none;resize:vertical}
.outBox{min-height:280px;background:#0b1220;color:#f9fafb;border-radius:12px;padding:12px;overflow:auto;border:1px solid #111827;font:14px ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;white-space:pre-wrap}
.kbdHint{font-size:12px;color:var(--muted)}
.statusPill{display:inline-flex;align-items:center;gap:8px;padding:6px 10px;border-radius:999px;border:1px solid var(--border);background:#fffbeb;color:#92400e;font-weight:800;font-size:12px}
.dot{width:8px;height:8px;border-radius:50%;background:#f59e0b;display:inline-block}
.dot.ok{background:var(--ok)} .dot.bad{background:var(--bad)}
</style>
</head>
<body>
<div class="container">
  <div class="hero">
    <h1>Python Mega Test ‚Äî Operators</h1>
    <div class="sub">45 MCQs ‚Ä¢ Arithmetic (+ - * / // % **) + Comparison (== != &gt; &lt; &gt;= &lt;=) + Logical (and/or/not)</div>
    <div class="btnRow">
      <button class="btn secondary" onclick="buildQuiz()">üîÄ New Test</button>
      <button class="btn" id="submitBtn" onclick="submitQuiz()">‚úÖ Submit Test</button>
    </div>
    <div class="note">Questions and options are randomized every time.</div>
  </div>

  <div class="card" id="quiz"></div>

  <div class="card">
    <div class="score" id="score">Not submitted</div>
    <div class="note" id="meta"></div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/pyodide/v0.25.1/full/pyodide.js"></script>
<script>
function shuffle(arr){ const a=arr.slice(); for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1)); [a[i],a[j]]=[a[j],a[i]];} return a; }
function esc(s){ return String(s).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"); }
function isCodeLike(t){
  const s=String(t);
  if(s.includes("\n")) return true;
  return /(\band\b|\bor\b|\bnot\b|==|!=|>=|<=|>|<|\bprint\(|\bif\b|\bTrue\b|\bFalse\b|\/\/|%|\*\*|\+|\-|\*|\/)/.test(s.trim());
}
function renderMaybePre(t){ const safe=esc(t); return isCodeLike(t) ? `<pre>${safe}</pre>` : safe; }

/* 45 questions total: 15 arithmetic, 15 comparison, 15 logical (mix of output & concept) */
const BANK = [
/* Arithmetic (15) */
{q:"Output?", code:`print(10 + 3 * 2)`, opts:["26","16","13","Error"], ans:1, exp:"3*2=6, then 10+6=16."},
{q:"Output?", code:`print(7 / 2)`, opts:["3","3.5","4","Error"], ans:1, exp:"/ gives float ‚Üí 3.5."},
{q:"Output?", code:`print(7 // 2)`, opts:["3.5","3","4","Error"], ans:1, exp:"// is floor division ‚Üí 3."},
{q:"Output?", code:`print(7 % 2)`, opts:["0","1","2","3"], ans:1, exp:"Remainder of 7/2 is 1."},
{q:"Output?", code:`print(2 ** 3 ** 2)`, opts:["64","512","256","16"], ans:1, exp:"Right-associative: 2**(3**2)=2**9=512."},
{q:"Output?", code:`print(-7 // 2)`, opts:["-3","-4","3","4"], ans:1, exp:"Floor division rounds down: -3.5 ‚Üí -4."},
{q:"Output?", code:`print(-7 % 2)`, opts:["-1","1","0","-3"], ans:1, exp:"Python keeps remainder with divisor sign: (-4)*2+1=-7."},
{q:"Which equals 9?", opts:["(2+1)**2","2+1**2","2**(1+1)+1","(2**2)+2"], ans:0, exp:"(2+1)**2 = 9."},
{q:"What is 18//5?", opts:["3","3.6","4","5"], ans:0, exp:"18//5 = 3 (floor)."},
{q:"What is 18%5?", opts:["3","4","5","0"], ans:0, exp:"18%5 = 3 remainder."},
{q:"Output?", code:`x=5\nx+=3\nx*=2\nprint(x)`, opts:["11","16","13","Error"], ans:1, exp:"x=5‚Üí8‚Üí16."},
{q:"Which gives float result always (Py3)?", opts:["/","//","%","**"], ans:0, exp:"/ always returns float in Python 3."},
{q:"Output?", code:`print((8-3)*2)`, opts:["10","5","16","Error"], ans:0, exp:"(8-3)=5, *2 = 10."},
{q:"Output?", code:`print(5 + 4 // 2)`, opts:["7","9","5","Error"], ans:1, exp:"4//2=2, then 5+2=7. (Careful: correct is 7)"},
{q:"Output?", code:`print(3*2**2)`, opts:["12","36","9","6"], ans:0, exp:"Exponent first: 2**2=4, then 3*4=12."},

/* Comparison (15) */
{q:"Output?", code:`print(5 > 3)`, opts:["True","False","Error","None"], ans:0, exp:"5>3 True."},
{q:"Output?", code:`print(10 == 5)`, opts:["True","False","10","Error"], ans:1, exp:"10!=5 so False."},
{q:"Output?", code:`print(7 != 7)`, opts:["True","False","None","Error"], ans:1, exp:"7 not-equal 7 is False."},
{q:"Output?", code:`print(4 >= 4)`, opts:["True","False","Error","None"], ans:0, exp:"Equal allowed ‚Üí True."},
{q:"Output?", code:`print('10' == 10)`, opts:["True","False","Error","None"], ans:1, exp:"Different types, not equal ‚Üí False."},
{q:"Output?", code:`x=8\nprint(5 < x <= 10)`, opts:["True","False","Error","None"], ans:0, exp:"Chained: 5<x and x<=10."},
{q:"Which is correct equality operator?", opts:["=","==","===","<>"], ans:1, exp:"Python uses ==."},
{q:"Which means not equal?", opts:["!=","<>","!","=/="], ans:0, exp:"!= in Python."},
{q:"Output?", code:`print(True == 1)`, opts:["True","False","Error","None"], ans:0, exp:"True acts like 1 in numeric comparisons."},
{q:"Output?", code:`print(False == 0)`, opts:["True","False","Error","None"], ans:0, exp:"False acts like 0."},
{q:"Which checks between 18 and 60 inclusive?", opts:["age>=18 and age<=60","age>=18 or age<=60","18<=age<=60","Both A and C"], ans:3, exp:"Both A and chained C are correct."},
{q:"Output?", code:`print(2 < 3 > 4)`, opts:["True","False","Error","None"], ans:1, exp:"2<3 True but 3>4 False ‚Üí False."},
{q:"Output?", code:`print('a' < 'b')`, opts:["True","False","Error","None"], ans:0, exp:"Lexicographic comparison: a before b."},
{q:"Which is NOT comparison?", opts:["<=",">=","+=","!="], ans:2, exp:"+= is assignment."},
{q:"Comparison returns type?", opts:["int","str","bool","float"], ans:2, exp:"Comparisons return bool."},

/* Logical (15) */
{q:"Output?", code:`print(True and False)`, opts:["True","False","Error","None"], ans:1, exp:"True and False ‚Üí False."},
{q:"Output?", code:`print(True or False)`, opts:["True","False","Error","None"], ans:0, exp:"True or False ‚Üí True."},
{q:"Output?", code:`print(not True)`, opts:["True","False","Error","None"], ans:1, exp:"not True ‚Üí False."},
{q:"Output?", code:`print(0 and 5)`, opts:["0","5","False","True"], ans:0, exp:"and returns first falsy operand: 0."},
{q:"Output?", code:`print(0 or 5)`, opts:["0","5","False","True"], ans:1, exp:"or returns first truthy operand: 5."},
{q:"Output?", code:`print("" or "Hi")`, opts:["","Hi","False","True"], ans:1, exp:"Empty string falsy ‚Üí returns 'Hi'."},
{q:"Output?", code:`print("Hi" and "Bye")`, opts:["Hi","Bye","True","False"], ans:1, exp:"Both truthy ‚Üí returns last operand 'Bye'."},
{q:"Which has highest precedence?", opts:["or","and","not","All same"], ans:2, exp:"not > and > or."},
{q:"Output?", code:`print(True or False and False)`, opts:["True","False","Error","None"], ans:0, exp:"and first: False and False ‚Üí False; then True or False ‚Üí True."},
{q:"Output?", code:`print((True or False) and False)`, opts:["True","False","Error","None"], ans:1, exp:"(True or False)=True; True and False=False."},
{q:"Equivalent of not(a and b)?", opts:["(not a) and (not b)","(not a) or (not b)","a or b","a and b"], ans:1, exp:"De Morgan: not(a and b) == (not a) or (not b)."},
{q:"Equivalent of not(a or b)?", opts:["(not a) and (not b)","(not a) or (not b)","a and b","a or b"], ans:0, exp:"De Morgan: not(a or b) == (not a) and (not b)."},
{q:"Which is correct in Python?", opts:["a && b","a and b","a || b","!a"], ans:1, exp:"Python uses keywords: and/or/not."},
{q:"What is bool('')?", opts:["True","False","Error","None"], ans:1, exp:"Empty string is falsy."},
{q:"Common mistake fix: check x is 1 or 2", opts:["if x==1 or x==2:","if x==1 or 2:","if x in (1,2):","Both A and C"], ans:3, exp:"A and C are correct. 'x==1 or 2' is wrong."}
];

/* small fix: one arithmetic question explanation comment: ensure correct answer */
(function fixOne(){
  // The item "print(5 + 4 // 2)" should be 7; our options include 7 at index 0 or 1?
  // opts were ["7","9","5","Error"], answer should be 0.
  for(const q of BANK){
    if(q.code && q.code.trim() === "print(5 + 4 // 2)"){
      q.ans = 0;
      q.exp = "4//2 = 2, then 5+2 = 7.";
    }
  }
})();

const ASSIGNMENTS = [
  "Build a mini calculator that also checks if the result is in range (0<=result<100) using comparisons.",
  "Input a,b. Print True if (a is even) AND (b is odd) using % and and.",
  "Input marks and attendance. Pass if marks>=40 AND attendance>=75; else Fail.",
  "Input x. Print 'Valid' if (x is between 10 and 99) OR (x is exactly 0).",
  "Input year. Check leap year AND also check if year>=1900."
];

let quiz=[], submitted=false;

function buildQuiz(){
  submitted=false;
  document.getElementById('score').textContent='Not submitted';
  document.getElementById('meta').textContent='';
  document.getElementById('submitBtn').disabled=false;

  quiz = shuffle(BANK).map(q=>{
    const c=q.opts[q.ans];
    const o=shuffle(q.opts);
    return {...q, opts:o, ans:o.indexOf(c)};
  });

  const box=document.getElementById('quiz');
  let out='';

  quiz.forEach((q,i)=>{
    out += `<div class="q"><b>Q${i+1}. ${esc(q.q)}</b>`;
    if(q.code) out += `<pre>${esc(q.code)}</pre>`;
    out += `<div class="options">`;
    q.opts.forEach((o,j)=>{
      const L=String.fromCharCode(65+j);
      out += `<label class="opt" id="o${i}_${j}">
        <input type="radio" name="q${i}" value="${j}">
        <div><b>${L}.</b> ${renderMaybePre(o)}</div>
      </label>`;
    });
    out += `</div><div class="answerBox" id="a${i}" style="display:none"></div></div>`;
  });

  out += `<hr>
  <div class="assignment">
    <b>üìù Mega Assignments (Not Graded)</b>
    <ol>${ASSIGNMENTS.map(a=>`<li>${esc(a)}</li>`).join('')}</ol>

    <div class="editorWrap">
      <div class="editorCard">
        <div class="editorTop">
          <div class="selectRow">
            <label style="font-weight:900;color:#92400e;">Choose assignment template:</label>
            <select id="asSelect" aria-label="Choose assignment template"></select>
          </div>
          <div style="display:flex;gap:10px;flex-wrap:wrap;align-items:center">
            <span class="statusPill" id="pyStatus"><span class="dot"></span> Pyodide loading‚Ä¶</span>
            <button class="btn secondary" id="clearBtn" type="button">üßπ Clear</button>
            <button class="btn" id="runBtn" type="button" disabled>‚ñ∂ Run Python</button>
          </div>
        </div>
        <div class="note">Shortcut: <b>Ctrl+Enter</b></div>
        <textarea id="codeEditor" spellcheck="false"></textarea>
        <div class="kbdHint">If your code uses <code>input()</code>, you‚Äôll be prompted for input lines.</div>
      </div>
      <div class="editorCard">
        <div style="font-weight:900;color:#92400e;margin-bottom:8px">Output</div>
        <div class="outBox" id="pyOut">(Output will appear here)</div>
      </div>
    </div>
  </div>`;

  box.innerHTML=out;
  document.querySelectorAll('input[type=radio]').forEach(r=>r.disabled=false);
  setupPyEditor();
  window.scrollTo({top:0, behavior:"smooth"});
}

function submitQuiz(){
  if(submitted) return;
  submitted=true;
  let score=0, attempted=0;

  quiz.forEach((q,i)=>{
    const sel=document.querySelector(`input[name="q${i}"]:checked`);
    const chosen=sel?Number(sel.value):null;
    if(chosen!==null) attempted++;

    q.opts.forEach((_,j)=>{
      const lab=document.getElementById(`o${i}_${j}`);
      lab.classList.add('dim');
      lab.querySelectorAll('.badge').forEach(b=>b.remove());

      if(j===q.ans){
        lab.classList.add('correct');
        lab.insertAdjacentHTML('beforeend',` <span class="badge ok">Correct</span>`);
      }
      if(chosen!==null && chosen===j){
        lab.insertAdjacentHTML('beforeend',` <span class="badge me">Your choice</span>`);
        if(chosen!==q.ans){
          lab.classList.add('wrong');
          lab.insertAdjacentHTML('beforeend',` <span class="badge bad">Wrong</span>`);
        }
      }
    });

    if(chosen!==null && chosen===q.ans) score++;

    const ab=document.getElementById(`a${i}`);
    ab.style.display='block';
    const your = chosen===null ? "Not attempted" : q.opts[chosen];
    const correct = q.opts[q.ans];
    ab.innerHTML = `<b>Your Answer:</b> ${renderMaybePre(your)}<br>
                    <b>Correct Answer:</b> ${renderMaybePre(correct)}<br>
                    <b>Explanation:</b> ${esc(q.exp)}`;
  });

  document.getElementById('score').textContent=`Score: ${score} / ${quiz.length}`;
  document.getElementById('meta').textContent=`Attempted: ${attempted} / ${quiz.length} ‚Ä¢ Unattempted: ${quiz.length-attempted}`;
  document.getElementById('submitBtn').disabled=true;
  document.querySelectorAll('input[type=radio]').forEach(r=>r.disabled=true);
  document.getElementById('score').scrollIntoView({behavior:"smooth", block:"start"});
}

/* ===== Pyodide Editor ===== */
let pyodideReady=null, _pyodide=null;
function setPyStatus(text, kind){
  const el=document.getElementById('pyStatus');
  if(!el) return;
  el.innerHTML=`<span class="dot ${kind||""}"></span> ${esc(text)}`;
}
function getAssignmentTemplates(){
  return [
    { title:"Assignment 1: Calculator + range check", code:
`a = float(input("a: "))
b = float(input("b: "))
op = input("op (+,-,*,/,//,%,**): ").strip()

# compute
if op == "+":
    r = a + b
elif op == "-":
    r = a - b
elif op == "*":
    r = a * b
elif op == "/":
    r = a / b
elif op == "//":
    r = a // b
elif op == "%":
    r = a % b
elif op == "**":
    r = a ** b
else:
    print("Invalid operator")
    raise SystemExit

print("result =", r)

# comparison check
if 0 <= r < 100:
    print("Result in range 0..99")
else:
    print("Result out of range")
`},
    { title:"Assignment 2: (a even) AND (b odd)", code:
`a = int(input("a: "))
b = int(input("b: "))
print((a % 2 == 0) and (b % 2 == 1))
`},
    { title:"Assignment 3: Pass rule", code:
`marks = int(input("Marks: "))
att = int(input("Attendance %: "))
if marks >= 40 and att >= 75:
    print("Pass")
else:
    print("Fail")
`},
    { title:"Assignment 4: Valid number", code:
`x = int(input("x: "))
if (10 <= x <= 99) or (x == 0):
    print("Valid")
else:
    print("Invalid")
`},
    { title:"Assignment 5: Leap year AND year>=1900", code:
`y = int(input("Year: "))
is_leap = (y % 400 == 0) or (y % 4 == 0 and y % 100 != 0)

if is_leap and y >= 1900:
    print("Leap year (>=1900)")
elif is_leap:
    print("Leap year (<1900)")
else:
    print("Not leap year")
`}
  ];
}
function setupPyEditor(){
  const select=document.getElementById('asSelect');
  const editor=document.getElementById('codeEditor');
  const runBtn=document.getElementById('runBtn');
  const clearBtn=document.getElementById('clearBtn');
  const outBox=document.getElementById('pyOut');
  if(!select||!editor||!runBtn||!outBox) return;

  const templates=getAssignmentTemplates();
  select.innerHTML=templates.map((t,i)=>`<option value="${i}">${esc(t.title)}</option>`).join('');
  editor.value=templates[0].code;

  select.onchange=()=>{ editor.value=templates[Number(select.value)].code; outBox.textContent="(Output will appear here)"; };
  clearBtn.onclick=()=>{ editor.value=""; outBox.textContent=""; };
  editor.addEventListener('keydown',(e)=>{ if((e.ctrlKey||e.metaKey)&&e.key==='Enter'){ e.preventDefault(); runBtn.click(); } });

  if(!pyodideReady){
    pyodideReady=(async ()=>{
      try{
        setPyStatus("Pyodide loading‚Ä¶","");
        _pyodide=await loadPyodide({indexURL:"https://cdn.jsdelivr.net/pyodide/v0.25.1/full/"});
        await _pyodide.runPythonAsync(`
import sys, io, builtins, traceback
class _JSWriter(io.StringIO): pass
def _run_user(code, input_data=""):
    out=_JSWriter(); err=_JSWriter()
    old_out, old_err = sys.stdout, sys.stderr
    sys.stdout, sys.stderr = out, err

    old_input = builtins.input
    it = iter(input_data.splitlines())
    def _input(prompt=""):
        try: return next(it)
        except StopIteration: raise EOFError("No more input provided.")
    builtins.input = _input

    try: exec(code, {})
    except Exception: traceback.print_exc()
    finally:
        builtins.input = old_input
        sys.stdout, sys.stderr = old_out, old_err

    combined = out.getvalue()
    if err.getvalue():
        combined += ("\\n" if combined and not combined.endswith("\\n") else "") + err.getvalue()
    return combined
        `);
        setPyStatus("Pyodide ready","ok");
        runBtn.disabled=false;
      }catch(e){
        console.error(e);
        setPyStatus("Pyodide failed to load","bad");
        runBtn.disabled=true;
      }
    })();
  }

  runBtn.onclick=async ()=>{
    outBox.textContent="Running‚Ä¶";
    runBtn.disabled=true;
    try{
      await pyodideReady;
      const code=editor.value||"";
      const wantsInput=/input\s*\(/.test(code);
      let inputData="";
      if(wantsInput){
        inputData=(prompt("This code uses input().\\nEnter input lines (use \\\\n for new lines):","")||"").replace(/\\n/g,"\n");
      }
      _pyodide.globals.set("__USER_CODE__",code);
      _pyodide.globals.set("__USER_INPUT__",inputData);
      const res=await _pyodide.runPythonAsync(`_run_user(__USER_CODE__, __USER_INPUT__)`);
      outBox.textContent=res?String(res):"(No output)";
    }catch(err){
      outBox.textContent="Error: "+(err&&err.message?err.message:String(err));
    }finally{
      runBtn.disabled=false;
    }
  };
}

/* init */
buildQuiz();
</script>
</body>
</html>
