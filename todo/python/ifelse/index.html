<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Python MCQ Test ‚Äî if / elif / else (25 Questions)</title>
  <meta name="author" content="Champak Roy" />
  <style>
    :root{
      --bg:#fffaf2;          /* light saffron */
      --card:#ffffff;
      --ink:#1f2937;
      --muted:#6b7280;
      --brand:#d97706;
      --brand2:#f59e0b;
      --border:#e5e7eb;
      --ok:#059669;
      --bad:#dc2626;
      --warn:#b45309;
      --shadow:0 10px 28px rgba(0,0,0,.10);
      --r:18px;
      --mono:ui-monospace, Menlo, Consolas, "Liberation Mono", monospace;
      --sans:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
    }
    *{box-sizing:border-box}
    body{
      margin:0; font-family:var(--sans);
      background:var(--bg); color:var(--ink); line-height:1.7;
    }
    .container{max-width:1100px; margin:auto; padding:18px}
    .hero{
      background:linear-gradient(135deg,#fff4dc,#ffe8b5);
      border:1px solid #fde68a;
      border-radius:var(--r);
      box-shadow:var(--shadow);
      padding:18px;
      display:flex;
      gap:14px;
      align-items:flex-start;
      justify-content:space-between;
      flex-wrap:wrap;
    }
    .hero h1{margin:0; font-size:26px; color:#92400e}
    .hero p{margin:6px 0 0; color:#7c2d12; font-weight:700}
    .sub{color:var(--muted); font-size:14px; margin-top:8px; max-width:750px}
    .pill{
      display:inline-block;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid var(--border);
      background:#fff7ed;
      color:#7c2d12;
      font-size:12px;
      font-weight:900;
      letter-spacing:.2px;
    }
    .row{display:grid; grid-template-columns: 1.2fr .8fr; gap:16px; margin-top:16px}
    @media (max-width: 950px){ .row{grid-template-columns:1fr} }

    .card{
      background:var(--card);
      border:1px solid var(--border);
      border-radius:var(--r);
      box-shadow:0 6px 18px rgba(0,0,0,.06);
      padding:16px;
    }
    .controls{
      display:flex; gap:10px; flex-wrap:wrap; align-items:center;
      justify-content:space-between;
    }
    .btn{
      padding:10px 14px;
      border-radius:12px;
      border:none;
      cursor:pointer;
      font-weight:900;
      background:linear-gradient(145deg,var(--brand),var(--brand2));
      color:white;
      box-shadow:0 10px 22px rgba(217,119,6,.25);
    }
    .btn.secondary{
      background:#fff;
      color:#7c2d12;
      border:1px solid var(--border);
      box-shadow:none;
    }
    .btn:disabled{opacity:.55; cursor:not-allowed}
    .stats{
      display:flex; gap:10px; flex-wrap:wrap; align-items:center;
      color:var(--muted); font-weight:700; font-size:14px;
    }
    .statBox{
      border:1px solid var(--border);
      border-radius:14px;
      padding:8px 10px;
      background:#fff;
      min-width:160px;
    }
    .q{
      border:1px solid var(--border);
      border-radius:16px;
      padding:14px;
      margin:12px 0;
      background:#fff;
    }
    .qHead{
      display:flex; align-items:flex-start; justify-content:space-between;
      gap:10px; flex-wrap:wrap;
    }
    .qTitle{
      margin:0;
      font-size:16px;
      color:#7c2d12;
      font-weight:900;
    }
    .qMeta{display:flex; gap:8px; align-items:center; flex-wrap:wrap}
    .tag{
      font-size:12px; font-weight:900;
      color:#92400e;
      background:#fffbeb;
      border:1px solid #fde68a;
      padding:4px 8px;
      border-radius:999px;
    }
    pre{
      margin:10px 0 0;
      padding:12px;
      border-radius:14px;
      background:#0b1220;
      color:#f9fafb;
      overflow:auto;
      font-family:var(--mono);
      font-size:14px;
      line-height:1.55;
    }
    .stem{margin-top:8px}
    .options{
      margin-top:10px;
      display:grid;
      gap:8px;
    }
    label.opt{
      display:flex;
      gap:10px;
      align-items:flex-start;
      padding:10px 12px;
      border-radius:14px;
      border:1px solid var(--border);
      background:#fff;
      cursor:pointer;
      transition:transform .05s ease, border-color .15s ease, background .15s ease;
    }
    label.opt:hover{border-color:#fbbf24; background:#fffbeb}
    input[type="radio"]{margin-top:4px}
    code.inline{
      font-family:var(--mono);
      background:#f3f4f6;
      border:1px solid #e5e7eb;
      padding:1px 6px;
      border-radius:8px;
    }
    .resultCard{
      position:sticky;
      top:14px;
    }
    .notice{
      margin-top:10px;
      color:var(--muted);
      font-size:14px;
    }
    .score{
      font-size:22px;
      font-weight:1000;
      color:#7c2d12;
      margin:8px 0 0;
    }
    .bar{
      height:12px;
      border-radius:999px;
      background:#f3f4f6;
      border:1px solid var(--border);
      overflow:hidden;
      margin-top:10px;
    }
    .bar > div{height:100%; width:0%; background:linear-gradient(90deg,var(--brand),var(--brand2))}
    .answers{
      margin-top:14px;
      display:none;
    }
    .ansItem{
      border:1px dashed #e5e7eb;
      border-radius:14px;
      padding:10px 12px;
      margin:10px 0;
      background:#fffbeb;
    }
    .ansTop{display:flex; justify-content:space-between; gap:10px; flex-wrap:wrap}
    .good{color:var(--ok); font-weight:1000}
    .bad{color:var(--bad); font-weight:1000}
    .explain{color:#374151; margin-top:6px}
    .svgWrap{
      margin-top:10px;
      border:1px solid var(--border);
      border-radius:14px;
      padding:10px;
      background:#fff;
      overflow:auto;
    }
    .footer{
      text-align:center;
      margin:18px 0 10px;
      color:#6b7280;
      font-size:13px;
    }
    @media print{
      .controls, .resultCard, .notice {display:none !important;}
      body{background:#fff;}
      .card{box-shadow:none;}
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="hero">
      <div>
        <span class="pill">Python Starter Club</span>
        <h1>Python MCQ Test ‚Äî <span style="color:#b45309">if / elif / else</span> (25 Questions)</h1>
        <p>Randomizes questions & options every time ‚úÖ</p>
        <div class="sub">
          Sections included: <b>5 Output from Program</b>, <b>5 Program from Output</b>, <b>5 SVG-based</b>,
          <b>5 Theory</b>, <b>5 Programming Assignments</b>. Answers show only after submit.
        </div>
      </div>
      <div class="controls">
        <button class="btn secondary" id="shuffleBtn" type="button">üîÄ New Random Test</button>
        <button class="btn" id="submitBtn" type="button">‚úÖ Submit Test</button>
      </div>
    </div>

    <div class="row">
      <div class="card" id="quizCard">
        <div class="stats" id="statsTop"></div>
        <div id="quiz"></div>
        <div class="notice" id="notice">
          Tip: Answer all questions, then click <b>Submit Test</b> to see score + answers.
        </div>
      </div>

      <div class="card resultCard">
        <span class="pill">Result</span>
        <div class="score" id="scoreText">Not submitted</div>
        <div class="bar"><div id="barFill"></div></div>
        <div class="notice" id="progressText">Attempted: 0 / 25</div>
        <div class="answers" id="answers"></div>
      </div>
    </div>

    <div class="footer">
      <b style="color:#92400e">Programmer‚Äôs Picnic</b> ‚Ä¢ Champak Roy ‚Ä¢ Calm learning. Strong foundations.
    </div>
  </div>

<script>
/* -----------------------------
   Question Bank (25 total)
   Each question: {id, type, category, promptHTML, options:[...], answerIndex, explainHTML}
   type: "code" | "text" | "svg"
-------------------------------- */

const BANK = [
  // =========================
  // 5: Programs -> Find Output
  // =========================
  {
    id:"PO1", category:"Program ‚Üí Output", type:"code",
    promptHTML:`What is the output?`,
    code:`x = 7
if x > 10:
    print("Big")
elif x > 5:
    print("Medium")
else:
    print("Small")`,
    options:[`Big`,`Medium`,`Small`,`No output`],
    answerIndex:1,
    explainHTML:`<b>x = 7</b>. First condition <code class="inline">x > 10</code> is false, second <code class="inline">x > 5</code> is true, so it prints <b>Medium</b>.`
  },
  {
    id:"PO2", category:"Program ‚Üí Output", type:"code",
    promptHTML:`What is the output?`,
    code:`n = 0
if n:
    print("True")
else:
    print("False")`,
    options:[`True`,`False`,`0`,`Error`],
    answerIndex:1,
    explainHTML:`In Python, <b>0 is falsy</b>. So the <code class="inline">else</code> runs and prints <b>False</b>.`
  },
  {
    id:"PO3", category:"Program ‚Üí Output", type:"code",
    promptHTML:`What is the output?`,
    code:`a = 10
b = 10
if a > b:
    print("A")
elif a == b:
    print("Equal")
else:
    print("B")`,
    options:[`A`,`B`,`Equal`,`Nothing`],
    answerIndex:2,
    explainHTML:`<b>a == b</b> is true, so it prints <b>Equal</b>.`
  },
  {
    id:"PO4", category:"Program ‚Üí Output", type:"code",
    promptHTML:`What is the output?`,
    code:`x = 3
if x % 2 == 0:
    print("Even")
if x > 0:
    print("Positive")
else:
    print("Non-positive")`,
    options:[`Even\nPositive`,`Positive`,`Even`,`Positive\nNon-positive`],
    answerIndex:1,
    explainHTML:`There are <b>two separate ifs</b>. First if is false (3 is odd), second if is true, so prints only <b>Positive</b>.`
  },
  {
    id:"PO5", category:"Program ‚Üí Output", type:"code",
    promptHTML:`What is the output?`,
    code:`temp = 25
if temp >= 30:
    print("Hot")
elif temp >= 20:
    print("Warm")
elif temp >= 10:
    print("Cool")
else:
    print("Cold")`,
    options:[`Hot`,`Warm`,`Cool`,`Cold`],
    answerIndex:1,
    explainHTML:`<b>25</b> is not ‚â•30, but is ‚â•20, so it prints <b>Warm</b> and stops.`
  },

  // =========================
  // 5: Output -> Find Program
  // =========================
  {
    id:"OP1", category:"Output ‚Üí Program", type:"text",
    promptHTML:`Which program prints exactly this output for <b>marks = 55</b>?
      <pre>B Grade</pre>`,
    options:[
`marks = 55
if marks >= 90:
    print("A Grade")
elif marks >= 60:
    print("B Grade")
else:
    print("Fail")`,
`marks = 55
if marks >= 60:
    print("B Grade")
elif marks >= 90:
    print("A Grade")
else:
    print("Fail")`,
`marks = 55
if marks >= 90:
    print("A Grade")
elif marks >= 50:
    print("B Grade")
else:
    print("Fail")`,
`marks = 55
if marks > 60:
    print("B Grade")
else:
    print("Fail")`
    ],
    answerIndex:2,
    explainHTML:`For <b>55</b>, option C uses <code class="inline">elif marks >= 50</code> so it prints <b>B Grade</b>.`
  },
  {
    id:"OP2", category:"Output ‚Üí Program", type:"text",
    promptHTML:`Which code prints <b>Positive</b> for <b>x = 1</b> and prints <b>Non-positive</b> for <b>x = 0</b>?`,
    options:[
`x = 1
if x >= 0:
    print("Positive")
else:
    print("Non-positive")`,
`x = 1
if x > 0:
    print("Positive")
else:
    print("Non-positive")`,
`x = 1
if x:
    print("Non-positive")
else:
    print("Positive")`,
`x = 1
if x == 0:
    print("Positive")
else:
    print("Non-positive")`
    ],
    answerIndex:1,
    explainHTML:`We need <b>1 ‚Üí Positive</b> and <b>0 ‚Üí Non-positive</b>. That matches <code class="inline">x > 0</code> in option B.`
  },
  {
    id:"OP3", category:"Output ‚Üí Program", type:"text",
    promptHTML:`Which code prints <b>Medium</b> for <b>x = 8</b>?`,
    options:[
`x = 8
if x > 5:
    print("Medium")
elif x > 10:
    print("Big")
else:
    print("Small")`,
`x = 8
if x > 10:
    print("Big")
elif x > 5:
    print("Medium")
else:
    print("Small")`,
`x = 8
if x >= 10:
    print("Big")
if x >= 5:
    print("Medium")
else:
    print("Small")`,
`x = 8
if x < 5:
    print("Small")
else:
    print("Big")`
    ],
    answerIndex:1,
    explainHTML:`Option B is the standard order: check <b>Big</b> first, then <b>Medium</b>. For 8 it prints <b>Medium</b>.`
  },
  {
    id:"OP4", category:"Output ‚Üí Program", type:"text",
    promptHTML:`Which code prints exactly this for <b>n = 0</b>?
      <pre>Zero</pre>`,
    options:[
`n = 0
if n > 0:
    print("Positive")
elif n == 0:
    print("Zero")
else:
    print("Negative")`,
`n = 0
if n == 0:
    print("Zero")
if n > 0:
    print("Positive")
else:
    print("Negative")`,
`n = 0
if n:
    print("Zero")
else:
    print("Negative")`,
`n = 0
if n < 0:
    print("Negative")
else:
    print("Zero")`
    ],
    answerIndex:0,
    explainHTML:`Option A prints <b>Zero</b> only when <code class="inline">n == 0</code>, and doesn‚Äôt print anything extra.`
  },
  {
    id:"OP5", category:"Output ‚Üí Program", type:"text",
    promptHTML:`Which code prints <b>Senior</b> for <b>age = 65</b> and <b>Adult</b> for <b>age = 30</b>?`,
    options:[
`age = 65
if age >= 18:
    print("Adult")
elif age >= 60:
    print("Senior")
else:
    print("Minor")`,
`age = 65
if age >= 60:
    print("Senior")
elif age >= 18:
    print("Adult")
else:
    print("Minor")`,
`age = 65
if age > 60:
    print("Adult")
else:
    print("Senior")`,
`age = 65
if age >= 18 and age < 60:
    print("Adult")
elif age >= 60:
    print("Senior")
else:
    print("Minor")`
    ],
    answerIndex:3,
    explainHTML:`Option D correctly separates <b>Adult</b> as 18‚Äì59 and <b>Senior</b> as 60+. (Option B also works, but D is the most precise.)`
  },

  // =========================
  // 5: SVG-based Questions
  // =========================
  {
    id:"SVG1", category:"SVG (Flow)", type:"svg",
    promptHTML:`Look at the flowchart. If <b>marks = 88</b>, what prints?`,
    svgHTML: flowSVG_marks(),
    options:[`A Grade`,`B Grade`,`Fail`,`Error`],
    answerIndex:1,
    explainHTML:`88 is <b>not ‚â• 90</b>, but <b>is ‚â• 60</b>, so <b>B Grade</b>.`
  },
  {
    id:"SVG2", category:"SVG (Truthiness)", type:"svg",
    promptHTML:`In this diagram, what happens when <b>x = 0</b>?`,
    svgHTML: flowSVG_truthy(),
    options:[`Prints "Truthy"`,`Prints "Falsy"`,`Prints both`,`Prints nothing`],
    answerIndex:1,
    explainHTML:`<b>0 is falsy</b> in Python, so it follows the Falsy branch.`
  },
  {
    id:"SVG3", category:"SVG (Order matters)", type:"svg",
    promptHTML:`Which statement is true about the flow?`,
    svgHTML: flowSVG_order(),
    options:[
      `Python checks all conditions and runs all true blocks`,
      `Python runs only the first true block and ignores the rest`,
      `Python always runs else after if`,
      `elif runs even if if was true`
    ],
    answerIndex:1,
    explainHTML:`With <code class="inline">if-elif-else</code>, Python runs the <b>first True</b> block only.`
  },
  {
    id:"SVG4", category:"SVG (Nested decision)", type:"svg",
    promptHTML:`If <b>age = 17</b>, what prints in the diagram?`,
    svgHTML: flowSVG_age(),
    options:[`Kid`,`Teen`,`Adult`,`Senior`],
    answerIndex:1,
    explainHTML:`Age 17 is <b>not</b> ‚â•18, but is ‚â•13, so <b>Teen</b>.`
  },
  {
    id:"SVG5", category:"SVG (Temperature)", type:"svg",
    promptHTML:`If <b>temp = 9</b>, what prints?`,
    svgHTML: flowSVG_temp(),
    options:[`Hot`,`Warm`,`Cool`,`Cold`],
    answerIndex:3,
    explainHTML:`9 is <b>below 10</b>, so it goes to <b>Cold</b>.`
  },

  // =========================
  // 5: Theory Questions
  // =========================
  {
    id:"TH1", category:"Theory", type:"text",
    promptHTML:`In an <code class="inline">if-elif-else</code> chain, how many blocks can run at most?`,
    options:[`0`,`1`,`2`,`All of them`],
    answerIndex:1,
    explainHTML:`At most <b>one</b> block runs (the first condition that is true, otherwise else).`
  },
  {
    id:"TH2", category:"Theory", type:"text",
    promptHTML:`What does <code class="inline">elif</code> mean?`,
    options:[`End if`,`Else if`,`Equal if`,`Extra if`],
    answerIndex:1,
    explainHTML:`<code class="inline">elif</code> is short for <b>else if</b>.`
  },
  {
    id:"TH3", category:"Theory", type:"text",
    promptHTML:`Why should we place the most specific condition first?`,
    options:[
      `Because Python requires it`,
      `Because it makes code slower otherwise`,
      `Because earlier true conditions stop later checks`,
      `Because else must be first`
    ],
    answerIndex:2,
    explainHTML:`Python checks <b>top to bottom</b>. If a broad condition is first, it may capture values that should go to later cases.`
  },
  {
    id:"TH4", category:"Theory", type:"text",
    promptHTML:`What is the result of the condition <code class="inline">bool("")</code>?`,
    options:[`True`,`False`,`" "` (space),`Error`],
    answerIndex:1,
    explainHTML:`An empty string <code class="inline">""</code> is <b>falsy</b>, so <code class="inline">bool("")</code> is <b>False</b>.`
  },
  {
    id:"TH5", category:"Theory", type:"text",
    promptHTML:`Which is the correct syntax?`,
    options:[
`if x = 5:
    print("Yes")`,
`if (x == 5) then:
    print("Yes")`,
`if x == 5:
    print("Yes")`,
`if x == 5
    print("Yes")`
    ],
    answerIndex:2,
    explainHTML:`Python uses <code class="inline">==</code> for comparison, and needs a colon <code class="inline">:</code>.`
  },

  // =========================
  // 5: Programming Assignments (MCQ)
  // =========================
  {
    id:"PA1", category:"Programming Assignment", type:"text",
    promptHTML:`Choose the correct code to print <b>"Leap Year"</b> if year is divisible by 400 OR (divisible by 4 AND not by 100), else print <b>"Not Leap"</b>.`,
    options:[
`y = year
if y % 4 == 0:
    print("Leap Year")
else:
    print("Not Leap")`,
`y = year
if (y % 400 == 0) or (y % 4 == 0 and y % 100 != 0):
    print("Leap Year")
else:
    print("Not Leap")`,
`y = year
if y % 100 == 0:
    print("Leap Year")
else:
    print("Not Leap")`,
`y = year
if y % 400 != 0 and y % 4 == 0:
    print("Leap Year")
else:
    print("Not Leap")`
    ],
    answerIndex:1,
    explainHTML:`That is the standard leap-year rule. Option B is correct.`
  },
  {
    id:"PA2", category:"Programming Assignment", type:"text",
    promptHTML:`Choose the correct program to classify a number <b>n</b> as <b>Positive</b>, <b>Zero</b>, or <b>Negative</b>.`,
    options:[
`if n >= 0:
    print("Positive")
elif n == 0:
    print("Zero")
else:
    print("Negative")`,
`if n > 0:
    print("Positive")
elif n == 0:
    print("Zero")
else:
    print("Negative")`,
`if n < 0:
    print("Positive")
elif n == 0:
    print("Zero")
else:
    print("Negative")`,
`if n:
    print("Zero")
else:
    print("Negative")`
    ],
    answerIndex:1,
    explainHTML:`Must handle 3 cases correctly. Option B is correct because <code class="inline">n > 0</code> excludes zero.`
  },
  {
    id:"PA3", category:"Programming Assignment", type:"text",
    promptHTML:`Choose the correct program to print <b>"Vowel"</b> if <b>ch</b> is a vowel (a,e,i,o,u) else <b>"Consonant"</b>.`,
    options:[
`if ch in "aeiou":
    print("Vowel")
else:
    print("Consonant")`,
`if ch == "a" or "e" or "i" or "o" or "u":
    print("Vowel")
else:
    print("Consonant")`,
`if ch in ["a","e","i","o","u"]:
    print("Vowel")
elif ch == "":
    print("Consonant")
else:
    print("Vowel")`,
`if ch not in "aeiou":
    print("Vowel")
else:
    print("Consonant")`
    ],
    answerIndex:0,
    explainHTML:`Option A is correct. Option B is a common bug: <code class="inline">or "e"</code> is always truthy.`
  },
  {
    id:"PA4", category:"Programming Assignment", type:"text",
    promptHTML:`Choose the correct code to apply discount:
      <ul>
        <li>Bill ‚â• 5000 ‚Üí 20% off</li>
        <li>Bill ‚â• 2000 ‚Üí 10% off</li>
        <li>Else ‚Üí no discount</li>
      </ul>
      Print final amount.`,
    options:[
`if bill >= 2000:
    bill = bill * 0.9
elif bill >= 5000:
    bill = bill * 0.8
print(bill)`,
`if bill >= 5000:
    bill = bill * 0.8
elif bill >= 2000:
    bill = bill * 0.9
print(bill)`,
`if bill >= 5000 and bill >= 2000:
    bill = bill * 0.8
else:
    bill = bill * 0.9
print(bill)`,
`if bill >= 5000:
    bill = bill * 0.9
elif bill >= 2000:
    bill = bill * 0.8
print(bill)`
    ],
    answerIndex:1,
    explainHTML:`Most specific (5000+) must come first. Option B applies correct discount ranges.`
  },
  {
    id:"PA5", category:"Programming Assignment", type:"text",
    promptHTML:`Choose the correct code to print the larger of two numbers <b>a</b> and <b>b</b>. If equal, print <b>"Equal"</b>.`,
    options:[
`if a > b:
    print(a)
elif b > a:
    print(b)
else:
    print("Equal")`,
`if a >= b:
    print(a)
else:
    print(b)
print("Equal")`,
`if a == b:
    print(a)
else:
    print("Equal")`,
`if a < b:
    print(a)
else:
    print("Equal")`
    ],
    answerIndex:0,
    explainHTML:`Option A covers all 3 cases correctly: a>b, b>a, else equal.`
  },
];

/* -----------------------------
   SVG generators (inline)
-------------------------------- */
function flowSVG_marks(){
  return `
  <div class="svgWrap">
  <svg width="560" height="220" viewBox="0 0 560 220" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Marks grading flowchart">
    <defs>
      <marker id="arr" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
        <path d="M0,0 L9,3 L0,6 Z" fill="#9a3412"></path>
      </marker>
    </defs>
    <rect x="12" y="12" width="536" height="196" rx="16" fill="#fff" stroke="#e5e7eb"/>
    <text x="280" y="40" text-anchor="middle" font-weight="900" fill="#7c2d12">Marks ‚Üí Grade</text>

    <rect x="40" y="60" width="160" height="40" rx="12" fill="#fffbeb" stroke="#fde68a"/>
    <text x="120" y="85" text-anchor="middle" font-weight="800" fill="#92400e">marks ‚â• 90?</text>

    <rect x="360" y="60" width="160" height="40" rx="12" fill="#fffbeb" stroke="#fde68a"/>
    <text x="440" y="85" text-anchor="middle" font-weight="800" fill="#92400e">Print "A"</text>

    <rect x="40" y="130" width="160" height="40" rx="12" fill="#fffbeb" stroke="#fde68a"/>
    <text x="120" y="155" text-anchor="middle" font-weight="800" fill="#92400e">marks ‚â• 60?</text>

    <rect x="360" y="130" width="160" height="40" rx="12" fill="#fffbeb" stroke="#fde68a"/>
    <text x="440" y="155" text-anchor="middle" font-weight="800" fill="#92400e">Print "B"</text>

    <rect x="200" y="170" width="160" height="36" rx="12" fill="#fffbeb" stroke="#fde68a"/>
    <text x="280" y="193" text-anchor="middle" font-weight="800" fill="#92400e">Else ‚Üí "Fail"</text>

    <line x1="200" y1="80" x2="360" y2="80" stroke="#9a3412" stroke-width="2.5" marker-end="url(#arr)"/>
    <text x="280" y="72" text-anchor="middle" fill="#9a3412" font-weight="800">Yes</text>

    <line x1="120" y1="100" x2="120" y2="130" stroke="#9a3412" stroke-width="2.5" marker-end="url(#arr)"/>
    <text x="150" y="122" fill="#9a3412" font-weight="800">No</text>

    <line x1="200" y1="150" x2="360" y2="150" stroke="#9a3412" stroke-width="2.5" marker-end="url(#arr)"/>
    <text x="280" y="142" text-anchor="middle" fill="#9a3412" font-weight="800">Yes</text>

    <line x1="120" y1="170" x2="200" y2="188" stroke="#9a3412" stroke-width="2.5" marker-end="url(#arr)"/>
    <text x="150" y="184" fill="#9a3412" font-weight="800">No</text>
  </svg>
  </div>`;
}
function flowSVG_truthy(){
  return `
  <div class="svgWrap">
  <svg width="560" height="210" viewBox="0 0 560 210" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Truthiness flowchart">
    <defs>
      <marker id="arr2" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
        <path d="M0,0 L9,3 L0,6 Z" fill="#9a3412"></path>
      </marker>
    </defs>
    <rect x="12" y="12" width="536" height="186" rx="16" fill="#fff" stroke="#e5e7eb"/>
    <text x="280" y="40" text-anchor="middle" font-weight="900" fill="#7c2d12">if x:</text>

    <rect x="200" y="58" width="160" height="44" rx="12" fill="#fffbeb" stroke="#fde68a"/>
    <text x="280" y="85" text-anchor="middle" font-weight="800" fill="#92400e">Condition: x?</text>

    <rect x="70" y="130" width="180" height="44" rx="12" fill="#fffbeb" stroke="#fde68a"/>
    <text x="160" y="157" text-anchor="middle" font-weight="800" fill="#92400e">Print "Truthy"</text>

    <rect x="310" y="130" width="180" height="44" rx="12" fill="#fffbeb" stroke="#fde68a"/>
    <text x="400" y="157" text-anchor="middle" font-weight="800" fill="#92400e">Print "Falsy"</text>

    <line x1="250" y1="102" x2="160" y2="130" stroke="#9a3412" stroke-width="2.5" marker-end="url(#arr2)"/>
    <text x="200" y="120" fill="#9a3412" font-weight="800">True</text>

    <line x1="310" y1="102" x2="400" y2="130" stroke="#9a3412" stroke-width="2.5" marker-end="url(#arr2)"/>
    <text x="350" y="120" fill="#9a3412" font-weight="800">False</text>
  </svg>
  </div>`;
}
function flowSVG_order(){
  return `
  <div class="svgWrap">
  <svg width="560" height="230" viewBox="0 0 560 230" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Order matters diagram">
    <rect x="12" y="12" width="536" height="206" rx="16" fill="#fff" stroke="#e5e7eb"/>
    <text x="280" y="40" text-anchor="middle" font-weight="900" fill="#7c2d12">Order Matters</text>
    <text x="280" y="70" text-anchor="middle" font-weight="800" fill="#92400e">Python checks top ‚Üí bottom</text>

    <rect x="70" y="92" width="420" height="36" rx="12" fill="#fffbeb" stroke="#fde68a"/>
    <text x="280" y="116" text-anchor="middle" font-weight="800" fill="#92400e">if condition1 is True ‚Üí run this</text>

    <rect x="70" y="136" width="420" height="36" rx="12" fill="#fffbeb" stroke="#fde68a"/>
    <text x="280" y="160" text-anchor="middle" font-weight="800" fill="#92400e">elif condition2 is True ‚Üí run this</text>

    <rect x="70" y="180" width="420" height="30" rx="12" fill="#fffbeb" stroke="#fde68a"/>
    <text x="280" y="201" text-anchor="middle" font-weight="800" fill="#92400e">else ‚Üí run this</text>
  </svg>
  </div>`;
}
function flowSVG_age(){
  return `
  <div class="svgWrap">
  <svg width="560" height="235" viewBox="0 0 560 235" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Age category flowchart">
    <defs>
      <marker id="arr3" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
        <path d="M0,0 L9,3 L0,6 Z" fill="#9a3412"></path>
      </marker>
    </defs>
    <rect x="12" y="12" width="536" height="211" rx="16" fill="#fff" stroke="#e5e7eb"/>
    <text x="280" y="40" text-anchor="middle" font-weight="900" fill="#7c2d12">Age ‚Üí Category</text>

    <rect x="45" y="62" width="170" height="40" rx="12" fill="#fffbeb" stroke="#fde68a"/>
    <text x="130" y="87" text-anchor="middle" font-weight="800" fill="#92400e">age ‚â• 18?</text>

    <rect x="345" y="62" width="170" height="40" rx="12" fill="#fffbeb" stroke="#fde68a"/>
    <text x="430" y="87" text-anchor="middle" font-weight="800" fill="#92400e">Adult</text>

    <rect x="45" y="130" width="170" height="40" rx="12" fill="#fffbeb" stroke="#fde68a"/>
    <text x="130" y="155" text-anchor="middle" font-weight="800" fill="#92400e">age ‚â• 13?</text>

    <rect x="345" y="130" width="170" height="40" rx="12" fill="#fffbeb" stroke="#fde68a"/>
    <text x="430" y="155" text-anchor="middle" font-weight="800" fill="#92400e">Teen</text>

    <rect x="200" y="184" width="160" height="32" rx="12" fill="#fffbeb" stroke="#fde68a"/>
    <text x="280" y="205" text-anchor="middle" font-weight="800" fill="#92400e">Else ‚Üí Kid</text>

    <line x1="215" y1="82" x2="345" y2="82" stroke="#9a3412" stroke-width="2.5" marker-end="url(#arr3)"/>
    <text x="280" y="74" text-anchor="middle" fill="#9a3412" font-weight="800">Yes</text>

    <line x1="130" y1="102" x2="130" y2="130" stroke="#9a3412" stroke-width="2.5" marker-end="url(#arr3)"/>
    <text x="155" y="124" fill="#9a3412" font-weight="800">No</text>

    <line x1="215" y1="150" x2="345" y2="150" stroke="#9a3412" stroke-width="2.5" marker-end="url(#arr3)"/>
    <text x="280" y="142" text-anchor="middle" fill="#9a3412" font-weight="800">Yes</text>

    <line x1="130" y1="170" x2="200" y2="200" stroke="#9a3412" stroke-width="2.5" marker-end="url(#arr3)"/>
    <text x="160" y="194" fill="#9a3412" font-weight="800">No</text>
  </svg>
  </div>`;
}
function flowSVG_temp(){
  return `
  <div class="svgWrap">
  <svg width="560" height="230" viewBox="0 0 560 230" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Temperature classification flowchart">
    <rect x="12" y="12" width="536" height="206" rx="16" fill="#fff" stroke="#e5e7eb"/>
    <text x="280" y="40" text-anchor="middle" font-weight="900" fill="#7c2d12">Temperature</text>

    <text x="280" y="72" text-anchor="middle" font-weight="800" fill="#92400e">
      if temp ‚â• 30 ‚Üí Hot ‚Ä¢ elif temp ‚â• 20 ‚Üí Warm ‚Ä¢ elif temp ‚â• 10 ‚Üí Cool ‚Ä¢ else ‚Üí Cold
    </text>

    <rect x="70" y="98" width="420" height="36" rx="12" fill="#fffbeb" stroke="#fde68a"/>
    <text x="280" y="122" text-anchor="middle" font-weight="900" fill="#92400e">Temp checks happen top ‚Üí bottom</text>

    <rect x="70" y="144" width="420" height="58" rx="14" fill="#fff7ed" stroke="#fde68a"/>
    <text x="280" y="168" text-anchor="middle" font-weight="900" fill="#92400e">For temp = 9</text>
    <text x="280" y="190" text-anchor="middle" font-weight="800" fill="#7c2d12">Which label will print?</text>
  </svg>
  </div>`;
}

/* -----------------------------
   Quiz State + Rendering
-------------------------------- */
let quiz = [];  // will hold randomized questions with randomized options
let submitted = false;

const quizEl = document.getElementById("quiz");
const answersEl = document.getElementById("answers");
const scoreText = document.getElementById("scoreText");
const barFill = document.getElementById("barFill");
const progressText = document.getElementById("progressText");
const submitBtn = document.getElementById("submitBtn");
const shuffleBtn = document.getElementById("shuffleBtn");
const statsTop = document.getElementById("statsTop");

function shuffle(arr){
  const a = arr.slice();
  for(let i=a.length-1;i>0;i--){
    const j = Math.floor(Math.random()*(i+1));
    [a[i],a[j]] = [a[j],a[i]];
  }
  return a;
}

function htmlEscape(s){
  return s.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;");
}

function buildQuiz(){
  submitted = false;
  submitBtn.disabled = false;
  answersEl.style.display = "none";
  answersEl.innerHTML = "";
  scoreText.textContent = "Not submitted";
  barFill.style.width = "0%";

  // Randomize questions:
  const qShuf = shuffle(BANK);

  // For each question, randomize options and track correct index:
  quiz = qShuf.map(q => {
    const idxs = q.options.map((_,i)=>i);
    const optOrder = shuffle(idxs);
    const newOptions = optOrder.map(i => q.options[i]);
    const newAnswerIndex = optOrder.indexOf(q.answerIndex);
    return {...q, options:newOptions, answerIndex:newAnswerIndex};
  });

  render();
  updateProgress();
  renderStats();
}

function renderStats(){
  const counts = quiz.reduce((acc,q)=>{
    acc[q.category] = (acc[q.category]||0)+1;
    return acc;
  },{});
  const parts = Object.entries(counts).map(([k,v])=>`<div class="statBox"><b style="color:#7c2d12">${v}</b> ‚Ä¢ ${k}</div>`);
  statsTop.innerHTML = parts.join("");
}

function render(){
  quizEl.innerHTML = "";

  quiz.forEach((q, i) => {
    const qNum = i+1;
    const qId = `q_${i}`;
    const cat = q.category;

    const stemParts = [];
    stemParts.push(`<div class="stem">${q.promptHTML}</div>`);

    if(q.type === "code"){
      stemParts.push(`<pre>${htmlEscape(q.code)}</pre>`);
    }
    if(q.type === "svg"){
      stemParts.push(q.svgHTML);
    }

    const opts = q.options.map((opt, oi) => {
      const optId = `${qId}_opt_${oi}`;
      const optHTML = (opt.includes("\n") || opt.includes("if ") || opt.includes("elif ") || opt.includes("print("))
        ? `<pre style="margin:0; background:#0b1220; color:#f9fafb; border-radius:12px; padding:10px; overflow:auto">${htmlEscape(opt)}</pre>`
        : `<div>${opt}</div>`;

      return `
        <label class="opt" for="${optId}">
          <input type="radio" id="${optId}" name="${qId}" value="${oi}" ${submitted ? "disabled":""}/>
          <div style="flex:1">
            <div style="font-weight:900; color:#92400e; font-size:13px;">Option ${String.fromCharCode(65+oi)}</div>
            ${optHTML}
          </div>
        </label>`;
    }).join("");

    const block = document.createElement("div");
    block.className = "q";
    block.innerHTML = `
      <div class="qHead">
        <div>
          <div class="qTitle">Q${qNum}. ${q.type === "svg" ? "üß©" : q.type === "code" ? "üíª" : "üìù"} ${q.type === "code" ? "Find the result" : "Choose the best answer"}</div>
          ${stemParts.join("")}
        </div>
        <div class="qMeta">
          <span class="tag">${cat}</span>
        </div>
      </div>
      <div class="options">${opts}</div>
    `;
    quizEl.appendChild(block);
  });

  // Attach change listeners
  quizEl.querySelectorAll('input[type="radio"]').forEach(r => {
    r.addEventListener("change", updateProgress);
  });
}

function getSelections(){
  return quiz.map((q, i) => {
    const name = `q_${i}`;
    const chosen = document.querySelector(`input[name="${name}"]:checked`);
    return chosen ? Number(chosen.value) : null;
  });
}

function updateProgress(){
  const sel = getSelections();
  const attempted = sel.filter(v => v !== null).length;
  progressText.textContent = `Attempted: ${attempted} / ${quiz.length}`;
}

function submitQuiz(){
  if(submitted) return;

  const selections = getSelections();
  const attempted = selections.filter(v => v !== null).length;

  submitted = true;
  submitBtn.disabled = true;

  // Disable all radios
  quizEl.querySelectorAll('input[type="radio"]').forEach(r => r.disabled = true);

  // Score
  let correct = 0;
  const details = quiz.map((q, i) => {
    const chosen = selections[i];
    const isCorrect = chosen === q.answerIndex;
    if(isCorrect) correct++;
    return {q, i, chosen, isCorrect};
  });

  const pct = Math.round((correct / quiz.length) * 100);
  scoreText.innerHTML = `Score: <span style="color:#7c2d12">${correct}</span> / ${quiz.length} <span style="color:#6b7280; font-size:16px;">(${pct}%)</span>`;
  barFill.style.width = pct + "%";

  // Answers section
  answersEl.style.display = "block";
  answersEl.innerHTML = `<div class="notice"><b>Answers</b> (shown after submit). Review what you missed and learn fast ‚úÖ</div>`;

  details.forEach(({q,i,chosen,isCorrect}) => {
    const qNum = i+1;
    const correctLabel = String.fromCharCode(65 + q.answerIndex);
    const chosenLabel = (chosen === null) ? "‚Äî" : String.fromCharCode(65 + chosen);

    const headRight = isCorrect
      ? `<span class="good">‚úÖ Correct</span>`
      : `<span class="bad">‚ùå Wrong</span>`;

    const chosenText = (chosen === null)
      ? `<span class="bad">Not attempted</span>`
      : `Your answer: <b>${chosenLabel}</b>`;

    const correctText = `Correct answer: <b>${correctLabel}</b>`;

    const stem = `
      <div class="explain" style="margin-top:8px">
        <div style="color:#7c2d12; font-weight:900;">Q${qNum} ‚Ä¢ ${q.category}</div>
        <div style="margin-top:6px">${q.promptHTML}</div>
        ${q.type==="code" ? `<pre>${htmlEscape(q.code)}</pre>` : ""}
        ${q.type==="svg" ? q.svgHTML : ""}
      </div>
    `;

    const item = document.createElement("div");
    item.className = "ansItem";
    item.innerHTML = `
      <div class="ansTop">
        <div>${headRight}</div>
        <div style="color:#6b7280; font-weight:900">${chosenText} ‚Ä¢ ${correctText}</div>
      </div>
      ${stem}
      <div class="explain">${q.explainHTML}</div>
    `;
    answersEl.appendChild(item);
  });

  // If not all attempted, still okay‚Äîjust informative.
  if(attempted < quiz.length){
    const note = document.createElement("div");
    note.className = "notice";
    note.innerHTML = `You attempted <b>${attempted}</b> out of <b>${quiz.length}</b>. Unattempted questions are marked as wrong.`;
    answersEl.insertBefore(note, answersEl.children[1]);
  }
}

shuffleBtn.addEventListener("click", buildQuiz);
submitBtn.addEventListener("click", submitQuiz);

// Start
buildQuiz();
</script>
</body>
</html>