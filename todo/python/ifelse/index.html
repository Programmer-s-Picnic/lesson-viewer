<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>
      Python MCQ Test ‚Äî if / elif / else (25 + Assignments + Pyodide)
    </title>
    <meta name="author" content="Champak Roy" />

    <style>
      :root {
        --bg: #fffaf2;
        --card: #fff;
        --ink: #1f2937;
        --muted: #6b7280;
        --brand: #d97706;
        --brand2: #f59e0b;
        --border: #e5e7eb;
        --ok: #059669;
        --bad: #dc2626;
        --shadow: 0 10px 28px rgba(0, 0, 0, 0.1);
      }
      * {
        box-sizing: border-box;
      }
      body {
        margin: 0;
        font-family: system-ui, Segoe UI, Roboto, Arial, sans-serif;
        background: var(--bg);
        color: var(--ink);
      }
      .container {
        max-width: 1150px;
        margin: auto;
        padding: 18px;
      }
      .hero {
        background: linear-gradient(135deg, #fff4dc, #ffe8b5);
        border: 1px solid #fde68a;
        border-radius: 18px;
        box-shadow: var(--shadow);
        padding: 18px;
      }
      h1 {
        margin: 0;
        color: #92400e;
      }
      .sub {
        color: var(--muted);
        font-size: 14px;
        margin-top: 6px;
      }
      .card {
        background: var(--card);
        border: 1px solid var(--border);
        border-radius: 16px;
        box-shadow: 0 6px 18px rgba(0, 0, 0, 0.06);
        padding: 16px;
        margin-top: 16px;
      }
      .q {
        border: 1px solid var(--border);
        border-radius: 14px;
        padding: 14px;
        margin: 16px 0;
      }
      .options {
        display: grid;
        gap: 8px;
        margin-top: 8px;
      }
      .opt {
        display: flex;
        gap: 10px;
        align-items: flex-start;
        padding: 10px 12px;
        border-radius: 12px;
        border: 1px solid var(--border);
        transition: 0.15s;
      }
      .opt:hover {
        border-color: #f59e0b;
      }
      .opt input {
        margin-top: 4px;
      }
      .correct {
        background: #f0fdf4;
        border-color: #86efac;
      }
      .wrong {
        background: #fff1f2;
        border-color: #fecaca;
      }
      .dim {
        opacity: 0.9;
      }
      .badge {
        font-size: 12px;
        font-weight: 900;
        padding: 3px 8px;
        border-radius: 999px;
        border: 1px solid var(--border);
        margin-left: 6px;
        white-space: nowrap;
      }
      .badge.ok {
        color: var(--ok);
        background: #f0fdf4;
        border-color: #86efac;
      }
      .badge.bad {
        color: var(--bad);
        background: #fff1f2;
        border-color: #fecaca;
      }
      .badge.me {
        color: #92400e;
        background: #fffbeb;
        border-color: #fde68a;
      }
      pre {
        background: #0b1220;
        color: #f9fafb;
        padding: 10px;
        border-radius: 10px;
        overflow: auto;
        margin: 6px 0 0;
        font-size: 14px;
        line-height: 1.35;
      }
      .answerBox {
        margin-top: 12px;
        padding: 12px;
        border-radius: 12px;
        border: 1px dashed var(--border);
        background: #fffbeb;
        font-size: 14px;
        line-height: 1.5;
      }
      .assignment {
        background: #fff7ed;
        border-left: 6px solid var(--brand2);
        padding: 14px;
        border-radius: 12px;
        margin-top: 12px;
      }
      svg {
        max-width: 100%;
      }
      .btnRow {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
        margin-top: 12px;
      }
      .btn {
        padding: 12px 18px;
        border-radius: 12px;
        border: none;
        font-weight: 900;
        cursor: pointer;
        background: linear-gradient(145deg, var(--brand), var(--brand2));
        color: #fff;
      }
      .btn.secondary {
        background: #fff;
        color: #92400e;
        border: 1px solid var(--border);
      }
      .btn:disabled {
        opacity: 0.6;
        cursor: not-allowed;
      }
      .score {
        font-size: 22px;
        font-weight: 900;
        color: #92400e;
      }
      .note {
        font-size: 13px;
        color: var(--muted);
        margin-top: 6px;
      }
      hr {
        border: none;
        border-top: 1px solid var(--border);
        margin: 14px 0;
      }

      /* ---------- Pyodide editor styles ---------- */
      .editorWrap {
        display: grid;
        gap: 12px;
        margin-top: 12px;
      }
      @media (min-width: 980px) {
        .editorWrap {
          grid-template-columns: 1.1fr 0.9fr;
          align-items: start;
        }
      }
      .editorCard {
        background: #fff;
        border: 1px solid var(--border);
        border-radius: 14px;
        padding: 12px;
        box-shadow: 0 6px 18px rgba(0, 0, 0, 0.05);
      }
      .editorTop {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
        align-items: center;
        justify-content: space-between;
      }
      .selectRow {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
        align-items: center;
      }
      select,
      textarea {
        width: 100%;
        font: 14px ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
          "Liberation Mono", "Courier New", monospace;
      }
      select {
        border: 1px solid var(--border);
        border-radius: 10px;
        padding: 10px;
        background: #fff;
      }
      textarea {
        min-height: 280px;
        border: 1px solid var(--border);
        border-radius: 12px;
        padding: 12px;
        background: #fffbeb;
        outline: none;
        resize: vertical;
      }
      .outBox {
        min-height: 280px;
        background: #0b1220;
        color: #f9fafb;
        border-radius: 12px;
        padding: 12px;
        overflow: auto;
        border: 1px solid #111827;
        font: 14px ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
          "Liberation Mono", "Courier New", monospace;
        white-space: pre-wrap;
      }
      .kbdHint {
        font-size: 12px;
        color: var(--muted);
      }
      .statusPill {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 6px 10px;
        border-radius: 999px;
        border: 1px solid var(--border);
        background: #fffbeb;
        color: #92400e;
        font-weight: 800;
        font-size: 12px;
      }
      .dot {
        width: 8px;
        height: 8px;
        border-radius: 50%;
        background: #f59e0b;
        display: inline-block;
      }
      .dot.ok {
        background: var(--ok);
      }
      .dot.bad {
        background: var(--bad);
      }
    </style>
  </head>

  <body>
    <div class="container">
      <div class="hero">
        <h1>Python if / elif / else ‚Äî 25 MCQs + Assignments</h1>
        <div class="sub">
          Randomized questions & options ‚Ä¢ code in &lt;pre&gt; ‚Ä¢ detailed
          explanations ‚Ä¢ run assignments with Pyodide
        </div>
        <div class="btnRow">
          <button class="btn secondary" onclick="buildQuiz()">
            üîÄ New Test
          </button>
          <button class="btn" id="submitBtn" onclick="submitQuiz()">
            ‚úÖ Submit Test
          </button>
        </div>
        <div class="note">
          Tip: Click ‚ÄúNew Test‚Äù to reshuffle questions and options.
        </div>
      </div>

      <div class="card" id="quiz"></div>

      <div class="card">
        <div class="score" id="score">Not submitted</div>
        <div class="note" id="meta"></div>
      </div>
    </div>

    <!-- Pyodide CDN (no build tools needed) -->
    <script src="https://cdn.jsdelivr.net/pyodide/v0.25.1/full/pyodide.js"></script>

    <script>
      /* ---------------- Utilities ---------------- */
      function shuffle(arr) {
        const a = arr.slice();
        for (let i = a.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [a[i], a[j]] = [a[j], a[i]];
        }
        return a;
      }
      function esc(s) {
        return String(s)
          .replace(/&/g, "&amp;")
          .replace(/</g, "&lt;")
          .replace(/>/g, "&gt;");
      }
      // treat as code if multiline OR looks like python
      function isCodeLike(t) {
        const s = String(t);
        if (s.includes("\n")) return true;
        const x = s.trim();
        return (
          /^(if|elif|else|for|while|print|def|return|import)\b/.test(x) ||
          x.includes("==") ||
          x.includes("%") ||
          x.includes("max(") ||
          x.includes(" in '") ||
          x.includes(' in "') ||
          x.includes("discount") ||
          (x.includes(":") && x.includes("print"))
        );
      }
      function renderMaybePre(text) {
        const safe = esc(text);
        return isCodeLike(text) ? `<pre>${safe}</pre>` : safe;
      }

      /* ---------------- SVG Flowchart ---------------- */
      const FLOW_GRADE = `
<svg viewBox="0 0 520 240" role="img" aria-label="Flowchart: Marks to Grade">
  <rect x="10" y="10" width="500" height="220" rx="16" fill="#fff" stroke="#f59e0b"/>
  <text x="260" y="40" text-anchor="middle" font-weight="900" font-size="18">Marks ‚Üí Grade</text>

  <rect x="40" y="70" width="180" height="40" rx="10" fill="#fffbeb" stroke="#fde68a"/>
  <text x="130" y="96" text-anchor="middle" font-size="14">marks ‚â• 90 ?</text>

  <rect x="300" y="70" width="180" height="40" rx="10" fill="#fffbeb" stroke="#fde68a"/>
  <text x="390" y="96" text-anchor="middle" font-size="14">Print A</text>

  <path d="M220 90 L300 90" stroke="#d97706" stroke-width="2" fill="none"/>
  <text x="260" y="84" text-anchor="middle" font-size="12" fill="#92400e">Yes</text>

  <path d="M130 110 L130 140" stroke="#d97706" stroke-width="2" fill="none"/>
  <text x="150" y="132" font-size="12" fill="#92400e">No</text>

  <rect x="40" y="140" width="180" height="40" rx="10" fill="#fffbeb" stroke="#fde68a"/>
  <text x="130" y="166" text-anchor="middle" font-size="14">marks ‚â• 60 ?</text>

  <rect x="300" y="140" width="180" height="40" rx="10" fill="#fffbeb" stroke="#fde68a"/>
  <text x="390" y="166" text-anchor="middle" font-size="14">Print B</text>

  <path d="M220 160 L300 160" stroke="#d97706" stroke-width="2" fill="none"/>
  <text x="260" y="154" text-anchor="middle" font-size="12" fill="#92400e">Yes</text>

  <path d="M130 180 L130 205" stroke="#d97706" stroke-width="2" fill="none"/>
  <text x="150" y="198" font-size="12" fill="#92400e">No</text>

  <text x="260" y="220" text-anchor="middle" font-size="14" font-weight="700">Else ‚Üí Fail</text>
</svg>`;

      /* ---------------- Question Bank (25) ---------------- */
      const BANK = [
        // ================= PROGRAM -> OUTPUT (5)
        {
          q: "What is the output?",
          code: `x=7
if x>10:
    print('Big')
elif x>5:
    print('Medium')
else:
    print('Small')`,
          opts: ["Big", "Medium", "Small", "No output"],
          ans: 1,
          exp: "Python checks conditions top to bottom. x>10 is False, x>5 is True, so 'Medium' prints.",
        },
        {
          q: "What is the output?",
          code: `n=0
if n:
    print('True')
else:
    print('False')`,
          opts: ["True", "False", "0", "Error"],
          ans: 1,
          exp: "0 is falsy in Python, so the else block runs.",
        },
        {
          q: "What is the output?",
          code: `x=3
if x%2==0:
    print('Even')
else:
    print('Odd')`,
          opts: ["Even", "Odd", "Both", "None"],
          ans: 1,
          exp: "3%2 is 1 (not 0), so it prints 'Odd'.",
        },
        {
          q: "What is the output?",
          code: `a=5
b=10
if a>b:
    print('A')
else:
    print('B')`,
          opts: ["A", "B", "Error", "Nothing"],
          ans: 1,
          exp: "5 is not greater than 10, so else executes and prints 'B'.",
        },
        {
          q: "What is the output?",
          code: `temp=25
if temp>=30:
    print('Hot')
elif temp>=20:
    print('Warm')
else:
    print('Cold')`,
          opts: ["Hot", "Warm", "Cold", "None"],
          ans: 1,
          exp: "25 is <30 but ‚â•20, so it prints 'Warm'.",
        },

        // ================= OUTPUT -> PROGRAM (5)
        {
          q: "Which code prints 'Positive' for x=5 and 'Negative' for x=-2?",
          opts: [
            `if x>0:
    print('Positive')
else:
    print('Negative')`,
            `if x>=0:
    print('Positive')
else:
    print('Negative')`,
            `if x<0:
    print('Positive')
else:
    print('Negative')`,
            `if x:
    print('Positive')
else:
    print('Negative')`,
          ],
          ans: 0,
          exp: "x>0 correctly separates positive and negative values (0 would not be 'Positive').",
        },
        {
          q: "Which code prints 'Zero' when n = 0?",
          opts: [
            `if n==0:
    print('Zero')`,
            `if n:
    print('Non-zero')
else:
    print('Zero')`,
            `if n>0:
    print('Zero')`,
            `print('Zero')`,
          ],
          ans: 0,
          exp: "To detect zero reliably, compare explicitly: n==0.",
        },
        {
          q: "Which code prints 'Adult' for age = 20?",
          opts: [
            `if age>=18:
    print('Adult')`,
            `if age>21:
    print('Adult')`,
            `if age<18:
    print('Adult')`,
            `print('Adult')`,
          ],
          ans: 0,
          exp: "Adult is age 18 or above, so age>=18 is correct.",
        },
        {
          q: "Which code prints 'Fail' for marks = 35?",
          opts: [
            `if marks>=40:
    print('Pass')
else:
    print('Fail')`,
            `if marks>35:
    print('Pass')`,
            `if marks<35:
    print('Fail')`,
            `print('Fail')`,
          ],
          ans: 0,
          exp: "If marks are below 40, the else block should print 'Fail'.",
        },
        {
          q: "Which code prints 'Even' for x = 4?",
          opts: [
            `if x%2==0:
    print('Even')`,
            `if x/2==0:
    print('Even')`,
            `if x%2:
    print('Even')`,
            `print('Even')`,
          ],
          ans: 0,
          exp: "Even numbers have remainder 0 when divided by 2, so x%2==0.",
        },

        // ================= SVG / FLOWCHART (5)
        {
          q: "According to the flowchart, marks = 75 gives?",
          svg: FLOW_GRADE,
          opts: ["A", "B", "Fail", "Error"],
          ans: 1,
          exp: "75 is not ‚â• 90, but it is ‚â• 60, so it prints B.",
        },
        {
          q: "According to the flowchart, marks = 95 gives?",
          svg: FLOW_GRADE,
          opts: ["A", "B", "Fail", "None"],
          ans: 0,
          exp: "95 ‚â• 90, so the first condition is true ‚Üí Print A.",
        },
        {
          q: "Flowchart conditions are checked in which order?",
          svg: FLOW_GRADE,
          opts: ["Bottom to top", "Top to bottom", "Random", "Reverse"],
          ans: 1,
          exp: "In if/elif/else, Python checks conditions from top to bottom.",
        },
        {
          q: "If the first condition is true, what happens to elif?",
          svg: FLOW_GRADE,
          opts: ["It also runs", "It is skipped", "Error", "Runs later"],
          ans: 1,
          exp: "Once a True condition is found, the remaining elif/else parts are skipped.",
        },
        {
          q: "How many paths can run in one if-elif-else chain?",
          svg: FLOW_GRADE,
          opts: ["All", "Two", "Only one", "Zero"],
          ans: 2,
          exp: "Only one block runs: the first True condition‚Äôs block (or else if none are True).",
        },

        // ================= THEORY (5)
        {
          q: "What does elif mean?",
          opts: ["else if", "end if", "equal if", "extra if"],
          ans: 0,
          exp: "elif is Python‚Äôs way to say 'else if' (an additional condition checked after if).",
        },
        {
          q: "How many blocks execute in if-elif-else?",
          opts: ["All", "Only one", "Two", "Zero"],
          ans: 1,
          exp: "Only one block executes: the first block whose condition is True, otherwise the else block.",
        },
        {
          q: "Which keyword runs if all conditions are false?",
          opts: ["if", "elif", "else", "pass"],
          ans: 2,
          exp: "else runs only when every if/elif condition is False.",
        },
        {
          q: "What is bool(0)?",
          opts: ["True", "False", "None", "Error"],
          ans: 1,
          exp: "0 is falsy in Python, so bool(0) is False.",
        },
        {
          q: "Which value is truthy?",
          opts: ["0", "''", "[]", "1"],
          ans: 3,
          exp: "Non-zero numbers like 1 are truthy; empty string/list and 0 are falsy.",
        },

        // ================= PROGRAMMING LOGIC (5)
        {
          q: "Correct leap year condition",
          opts: [
            "y%400==0 or (y%4==0 and y%100!=0)",
            "y%4==0",
            "y%100==0",
            "y%400!=0",
          ],
          ans: 0,
          exp: "Leap years are divisible by 400 OR divisible by 4 but not by 100 (e.g., 2000 leap, 1900 not).",
        },
        {
          q: "Correct code to find largest of a and b",
          opts: [
            `if a>b:
    print(a)
else:
    print(b)`,
            `if a>=b:
    print(a)
else:
    print(b)`,
            "print(max(a,b))",
            `if a<b:
    print(a)
else:
    print(b)`,
          ],
          ans: 0,
          exp: "Option A prints a when a>b, otherwise prints b (largest).",
        },
        {
          q: "Correct way to check vowel (lowercase)",
          opts: [
            "if ch in 'aeiou':",
            "if ch=='a' or ch=='e' or ch=='i' or ch=='o' or ch=='u':",
            "if ch not in 'aeiou':",
            "if ch=='vowel':",
          ],
          ans: 0,
          exp: "Membership test (in 'aeiou') is the cleanest and most correct here.",
        },
        {
          q: "Correct discount slab logic (20% if bill>=5000, 10% if bill>=2000 else 0%)",
          opts: [
            `if bill>=5000:
    discount=20
elif bill>=2000:
    discount=10
else:
    discount=0`,
            `if bill>=2000:
    discount=20
else:
    discount=0`,
            `if bill>=5000 and bill>=2000:
    discount=20
else:
    discount=10`,
            "discount=10",
          ],
          ans: 0,
          exp: "Check the highest slab first (>=5000), then next slab (>=2000), else 0.",
        },
        {
          q: "Correct age category logic (Adult if age>=18 else Minor)",
          opts: [
            `if age>=18:
    print('Adult')
else:
    print('Minor')`,
            `if age>21:
    print('Adult')
else:
    print('Minor')`,
            `if age<18:
    print('Adult')
else:
    print('Minor')`,
            "print('Adult')",
          ],
          ans: 0,
          exp: "Adult is age 18+, otherwise Minor.",
        },
      ];

      /* ---------------- Assignments ---------------- */
      const ASSIGNMENTS = [
        "Write a program to check whether a number is Positive, Negative or Zero using if-elif-else.",
        "Ask the user for marks and print Grade A, B or Fail using if-elif-else.",
        "Write a program to check whether a year is a leap year.",
        "Take age as input and print Child, Teen or Adult using conditions.",
        "Ask temperature and print Hot, Warm or Cold using elif.",
      ];

      /* ---------------- State ---------------- */
      let quiz = [];
      let submitted = false;

      /* ---------------- Build Quiz ---------------- */
      function buildQuiz() {
        submitted = false;

        const scoreEl = document.getElementById("score");
        const metaEl = document.getElementById("meta");
        const submitBtn = document.getElementById("submitBtn");

        scoreEl.textContent = "Not submitted";
        metaEl.textContent = "";
        submitBtn.disabled = false;

        // Shuffle questions and shuffle options (keep the correct answer accurate)
        quiz = shuffle(BANK).map((q) => {
          const correctText = q.opts[q.ans];
          const shuffledOpts = shuffle(q.opts);
          return {
            ...q,
            opts: shuffledOpts,
            ans: shuffledOpts.indexOf(correctText),
          };
        });

        const box = document.getElementById("quiz");
        let out = "";

        quiz.forEach((q, i) => {
          out += `<div class="q">
      <b>Q${i + 1}. ${esc(q.q)}</b>`;

          if (q.code) out += `<pre>${esc(q.code)}</pre>`;
          if (q.svg) out += q.svg;

          out += `<div class="options">`;
          q.opts.forEach((o, j) => {
            const L = String.fromCharCode(65 + j);
            out += `<label class="opt" id="o${i}_${j}">
        <input type="radio" name="q${i}" value="${j}" />
        <div><b>${L}.</b> ${renderMaybePre(o)}</div>
      </label>`;
          });

          out += `</div>
      <div class="answerBox" id="a${i}" style="display:none"></div>
    </div>`;
        });

        // Assignments + Pyodide editor UI
        out += `<hr>
    <div class="assignment">
      <b>üìù Programming Assignments (Not Graded)</b>
      <ol>${ASSIGNMENTS.map((a, idx) => `<li>${esc(a)}</li>`).join("")}</ol>

      <div class="editorWrap">
        <div class="editorCard">
          <div class="editorTop">
            <div class="selectRow" style="min-width:280px;flex:1">
              <label style="font-weight:900;color:#92400e;">Choose assignment template:</label>
              <select id="asSelect" aria-label="Choose assignment template"></select>
            </div>
            <div style="display:flex;gap:10px;flex-wrap:wrap;align-items:center">
              <span class="statusPill" id="pyStatus"><span class="dot"></span> Pyodide loading‚Ä¶</span>
              <button class="btn secondary" id="clearBtn" type="button">üßπ Clear</button>
              <button class="btn" id="runBtn" type="button" disabled>‚ñ∂ Run Python</button>
            </div>
          </div>
          <div class="note">Write Python and click <b>Run</b>. (Shortcut: <b>Ctrl+Enter</b>)</div>
          <textarea id="codeEditor" spellcheck="false"></textarea>
          <div class="kbdHint">Note: This runs in your browser using Pyodide (no server needed).</div>
        </div>

        <div class="editorCard">
          <div style="font-weight:900;color:#92400e;margin-bottom:8px">Output</div>
          <div class="outBox" id="pyOut">(Output will appear here)</div>
        </div>
      </div>
    </div>`;

        box.innerHTML = out;

        // enable radios
        document
          .querySelectorAll("input[type=radio]")
          .forEach((r) => (r.disabled = false));

        // setup editor (after DOM inserted)
        setupPyEditor();

        window.scrollTo({ top: 0, behavior: "smooth" });
      }

      /* ---------------- Submit Quiz ---------------- */
      function submitQuiz() {
        if (submitted) return;
        submitted = true;

        let score = 0;
        let attempted = 0;

        quiz.forEach((q, i) => {
          const sel = document.querySelector(`input[name="q${i}"]:checked`);
          const chosen = sel ? Number(sel.value) : null;
          if (chosen !== null) attempted++;

          q.opts.forEach((_, j) => {
            const lab = document.getElementById(`o${i}_${j}`);
            lab.classList.add("dim");
            lab.querySelectorAll(".badge").forEach((b) => b.remove());

            if (j === q.ans) {
              lab.classList.add("correct");
              lab.insertAdjacentHTML(
                "beforeend",
                ` <span class="badge ok">Correct</span>`
              );
            }
            if (chosen !== null && chosen === j) {
              lab.insertAdjacentHTML(
                "beforeend",
                ` <span class="badge me">Your choice</span>`
              );
              if (chosen !== q.ans) {
                lab.classList.add("wrong");
                lab.insertAdjacentHTML(
                  "beforeend",
                  ` <span class="badge bad">Wrong</span>`
                );
              }
            }
          });

          if (chosen !== null && chosen === q.ans) score++;

          const ab = document.getElementById(`a${i}`);
          ab.style.display = "block";

          const your = chosen === null ? "Not attempted" : quiz[i].opts[chosen];
          const correct = quiz[i].opts[quiz[i].ans];

          ab.innerHTML = `<b>Your Answer:</b> ${renderMaybePre(your)}<br>
       <b>Correct Answer:</b> ${renderMaybePre(correct)}<br>
       <b>Explanation:</b> ${esc(quiz[i].exp)}`;
        });

        document.getElementById(
          "score"
        ).textContent = `Score: ${score} / ${quiz.length}`;
        document.getElementById(
          "meta"
        ).textContent = `Attempted: ${attempted} / ${
          quiz.length
        } ‚Ä¢ Unattempted: ${quiz.length - attempted}`;
        document.getElementById("submitBtn").disabled = true;

        document
          .querySelectorAll("input[type=radio]")
          .forEach((r) => (r.disabled = true));
        document
          .getElementById("score")
          .scrollIntoView({ behavior: "smooth", block: "start" });
      }

      /* ==================== Pyodide Editor ==================== */
      let pyodideReady = null;
      let _pyodide = null;

      function setPyStatus(text, kind) {
        const el = document.getElementById("pyStatus");
        if (!el) return;
        el.innerHTML = `<span class="dot ${kind || ""}"></span> ${esc(text)}`;
      }

      function getAssignmentTemplates() {
        return [
          {
            title: "Assignment 1: Positive / Negative / Zero",
            code: `# Assignment 1
# Write a program to check whether a number is Positive, Negative or Zero using if-elif-else.

n = int(input("Enter a number: "))

# TODO: write your if-elif-else here
if n > 0:
    print("Positive")
elif n < 0:
    print("Negative")
else:
    print("Zero")
`,
          },
          {
            title: "Assignment 2: Marks -> Grade A/B/Fail",
            code: `# Assignment 2
# Ask the user for marks and print Grade A, B or Fail using if-elif-else.
# Rule:
#   marks >= 90 -> A
#   marks >= 60 -> B
#   else -> Fail

marks = int(input("Enter marks (0-100): "))

# TODO: write your if-elif-else here
if marks >= 90:
    print("Grade A")
elif marks >= 60:
    print("Grade B")
else:
    print("Fail")
`,
          },
          {
            title: "Assignment 3: Leap Year",
            code: `# Assignment 3
# Write a program to check whether a year is a leap year.

y = int(input("Enter year: "))

# TODO: leap year logic
if y % 400 == 0 or (y % 4 == 0 and y % 100 != 0):
    print("Leap Year")
else:
    print("Not a Leap Year")
`,
          },
          {
            title: "Assignment 4: Age Category (Child/Teen/Adult)",
            code: `# Assignment 4
# Take age as input and print Child, Teen or Adult using conditions.
# Suggested:
#   age < 13 -> Child
#   age < 18 -> Teen
#   else -> Adult

age = int(input("Enter age: "))

# TODO: write your if-elif-else here
if age < 13:
    print("Child")
elif age < 18:
    print("Teen")
else:
    print("Adult")
`,
          },
          {
            title: "Assignment 5: Temperature (Hot/Warm/Cold)",
            code: `# Assignment 5
# Ask temperature and print Hot, Warm or Cold using elif.
# Suggested:
#   temp >= 30 -> Hot
#   temp >= 20 -> Warm
#   else -> Cold

temp = float(input("Enter temperature: "))

# TODO: write your if-elif-else here
if temp >= 30:
    print("Hot")
elif temp >= 20:
    print("Warm")
else:
    print("Cold")
`,
          },
        ];
      }

      function setupPyEditor() {
        const select = document.getElementById("asSelect");
        const editor = document.getElementById("codeEditor");
        const runBtn = document.getElementById("runBtn");
        const clearBtn = document.getElementById("clearBtn");
        const outBox = document.getElementById("pyOut");

        if (!select || !editor || !runBtn || !outBox) return;

        // populate select
        const templates = getAssignmentTemplates();
        select.innerHTML = templates
          .map((t, i) => `<option value="${i}">${esc(t.title)}</option>`)
          .join("");
        editor.value = templates[0].code;

        select.addEventListener("change", () => {
          const idx = Number(select.value);
          editor.value = templates[idx].code;
          outBox.textContent = "(Output will appear here)";
        });

        clearBtn.addEventListener("click", () => {
          editor.value = "";
          outBox.textContent = "";
        });

        editor.addEventListener("keydown", (e) => {
          if ((e.ctrlKey || e.metaKey) && e.key === "Enter") {
            e.preventDefault();
            runBtn.click();
          }
        });

        // init pyodide once
        if (!pyodideReady) {
          pyodideReady = (async () => {
            try {
              setPyStatus("Pyodide loading‚Ä¶", "");
              _pyodide = await loadPyodide({
                indexURL: "https://cdn.jsdelivr.net/pyodide/v0.25.1/full/",
              });

              // Helper that captures stdout/stderr into a JS string
              await _pyodide.runPythonAsync(`
import sys, io, builtins, traceback

class _JSWriter(io.StringIO):
    pass

def _run_user(code, input_data=""):
    # capture stdout + stderr
    out = _JSWriter()
    err = _JSWriter()
    old_out, old_err = sys.stdout, sys.stderr
    sys.stdout, sys.stderr = out, err

    # patch input()
    old_input = builtins.input
    it = iter(input_data.splitlines())
    def _input(prompt=""):
        try:
            return next(it)
        except StopIteration:
            raise EOFError("No more input provided.")
    builtins.input = _input

    try:
        exec(code, {})
    except Exception:
        traceback.print_exc()
    finally:
        builtins.input = old_input
        sys.stdout, sys.stderr = old_out, old_err

    combined = out.getvalue()
    if err.getvalue():
        combined += ("\\n" if combined and not combined.endswith("\\n") else "") + err.getvalue()
    return combined
        `);

              setPyStatus("Pyodide ready", "ok");
              runBtn.disabled = false;
            } catch (e) {
              console.error(e);
              setPyStatus("Pyodide failed to load", "bad");
              runBtn.disabled = true;
            }
          })();
        }

        runBtn.onclick = async () => {
          outBox.textContent = "Running‚Ä¶";
          runBtn.disabled = true;
          try {
            await pyodideReady;
            if (!_pyodide) throw new Error("Pyodide not available.");

            const code = editor.value || "";
            // Simple way to provide input: ask once in a prompt box (optional)
            // Users can type multiple lines separated by \n
            const wantsInput = /input\s*\(/.test(code);
            let inputData = "";
            if (wantsInput) {
              inputData =
                prompt(
                  "This code uses input().\nEnter input lines (use \\n for new lines):",
                  ""
                ) || "";
              inputData = inputData.replace(/\\n/g, "\n");
            }

            _pyodide.globals.set("__USER_CODE__", code);
            _pyodide.globals.set("__USER_INPUT__", inputData);

            const result = await _pyodide.runPythonAsync(
              `_run_user(__USER_CODE__, __USER_INPUT__)`
            );
            outBox.textContent = result ? String(result) : "(No output)";
          } catch (err) {
            outBox.textContent =
              "Error: " + (err && err.message ? err.message : String(err));
          } finally {
            runBtn.disabled = false;
          }
        };
      }

      /* ---------------- Init ---------------- */
      buildQuiz();
    </script>
  </body>
</html>
