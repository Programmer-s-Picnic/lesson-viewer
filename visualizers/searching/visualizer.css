/* visualizer.css */

:root {
    --pp-vis-bg-body: #fff7e6;
    --pp-vis-bg-panel: #fffaf0;
    --pp-vis-bg-card: #fffef7;
    --pp-vis-text-main: #3a2a1a;
    --pp-vis-accent-strong: #b35a00;
    --pp-vis-accent-med: #a14c00;
    --pp-vis-accent-soft: #8c3f00;
    --pp-vis-border-soft: #f3c26b;

    --pp-vis-cell-bg: #fff8e1;
    --pp-vis-cell-border: #f3c26b;
    --pp-vis-cell-active: #ffcc80;
    --pp-vis-cell-compare: #ffe0b2;
    --pp-vis-cell-found: #c8e6c9;
    --pp-vis-cell-miss: #ffcdd2;

    --pp-vis-pointer-current: #fb923c;
    --pp-vis-pointer-low: #22c55e;
    --pp-vis-pointer-mid: #3b82f6;
    --pp-vis-pointer-high: #eab308;

    --pp-vis-code-bg: #fff3d1;
    --pp-vis-code-border: #f1b14b;

    --pp-vis-log-bg: #fff8dd;
    --pp-vis-log-border: #f3c26b;
}

*,
*::before,
*::after {
    box-sizing: border-box;
}

body {
    margin: 0;
    padding: 0;
    font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    background: var(--pp-vis-bg-body);
    color: var(--pp-vis-text-main);
}

.pp-vis-root {
    max-width: 1100px;
    margin: 16px auto;
    padding: 16px;
    background: var(--pp-vis-bg-panel);
    border-radius: 16px;
    border: 1px solid var(--pp-vis-border-soft);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
}

.pp-vis-header {
    margin-bottom: 12px;
}

.pp-vis-title {
    margin: 0 0 4px 0;
    font-size: 1.4rem;
    color: var(--pp-vis-accent-strong);
}

.pp-vis-subtitle {
    margin: 0;
    font-size: 0.9rem;
    color: var(--pp-vis-accent-soft);
    opacity: 0.9;
}

/* Panels */

.pp-vis-panel {
    background: var(--pp-vis-bg-card);
    border-radius: 12px;
    border: 1px solid var(--pp-vis-border-soft);
    padding: 10px;
    box-shadow: 0 3px 8px rgba(0, 0, 0, 0.04);
    margin-top: 10px;
}

.pp-vis-panel-title {
    margin: 0 0 6px 0;
    font-size: 0.95rem;
    font-weight: 600;
    color: var(--pp-vis-accent-med);
}

/* Mode panel */

.pp-vis-mode-buttons {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin-top: 4px;
}

/* Interactive inputs */

.pp-vis-interactive-panel .pp-vis-interactive-row {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    align-items: flex-end;
    margin-top: 4px;
}

.pp-vis-field {
    display: flex;
    flex-direction: column;
    gap: 3px;
}

.pp-vis-field input {
    padding: 6px 8px;
    border-radius: 8px;
    border: 1px solid var(--pp-vis-border-soft);
    font-size: 0.85rem;
    background: #fff;
}

.pp-vis-help-text {
    margin: 6px 0 0 0;
    font-size: 0.75rem;
    opacity: 0.85;
}

/* Main layout */

.pp-vis-main {
    display: grid;
    grid-template-columns: minmax(0, 1.2fr) minmax(0, 1fr);
    gap: 10px;
    margin-top: 10px;
}

@media (max-width: 860px) {
    .pp-vis-main {
        grid-template-columns: 1fr;
    }
}

/* Structure panel */

.pp-vis-structure {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.pp-vis-array-row {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    justify-content: center;
}

.pp-vis-array-cell {
    min-width: 44px;
    height: 52px;
    padding: 4px 5px;
    border-radius: 10px;
    border: 2px solid var(--pp-vis-cell-border);
    background: var(--pp-vis-cell-bg);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    font-size: 0.85rem;
    position: relative;
    transition:
        background 0.18s ease,
        transform 0.18s ease,
        border-color 0.18s ease,
        box-shadow 0.18s ease,
        opacity 0.18s ease;
}

.pp-vis-array-value {
    font-weight: 600;
}

.pp-vis-array-index {
    font-size: 0.65rem;
    opacity: 0.75;
    margin-top: 1px;
}

.pp-vis-cell-active {
    background: var(--pp-vis-cell-active);
    border-color: #fb923c;
    box-shadow: 0 0 0 2px rgba(251, 146, 60, 0.35);
    transform: translateY(-1px);
}

.pp-vis-cell-compare {
    background: var(--pp-vis-cell-compare);
    border-color: #f59e0b;
}

.pp-vis-cell-found {
    background: var(--pp-vis-cell-found);
    border-color: #22c55e;
    box-shadow: 0 0 0 2px rgba(34, 197, 94, 0.4);
}

.pp-vis-cell-miss {
    background: var(--pp-vis-cell-miss);
    border-color: #ef4444;
}

/* NEW: highlight selected (kept) vs discarded halves */

.pp-vis-cell-half-keep {
    box-shadow: inset 0 0 0 2px rgba(34, 197, 94, 0.45);
}

.pp-vis-cell-half-drop {
    background: #fff1f2;
    border-color: #fecaca;
    opacity: 0.85;
}

/* Pointer tags under cells */

.pp-vis-pointer-badges {
    position: absolute;
    bottom: -16px;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    flex-wrap: wrap;
    gap: 2px;
    font-size: 0.6rem;
}

.pp-vis-pointer-badge {
    padding: 1px 5px;
    border-radius: 999px;
    background: rgba(255, 255, 255, 0.9);
    border: 1px solid rgba(0, 0, 0, 0.06);
}

.pp-vis-pointer-current {
    background: var(--pp-vis-pointer-current);
    color: #1f2937;
}

.pp-vis-pointer-low {
    background: var(--pp-vis-pointer-low);
    color: #052e16;
}

.pp-vis-pointer-mid {
    background: var(--pp-vis-pointer-mid);
    color: #eff6ff;
}

.pp-vis-pointer-high {
    background: var(--pp-vis-pointer-high);
    color: #422006;
}

/* Log */

.pp-vis-log {
    background: var(--pp-vis-log-bg);
    border-radius: 10px;
    border: 1px dashed var(--pp-vis-log-border);
    padding: 6px;
    font-size: 0.8rem;
    min-height: 60px;
    white-space: pre-wrap;
}

.pp-vis-log-label {
    font-weight: 600;
    color: var(--pp-vis-accent-soft);
}

/* Code panel */

.pp-vis-code-wrapper {
    background: var(--pp-vis-code-bg);
    border-radius: 10px;
    border: 1px solid var(--pp-vis-code-border);
    padding: 6px;
    max-height: 260px;
    overflow: auto;
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    font-size: 0.8rem;
}

.pp-vis-code-line {
    padding: 1px 4px;
    border-radius: 6px;
    transition: background 0.18s ease, color 0.18s ease, opacity 0.18s ease;
    display: block;
}

.pp-vis-code-line-active {
    background: #fed7aa;
    color: #7c2d12;
}

.pp-vis-code-line-dim {
    opacity: 0.6;
}

/* Controls */

.pp-vis-controls {
    margin-top: 10px;
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    align-items: center;
    justify-content: space-between;
}

.pp-vis-controls-left {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
}

.pp-vis-btn {
    border-radius: 999px;
    border: 1px solid #b57400;
    background: #ffcc73;
    padding: 5px 10px;
    font-size: 0.8rem;
    font-weight: 600;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    gap: 3px;
}

.pp-vis-btn:hover {
    background: #ffdb9b;
}

.pp-vis-btn:disabled {
    opacity: 0.5;
    cursor: default;
    background: #ffe8b5;
}

.pp-vis-speed-control {
    display: flex;
    align-items: center;
    gap: 4px;
    font-size: 0.75rem;
}

.pp-vis-speed-control input {
    width: 90px;
}

.pp-vis-badge-small {
    padding: 3px 7px;
    border-radius: 999px;
    border: 1px solid var(--pp-vis-border-soft);
    background: #fff7e6;
    font-size: 0.7rem;
}

/* Footer */

.pp-vis-footer-note {
    margin-top: 8px;
    font-size: 0.75rem;
    text-align: right;
    opacity: 0.8;
}