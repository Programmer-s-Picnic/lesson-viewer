<!DOCTYPE html>
<html lang="en">

<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Resume Builder – Programmer's Picnic</title>
</head>

<body>

<div id="resumeMakerApp"
style="max-width:98vw;margin:auto;font-family:system-ui;background:#fff7e6;padding:20px;border-radius:16px;border:1px solid #f3c26b;">

<h1 style="text-align:center;color:#b35a00;">Resume Maker – Programmer's Picnic</h1>

<!-- ================= CONTROLS ================= -->
<div style="display:flex;gap:10px;flex-wrap:wrap;margin-bottom:15px;">
<select id="themeSelect" class="rm-input">
<option value="saffron">Saffron</option>
<option value="blue">Blue</option>
<option value="dark">Dark</option>
</select>

<select id="templateSelect" class="rm-input">
<option value="modern">Modern</option>
<option value="minimal">Minimal</option>
<option value="timeline">Timeline</option>
<option value="twocol">Two Column</option>
</select>

<label style="display:flex;align-items:center;gap:6px;">
<input type="checkbox" id="atsMode"> ATS Mode (Print Safe)
</label>
</div>

<!-- ================= FORM ================= -->
<div id="resumeForm" style="background:#fffaf0;padding:15px;border-radius:12px;border:1px solid #f1b14b;">
<label>Name</label><input id="name" class="rm-input">
<label>Email</label><input id="email" class="rm-input">
<label>Phone</label><input id="phone" class="rm-input">
<label>Location</label><input id="location" class="rm-input">
<label>LinkedIn</label><input id="linkedin" class="rm-input">
<label>Portfolio</label><input id="portfolio" class="rm-input">
<label>Career Objective</label><textarea id="objective" class="rm-input"></textarea>
<label>Skills (comma separated)</label><input id="skills" class="rm-input">
<button class="rm-btn" id="generateBtn" type="button">Generate Resume</button>
</div>

<!-- ================= OUTPUT ================= -->
<div id="resumeOutput" style="display:none;margin-top:20px;">
<div id="resumePrintArea"
style="background:white;padding:20px;border-radius:12px;border:1px solid #e9c48f;"></div>
<button class="rm-btn" onclick="window.print()">Download PDF</button>
</div>

</div>

<!-- ================= CSS ================= -->
<style>
.rm-input{
width:100%;
padding:8px;
margin:6px 0 12px;
border-radius:8px;
border:1px solid #f3c26b;
}
.rm-btn{
background:#ffcc73;
border:1px solid #b57400;
padding:10px 16px;
border-radius:10px;
font-weight:600;
cursor:pointer;
}
.resume-header{
display:flex;
gap:16px;
margin-bottom:12px;
}
.theme-saffron{color:#3a2a1a;}
.theme-blue{color:#1e3a8a;}
.theme-dark{background:#111;color:white;}
.ats *{
background:white!important;
color:black!important;
border:none!important;
box-shadow:none!important;
}

/* ATS SCORE */
.ats-score-box{
display:flex;
gap:12px;
align-items:center;
margin-bottom:12px;
}
.ats-circle{
width:56px;
height:56px;
border-radius:50%;
border:3px solid #22c55e;
display:flex;
align-items:center;
justify-content:center;
font-weight:700;
}
.no-print{}

/* ===== PRINT FIX (IMPORTANT) ===== */
@media print{
body *{
visibility:hidden!important;
}

#resumePrintArea{
visibility:visible!important;
position:absolute;
top:0;
left:0;
width:100%;
}

#resumePrintArea *{
visibility:visible!important;
}

/* FINAL KILL SWITCH */
.no-print,
.no-print *{
display:none!important;
visibility:hidden!important;
}
}
</style>

<!-- ================= JS ================= -->
<script>
function collectData(){
return{
name:val("name"),
email:val("email"),
phone:val("phone"),
location:val("location"),
linkedin:val("linkedin"),
portfolio:val("portfolio"),
objective:val("objective"),
skills:val("skills"),
theme:themeSelect.value,
template:templateSelect.value,
ats:atsMode.checked
};
}

function calculateATSScore(d){
let score=0;
if(d.objective.length>20)score+=20;
if(d.skills.split(",").length>=5)score+=30;
if(d.name)score+=10;
if(d.email&&d.phone)score+=10;
return Math.min(score,100);
}

generateBtn.onclick=()=>{
const d=collectData();
const atsScore=calculateATSScore(d);

const atsBox = d.ats ? "" : `
<div class="ats-score-box no-print">
<div class="ats-circle">${atsScore}</div>
<div>
<strong>ATS Score:</strong> ${atsScore}/100<br>
<small>Improve skills & bullets to raise score</small>
</div>
</div>
`;

resumePrintArea.innerHTML=`
<div class="theme-${d.theme} ${d.ats?"ats":""}">
${atsBox}
<div class="resume-header">
<div>
<h1>${d.name}</h1>
<p>${[d.email,d.phone,d.location].filter(Boolean).join(" | ")}</p>
<p>${[d.linkedin,d.portfolio].filter(Boolean).join(" | ")}</p>
</div>
</div>

<h2>Career Objective</h2>
<p>${d.objective}</p>

<h2>Skills</h2>
<ul>${d.skills.split(",").map(s=>`<li>${s.trim()}</li>`).join("")}</ul>
</div>
`;

resumeOutput.style.display="block";
};

function val(id){
return document.getElementById(id).value.trim();
}
</script>

</body>
</html>