<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Varanasi Tourism Planner â€” Build Your Own Tour</title>
  <meta name="description" content="Varanasi tourism page with destinations and a DIY tour builder. Each destination has a sliding picture carousel, search on the right, save tour on localStorage, share tour on WhatsApp, and view selected destinations on a map."/>
  <link rel="stylesheet" href="./styles.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin="">
</head>
<body>
  <div class="topbar">
    <div class="topbar-inner">
      <div class="logo" aria-label="Varanasi Tourism Planner">
        <div class="logo-badge">à¥</div>
        <div>
          <div class="logo-title">Varanasi Tourism Planner</div>
          <div class="logo-sub">Select destinations â€¢ Build your own tour</div>
        </div>
      </div>

      <div class="pill" title="Quick search (same as right-side search)">
        ğŸ” <input id="topSearch" type="search" placeholder="Search: Panchkosi, Sarnath, ghats..." autocomplete="off"/>
      </div>

      <button class="btn secondary" id="saveTourBtn" title="Save current tour in browser">ğŸ’¾ Save Tour</button>
    </div>
  </div>

  <div class="wrap">
    <div class="hero">
      <section class="panel">
        <div class="panel-h">
          <div>
            <h1>Explore Varanasi</h1>
            <p>
              Choose places you want to visit and build your personal tour plan.
              Your tour is saved in <b>localStorage</b> so it stays even after refresh.
            </p>
            <div class="chips">
              <span class="chip hot">Start Point</span>
              <span class="chip hot">Ghats</span>
              <span class="chip hot">Temples</span>
              <span class="chip hot">Heritage</span>
              <span class="chip hot">Sarnath</span>
              <span class="chip">Food</span>
              <span class="chip">Shopping</span>
              <span class="chip">Museum</span>
              <span class="chip">Experience</span>
              <span class="chip">Parikrama</span>
            </div>
          </div>
          <div class="countpill"><span id="destCount">0</span> destinations</div>
        </div>
        <div class="panel-b">
          <div class="grid" id="destGrid"></div>
        </div>
      </section>

      <aside class="panel right">
        <div class="panel-h">
          <div>
            <h2>Search & Tour Builder</h2>
            <p>Filter destinations, add them to your tour, reorder, and share.</p>
          </div>
          <span class="countpill"><span id="tourCount">0</span> stops</span>
        </div>

        <div class="panel-b">
          <!-- Nearby Explorer -->
          <div class="loc-card" aria-label="Nearby Explorer">
            <div class="loc-head">
              <div>
                <div class="loc-title">ğŸ“ Nearby Explorer</div>
                <div class="loc-sub">Use your current location or search a place. See whatâ€™s nearby.</div>
              </div>
              <span class="loc-badge" id="locStatus">Not set</span>
            </div>

            <div class="loc-actions">
              <button class="btn" id="useMyLocBtn" title="Use device GPS">ğŸ›°ï¸ Near Me</button>
              <button class="btn secondary" id="pinHomeBtn" title="Use Champak's Home as location">ğŸ  Use Home</button>
            </div>

            <div class="loc-row">
              <input id="locInput" class="field" type="search" placeholder="Type a location: e.g., 'Assi Ghat', 'BHU', 'Sigra'" autocomplete="off"/>
              <button class="btn secondary" id="setLocBtn" title="Set this as location">Set</button>
            </div>

            <div class="loc-row2">
              <div class="loc-range">
                <label class="loc-label" for="radiusKm">
                  Radius: <b><span id="radiusLabel">3</span> km</b>
                </label>
                <input id="radiusKm" type="range" min="0.5" max="20" step="0.5" value="3" />
              </div>
              <div class="loc-mini">
                <button class="btn secondary" id="showNearbyOnMapBtn">ğŸ—ºï¸ Nearby Map</button>
              </div>
            </div>

            <div class="loc-note" id="locNote">
              Tip: Tap <b>Near Me</b> â†’ choose radius â†’ add the closest places.
            </div>

            <div class="nearby-wrap">
              <div class="nearby-head">
                <div class="label" style="margin:0;">Nearby destinations</div>
                <div class="nearby-tools">
                  <button class="tinybtn" id="addTop3Btn" title="Add 3 nearest">+ Top 3</button>
                  <button class="tinybtn" id="addNearbyBtn" title="Add all within radius">+ Add All</button>
                </div>
              </div>
              <div id="nearbyList" class="nearby-list"></div>
            </div>
          </div>

          <div class="spacer14"></div>

          <!-- NEW: Ready Routes -->
          <div class="route-card" aria-label="Ready Routes">
            <div class="route-head">
              <div>
                <div class="route-title">ğŸ§­ Ready Routes</div>
                <div class="route-sub">One-tap curated plans (you can still reorder after loading).</div>
              </div>
              <span class="route-badge" id="routeStatus">Pick one</span>
            </div>

            <div class="row" style="margin-top:10px;">
              <select id="routeSelect" class="field" aria-label="Select a ready route">
                <option value="">Select a ready routeâ€¦</option>
              </select>
            </div>

            <div class="route-actions">
              <button class="btn" id="loadRouteBtn">âš¡ Load Route</button>
              <button class="btn secondary" id="addRouteBtn" title="Add route stops to current tour">â• Add to Tour</button>
            </div>

            <div class="route-note" id="routeNote">
              Tip: â€œLoad Routeâ€ replaces your tour (keeps Start Point). â€œAdd to Tourâ€ just appends missing stops.
            </div>

            <div class="route-mini" id="routePreview" style="display:none;"></div>
          </div>

          <div class="spacer14"></div>

          <div class="label">Search destinations</div>
          <input id="rightSearch" class="field" type="search" placeholder="Type to search..." autocomplete="off"/>

          <div class="spacer12"></div>

          <div class="label">Quick filters</div>
          <div class="row">
            <select id="filterType" class="field" aria-label="Filter by type">
              <option value="all">All types</option>
            </select>
            <select id="filterTime" class="field" aria-label="Filter by best time">
              <option value="all">Any time</option>
              <option value="sunrise">Sunrise</option>
              <option value="day">Day</option>
              <option value="evening">Evening</option>
              <option value="night">Night</option>
            </select>
          </div>

          <div class="spacer14"></div>

          <div class="label">Your tour (reorder)</div>
          <div class="tourlist" id="tourList"></div>

          <div class="row mt12">
            <button class="btn" id="makePlanBtn">ğŸ§¾ Make Tour Summary</button>
            <button class="btn secondary" id="viewMapBtn">ğŸ—ºï¸ View Tour Map</button>
          </div>

          <div class="row mt10">
            <button class="btn danger" id="clearTourBtn">ğŸ§¹ Clear</button>
            <button class="btn secondary" id="openMapsBtn" title="Open in Google Maps (new tab)">â†—ï¸ Open in Maps</button>
          </div>

          <div class="note" id="summaryBox" style="display:none;"></div>

          <div class="note">
            <b>Tip:</b> â€œView Tour Mapâ€ shows your selected destinations as markers + route (order matters).
            Use <span class="kbd">Esc</span> or Close to exit the map.
          </div>
        </div>
      </aside>
    </div>
  </div>

  <div class="modal" id="mapModal" aria-hidden="true" role="dialog" aria-label="Tour Map Modal">
    <div class="modal-card">
      <div class="modal-h">
        <div>
          <b id="mapTitle">Tour Map</b><br/>
          <small id="mapSub">Markers + route from your selected destinations (order matters)</small>
        </div>
        <div class="modal-actions">
          <a class="btn secondary" id="openMapsLink" href="#" target="_blank" rel="noopener">â†—ï¸ Open in Maps</a>
          <button class="btn danger" id="closeMapBtn">âœ• Close</button>
        </div>
      </div>
      <div class="modal-b">
        <div id="leafletMap" aria-label="Leaflet map"></div>
      </div>
    </div>
  </div>

  <div class="fab">
    <button class="wabtn" id="waShare">
      ğŸŸ¢ WhatsApp
      <span class="waSub"><small>Share your tour</small></span>
    </button>
  </div>

  <div class="toast" id="toast" aria-live="polite" aria-atomic="true"></div>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin=""></script>
  <script src="./app.js"></script>
</body>
</html>
